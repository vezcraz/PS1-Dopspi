var JSON;!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(k,t){"use strict";var e=[],$=k.document,n=Object.getPrototypeOf,a=e.slice,f=e.concat,l=e.push,s=e.indexOf,i={},o=i.toString,p=i.hasOwnProperty,r=p.toString,c=r.call(Object),m={};function v(t,e){var i=(e=e||$).createElement("script");i.text=t,e.head.appendChild(i).parentNode.removeChild(i)}var u="3.2.1",E=function(t,e){return new E.fn.init(t,e)},h=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,d=/^-ms-/,g=/-([a-z])/g,b=function(t,e){return e.toUpperCase()};function y(t){var e=!!t&&"length"in t&&t.length,i=E.type(t);return"function"!==i&&!E.isWindow(t)&&("array"===i||0===e||"number"==typeof e&&0<e&&e-1 in t)}E.fn=E.prototype={jquery:u,constructor:E,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=E.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return E.each(this,t)},map:function(i){return this.pushStack(E.map(this,function(t,e){return i.call(t,e,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(0<=i&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:e.sort,splice:e.splice},E.extend=E.fn.extend=function(){var t,e,i,n,s,o,r=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[a]||{},a++),"object"==typeof r||E.isFunction(r)||(r={}),a===l&&(r=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=r[e],r!==(n=t[e])&&(c&&n&&(E.isPlainObject(n)||(s=Array.isArray(n)))?(o=s?(s=!1,i&&Array.isArray(i)?i:[]):i&&E.isPlainObject(i)?i:{},r[e]=E.extend(c,o,n)):void 0!==n&&(r[e]=n));return r},E.extend({expando:"jQuery"+(u+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===E.type(t)},isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=E.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==o.call(t))&&(!(e=n(t))||"function"==typeof(i=p.call(e,"constructor")&&e.constructor)&&r.call(i)===c)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?i[o.call(t)]||"object":typeof t},globalEval:function(t){v(t)},camelCase:function(t){return t.replace(d,"ms-").replace(g,b)},each:function(t,e){var i,n=0;if(y(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(h,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(y(Object(t))?E.merge(i,"string"==typeof t?[t]:t):l.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:s.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,s=t.length;n<i;n++)t[s++]=e[n];return t.length=s,t},grep:function(t,e,i){for(var n,s=[],o=0,r=t.length,a=!i;o<r;o++)(n=!e(t[o],o))!=a&&s.push(t[o]);return s},map:function(t,e,i){var n,s,o=0,r=[];if(y(t))for(n=t.length;o<n;o++)null!=(s=e(t[o],o,i))&&r.push(s);else for(o in t)null!=(s=e(t[o],o,i))&&r.push(s);return f.apply([],r)},guid:1,proxy:function(t,e){var i,n,s;if("string"==typeof e&&(i=t[e],e=t,t=i),E.isFunction(t))return n=a.call(arguments,2),(s=function(){return t.apply(e||this,n.concat(a.call(arguments)))}).guid=t.guid=t.guid||E.guid++,s},now:Date.now,support:m}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=e[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){i["[object "+e+"]"]=e.toLowerCase()});var C=function(i){var t,g,C,o,s,p,h,f,w,l,c,x,k,r,$,m,a,u,v,E="sizzle"+1*new Date,b=i.document,S=0,n=0,d=rt(),y=rt(),T=rt(),I=function(t,e){return t===e&&(c=!0),0},_={}.hasOwnProperty,e=[],N=e.pop,j=e.push,L=e.push,A=e.slice,O=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},D="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",H="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",P="\\["+H+"*("+B+")(?:"+H+"*([*^$|!~]?=)"+H+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+H+"*\\]",R=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",z=new RegExp(H+"+","g"),M=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),F=new RegExp("^"+H+"*,"+H+"*"),q=new RegExp("^"+H+"*([>+~]|"+H+")"+H+"*"),U=new RegExp("="+H+"*([^\\]'\"]*?)"+H+"*\\]","g"),W=new RegExp(R),V=new RegExp("^"+B+"$"),Q={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),bool:new RegExp("^(?:"+D+")$","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Y=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+H+"?|("+H+")|.)","ig"),tt=function(t,e,i){var n="0x"+e-65536;return n!=n||i?e:n<0?String.fromCharCode(65536+n):String.fromCharCode(n>>10|55296,1023&n|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},nt=function(){x()},st=bt(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{L.apply(e=A.call(b.childNodes),b.childNodes),e[b.childNodes.length].nodeType}catch(t){L={apply:e.length?function(t,e){j.apply(t,A.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function ot(t,e,i,n){var s,o,r,a,l,c,u,h=e&&e.ownerDocument,d=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==d&&9!==d&&11!==d)return i;if(!n&&((e?e.ownerDocument||e:b)!==k&&x(e),e=e||k,$)){if(11!==d&&(l=X.exec(t)))if(s=l[1]){if(9===d){if(!(r=e.getElementById(s)))return i;if(r.id===s)return i.push(r),i}else if(h&&(r=h.getElementById(s))&&v(e,r)&&r.id===s)return i.push(r),i}else{if(l[2])return L.apply(i,e.getElementsByTagName(t)),i;if((s=l[3])&&g.getElementsByClassName&&e.getElementsByClassName)return L.apply(i,e.getElementsByClassName(s)),i}if(g.qsa&&!T[t+" "]&&(!m||!m.test(t))){if(1!==d)h=e,u=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(et,it):e.setAttribute("id",a=E),o=(c=p(t)).length;o--;)c[o]="#"+a+" "+vt(c[o]);u=c.join(","),h=Y.test(t)&&ft(e.parentNode)||e}if(u)try{return L.apply(i,h.querySelectorAll(u)),i}catch(t){}finally{a===E&&e.removeAttribute("id")}}}return f(t.replace(M,"$1"),e,i,n)}function rt(){var i=[];function n(t,e){return i.push(t+" ")>C.cacheLength&&delete n[i.shift()],n[t+" "]=e}return n}function at(t){return t[E]=!0,t}function lt(t){var e=k.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ct(t,e){for(var i=t.split("|"),n=i.length;n--;)C.attrHandle[i[n]]=e}function ut(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function ht(i){return function(t){var e;return"input"===t.nodeName.toLowerCase()&&t.type===i}}function dt(i){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===i}}function gt(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&st(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function pt(r){return at(function(o){return o=+o,at(function(t,e){for(var i,n=r([],t.length,o),s=n.length;s--;)t[i=n[s]]&&(t[i]=!(e[i]=t[i]))})})}function ft(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in g=ot.support={},s=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},x=ot.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:b;return n!==k&&9===n.nodeType&&n.documentElement&&(r=(k=n).documentElement,$=!s(k),b!==k&&(i=k.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",nt,!1):i.attachEvent&&i.attachEvent("onunload",nt)),g.attributes=lt(function(t){return t.className="i",!t.getAttribute("className")}),g.getElementsByTagName=lt(function(t){return t.appendChild(k.createComment("")),!t.getElementsByTagName("*").length}),g.getElementsByClassName=K.test(k.getElementsByClassName),g.getById=lt(function(t){return r.appendChild(t).id=E,!k.getElementsByName||!k.getElementsByName(E).length}),g.getById?(C.filter.ID=function(t){var e=t.replace(Z,tt);return function(t){return t.getAttribute("id")===e}},C.find.ID=function(t,e){if(void 0!==e.getElementById&&$){var i=e.getElementById(t);return i?[i]:[]}}):(C.filter.ID=function(t){var i=t.replace(Z,tt);return function(t){var e=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===i}},C.find.ID=function(t,e){if(void 0!==e.getElementById&&$){var i,n,s,o=e.getElementById(t);if(o){if((i=o.getAttributeNode("id"))&&i.value===t)return[o];for(s=e.getElementsByName(t),n=0;o=s[n++];)if((i=o.getAttributeNode("id"))&&i.value===t)return[o]}return[]}}),C.find.TAG=g.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):g.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],s=0,o=e.getElementsByTagName(t);if("*"!==t)return o;for(;i=o[s++];)1===i.nodeType&&n.push(i);return n},C.find.CLASS=g.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&$)return e.getElementsByClassName(t)},a=[],m=[],(g.qsa=K.test(k.querySelectorAll))&&(lt(function(t){r.appendChild(t).innerHTML="<a id='"+E+"'></a><select id='"+E+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+H+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+H+"*(?:value|"+D+")"),t.querySelectorAll("[id~="+E+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+E+"+*").length||m.push(".#.+[+~]")}),lt(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=k.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+H+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),r.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(g.matchesSelector=K.test(u=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector||r.msMatchesSelector))&&lt(function(t){g.disconnectedMatch=u.call(t,"*"),u.call(t,"[s!='']:x"),a.push("!=",R)}),m=m.length&&new RegExp(m.join("|")),a=a.length&&new RegExp(a.join("|")),e=K.test(r.compareDocumentPosition),v=e||K.test(r.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},I=e?function(t,e){if(t===e)return c=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!g.sortDetached&&e.compareDocumentPosition(t)===i?t===k||t.ownerDocument===b&&v(b,t)?-1:e===k||e.ownerDocument===b&&v(b,e)?1:l?O(l,t)-O(l,e):0:4&i?-1:1)}:function(t,e){if(t===e)return c=!0,0;var i,n=0,s=t.parentNode,o=e.parentNode,r=[t],a=[e];if(!s||!o)return t===k?-1:e===k?1:s?-1:o?1:l?O(l,t)-O(l,e):0;if(s===o)return ut(t,e);for(i=t;i=i.parentNode;)r.unshift(i);for(i=e;i=i.parentNode;)a.unshift(i);for(;r[n]===a[n];)n++;return n?ut(r[n],a[n]):r[n]===b?-1:a[n]===b?1:0}),k},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==k&&x(t),e=e.replace(U,"='$1']"),g.matchesSelector&&$&&!T[e+" "]&&(!a||!a.test(e))&&(!m||!m.test(e)))try{var i=u.call(t,e);if(i||g.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return 0<ot(e,k,null,[t]).length},ot.contains=function(t,e){return(t.ownerDocument||t)!==k&&x(t),v(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==k&&x(t);var i=C.attrHandle[e.toLowerCase()],n=i&&_.call(C.attrHandle,e.toLowerCase())?i(t,e,!$):void 0;return void 0!==n?n:g.attributes||!$?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},ot.escape=function(t){return(t+"").replace(et,it)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,i=[],n=0,s=0;if(c=!g.detectDuplicates,l=!g.sortStable&&t.slice(0),t.sort(I),c){for(;e=t[s++];)e===t[s]&&(n=i.push(s));for(;n--;)t.splice(i[n],1)}return l=null,t},o=ot.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=o(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)i+=o(e);return i},(C=ot.selectors={cacheLength:50,createPseudo:at,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Z,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(Z,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return Q.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&W.test(i)&&(e=p(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Z,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=d[t+" "];return e||(e=new RegExp("(^|"+H+")"+t+"("+H+"|$)"))&&d(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(i,n,s){return function(t){var e=ot.attr(t,i);return null==e?"!="===n:!n||(e+="","="===n?e===s:"!="===n?e!==s:"^="===n?s&&0===e.indexOf(s):"*="===n?s&&-1<e.indexOf(s):"$="===n?s&&e.slice(-s.length)===s:"~="===n?-1<(" "+e.replace(z," ")+" ").indexOf(s):"|="===n&&(e===s||e.slice(0,s.length+1)===s+"-"))}},CHILD:function(p,t,e,f,m){var v="nth"!==p.slice(0,3),b="last"!==p.slice(-4),y="of-type"===t;return 1===f&&0===m?function(t){return!!t.parentNode}:function(t,e,i){var n,s,o,r,a,l,c=v!=b?"nextSibling":"previousSibling",u=t.parentNode,h=y&&t.nodeName.toLowerCase(),d=!i&&!y,g=!1;if(u){if(v){for(;c;){for(r=t;r=r[c];)if(y?r.nodeName.toLowerCase()===h:1===r.nodeType)return!1;l=c="only"===p&&!l&&"nextSibling"}return!0}if(l=[b?u.firstChild:u.lastChild],b&&d){for(g=(a=(n=(s=(o=(r=u)[E]||(r[E]={}))[r.uniqueID]||(o[r.uniqueID]={}))[p]||[])[0]===S&&n[1])&&n[2],r=a&&u.childNodes[a];r=++a&&r&&r[c]||(g=a=0)||l.pop();)if(1===r.nodeType&&++g&&r===t){s[p]=[S,a,g];break}}else if(d&&(g=a=(n=(s=(o=(r=t)[E]||(r[E]={}))[r.uniqueID]||(o[r.uniqueID]={}))[p]||[])[0]===S&&n[1]),!1===g)for(;(r=++a&&r&&r[c]||(g=a=0)||l.pop())&&((y?r.nodeName.toLowerCase()!==h:1!==r.nodeType)||!++g||(d&&((s=(o=r[E]||(r[E]={}))[r.uniqueID]||(o[r.uniqueID]={}))[p]=[S,g]),r!==t)););return(g-=m)===f||g%f==0&&0<=g/f}}},PSEUDO:function(t,o){var e,r=C.pseudos[t]||C.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return r[E]?r(o):1<r.length?(e=[t,t,"",o],C.setFilters.hasOwnProperty(t.toLowerCase())?at(function(t,e){for(var i,n=r(t,o),s=n.length;s--;)t[i=O(t,n[s])]=!(e[i]=n[s])}):function(t){return r(t,0,e)}):r}},pseudos:{not:at(function(t){var n=[],s=[],a=h(t.replace(M,"$1"));return a[E]?at(function(t,e,i,n){for(var s,o=a(t,null,n,[]),r=t.length;r--;)(s=o[r])&&(t[r]=!(e[r]=s))}):function(t,e,i){return n[0]=t,a(n,null,i,s),n[0]=null,!s.pop()}}),has:at(function(e){return function(t){return 0<ot(e,t).length}}),contains:at(function(e){return e=e.replace(Z,tt),function(t){return-1<(t.textContent||t.innerText||o(t)).indexOf(e)}}),lang:at(function(i){return V.test(i||"")||ot.error("unsupported lang: "+i),i=i.replace(Z,tt).toLowerCase(),function(t){var e;do{if(e=$?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===i||0===e.indexOf(i+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=i.location&&i.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===r},focus:function(t){return t===k.activeElement&&(!k.hasFocus||k.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return G.test(t.nodeName)},input:function(t){return J.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:pt(function(){return[0]}),last:pt(function(t,e){return[e-1]}),eq:pt(function(t,e,i){return[i<0?i+e:i]}),even:pt(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:pt(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:pt(function(t,e,i){for(var n=i<0?i+e:i;0<=--n;)t.push(n);return t}),gt:pt(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=C.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[t]=ht(t);for(t in{submit:!0,reset:!0})C.pseudos[t]=dt(t);function mt(){}function vt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function bt(a,t,e){var l=t.dir,c=t.next,u=c||l,h=e&&"parentNode"===u,d=n++;return t.first?function(t,e,i){for(;t=t[l];)if(1===t.nodeType||h)return a(t,e,i);return!1}:function(t,e,i){var n,s,o,r=[S,d];if(i){for(;t=t[l];)if((1===t.nodeType||h)&&a(t,e,i))return!0}else for(;t=t[l];)if(1===t.nodeType||h)if(s=(o=t[E]||(t[E]={}))[t.uniqueID]||(o[t.uniqueID]={}),c&&c===t.nodeName.toLowerCase())t=t[l]||t;else{if((n=s[u])&&n[0]===S&&n[1]===d)return r[2]=n[2];if((s[u]=r)[2]=a(t,e,i))return!0}return!1}}function yt(s){return 1<s.length?function(t,e,i){for(var n=s.length;n--;)if(!s[n](t,e,i))return!1;return!0}:s[0]}function Ct(t,e,i){for(var n=0,s=e.length;n<s;n++)ot(t,e[n],i);return i}function wt(t,e,i,n,s){for(var o,r=[],a=0,l=t.length,c=null!=e;a<l;a++)(o=t[a])&&(i&&!i(o,n,s)||(r.push(o),c&&e.push(a)));return r}function xt(g,p,f,m,v,t){return m&&!m[E]&&(m=xt(m)),v&&!v[E]&&(v=xt(v,t)),at(function(t,e,i,n){var s,o,r,a=[],l=[],c=e.length,u=t||Ct(p||"*",i.nodeType?[i]:i,[]),h=!g||!t&&p?u:wt(u,a,g,i,n),d=f?v||(t?g:c||m)?[]:e:h;if(f&&f(h,d,i,n),m)for(s=wt(d,l),m(s,[],i,n),o=s.length;o--;)(r=s[o])&&(d[l[o]]=!(h[l[o]]=r));if(t){if(v||g){if(v){for(s=[],o=d.length;o--;)(r=d[o])&&s.push(h[o]=r);v(null,d=[],s,n)}for(o=d.length;o--;)(r=d[o])&&-1<(s=v?O(t,r):a[o])&&(t[s]=!(e[s]=r))}}else d=wt(d===e?d.splice(c,d.length):d),v?v(null,e,d,n):L.apply(e,d)})}function kt(t){for(var s,e,i,n=t.length,o=C.relative[t[0].type],r=o||C.relative[" "],a=o?1:0,l=bt(function(t){return t===s},r,!0),c=bt(function(t){return-1<O(s,t)},r,!0),u=[function(t,e,i){var n=!o&&(i||e!==w)||((s=e).nodeType?l(t,e,i):c(t,e,i));return s=null,n}];a<n;a++)if(e=C.relative[t[a].type])u=[bt(yt(u),e)];else{if((e=C.filter[t[a].type].apply(null,t[a].matches))[E]){for(i=++a;i<n&&!C.relative[t[i].type];i++);return xt(1<a&&yt(u),1<a&&vt(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(M,"$1"),e,a<i&&kt(t.slice(a,i)),i<n&&kt(t=t.slice(i)),i<n&&vt(t))}u.push(e)}return yt(u)}function $t(m,v){var b=0<v.length,y=0<m.length,t=function(t,e,i,n,s){var o,r,a,l=0,c="0",u=t&&[],h=[],d=w,g=t||y&&C.find.TAG("*",s),p=S+=null==d?1:Math.random()||.1,f=g.length;for(s&&(w=e===k||e||s);c!==f&&null!=(o=g[c]);c++){if(y&&o){for(r=0,e||o.ownerDocument===k||(x(o),i=!$);a=m[r++];)if(a(o,e||k,i)){n.push(o);break}s&&(S=p)}b&&((o=!a&&o)&&l--,t&&u.push(o))}if(l+=c,b&&c!==l){for(r=0;a=v[r++];)a(u,h,e,i);if(t){if(0<l)for(;c--;)u[c]||h[c]||(h[c]=N.call(n));h=wt(h)}L.apply(n,h),s&&!t&&0<h.length&&1<l+v.length&&ot.uniqueSort(n)}return s&&(S=p,w=d),u};return b?at(t):t}return mt.prototype=C.filters=C.pseudos,C.setFilters=new mt,p=ot.tokenize=function(t,e){var i,n,s,o,r,a,l,c=y[t+" "];if(c)return e?0:c.slice(0);for(r=t,a=[],l=C.preFilter;r;){for(o in i&&!(n=F.exec(r))||(n&&(r=r.slice(n[0].length)||r),a.push(s=[])),i=!1,(n=q.exec(r))&&(i=n.shift(),s.push({value:i,type:n[0].replace(M," ")}),r=r.slice(i.length)),C.filter)!(n=Q[o].exec(r))||l[o]&&!(n=l[o](n))||(i=n.shift(),s.push({value:i,type:o,matches:n}),r=r.slice(i.length));if(!i)break}return e?r.length:r?ot.error(t):y(t,a).slice(0)},h=ot.compile=function(t,e){var i,n=[],s=[],o=T[t+" "];if(!o){for(e||(e=p(t)),i=e.length;i--;)(o=kt(e[i]))[E]?n.push(o):s.push(o);(o=T(t,$t(s,n))).selector=t}return o},f=ot.select=function(t,e,i,n){var s,o,r,a,l,c="function"==typeof t&&t,u=!n&&p(t=c.selector||t);if(i=i||[],1===u.length){if(2<(o=u[0]=u[0].slice(0)).length&&"ID"===(r=o[0]).type&&9===e.nodeType&&$&&C.relative[o[1].type]){if(!(e=(C.find.ID(r.matches[0].replace(Z,tt),e)||[])[0]))return i;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(s=Q.needsContext.test(t)?0:o.length;s--&&(r=o[s],!C.relative[a=r.type]);)if((l=C.find[a])&&(n=l(r.matches[0].replace(Z,tt),Y.test(o[0].type)&&ft(e.parentNode)||e))){if(o.splice(s,1),!(t=n.length&&vt(o)))return L.apply(i,n),i;break}}return(c||h(t,u))(n,e,!$,i,!e||Y.test(t)&&ft(e.parentNode)||e),i},g.sortStable=E.split("").sort(I).join("")===E,g.detectDuplicates=!!c,x(),g.sortDetached=lt(function(t){return 1&t.compareDocumentPosition(k.createElement("fieldset"))}),lt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ct("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),g.attributes&&lt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ct("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),lt(function(t){return null==t.getAttribute("disabled")})||ct(D,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),ot}(k);E.find=C,E.expr=C.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=C.uniqueSort,E.text=C.getText,E.isXMLDoc=C.isXML,E.contains=C.contains,E.escapeSelector=C.escape;var w=function(t,e,i){for(var n=[],s=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&E(t).is(i))break;n.push(t)}return n},x=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},S=E.expr.match.needsContext;function T(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var I=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,_=/^.[^:#\[\.,]*$/;function N(t,i,n){return E.isFunction(i)?E.grep(t,function(t,e){return!!i.call(t,e,t)!==n}):i.nodeType?E.grep(t,function(t){return t===i!==n}):"string"!=typeof i?E.grep(t,function(t){return-1<s.call(i,t)!==n}):_.test(i)?E.filter(i,t,n):(i=E.filter(i,t),E.grep(t,function(t){return-1<s.call(i,t)!==n&&1===t.nodeType}))}E.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?E.find.matchesSelector(n,t)?[n]:[]:E.find.matches(t,E.grep(e,function(t){return 1===t.nodeType}))},E.fn.extend({find:function(t){var e,i,n=this.length,s=this;if("string"!=typeof t)return this.pushStack(E(t).filter(function(){for(e=0;e<n;e++)if(E.contains(s[e],this))return!0}));for(i=this.pushStack([]),e=0;e<n;e++)E.find(t,s[e],i);return 1<n?E.uniqueSort(i):i},filter:function(t){return this.pushStack(N(this,t||[],!1))},not:function(t){return this.pushStack(N(this,t||[],!0))},is:function(t){return!!N(this,"string"==typeof t&&S.test(t)?E(t):t||[],!1).length}});var j,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,A;(E.fn.init=function(t,e,i){var n,s;if(!t)return this;if(i=i||j,"string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this):E.isFunction(t)?void 0!==i.ready?i.ready(t):t(E):E.makeArray(t,this);if(!(n="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:L.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof E?e[0]:e,E.merge(this,E.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:$,!0)),I.test(n[1])&&E.isPlainObject(e))for(n in e)E.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(s=$.getElementById(n[2]))&&(this[0]=s,this.length=1),this}).prototype=E.fn,j=E($);var O=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function H(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}E.fn.extend({has:function(t){var e=E(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(E.contains(this,e[t]))return!0})},closest:function(t,e){var i,n=0,s=this.length,o=[],r="string"!=typeof t&&E(t);if(!S.test(t))for(;n<s;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(r?-1<r.index(i):1===i.nodeType&&E.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(1<o.length?E.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?s.call(E(t),this[0]):s.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),E.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return w(t,"parentNode")},parentsUntil:function(t,e,i){return w(t,"parentNode",i)},next:function(t){return H(t,"nextSibling")},prev:function(t){return H(t,"previousSibling")},nextAll:function(t){return w(t,"nextSibling")},prevAll:function(t){return w(t,"previousSibling")},nextUntil:function(t,e,i){return w(t,"nextSibling",i)},prevUntil:function(t,e,i){return w(t,"previousSibling",i)},siblings:function(t){return x((t.parentNode||{}).firstChild,t)},children:function(t){return x(t.firstChild)},contents:function(t){return T(t,"iframe")?t.contentDocument:(T(t,"template")&&(t=t.content||t),E.merge([],t.childNodes))}},function(n,s){E.fn[n]=function(t,e){var i=E.map(this,s,t);return"Until"!==n.slice(-5)&&(e=t),e&&"string"==typeof e&&(i=E.filter(e,i)),1<this.length&&(D[n]||E.uniqueSort(i),O.test(n)&&i.reverse()),this.pushStack(i)}});var B=/[^\x20\t\r\n\f]+/g;function P(t){var i={};return E.each(t.match(B)||[],function(t,e){i[e]=!0}),i}function R(t){return t}function z(t){throw t}function M(t,e,i,n){var s;try{t&&E.isFunction(s=t.promise)?s.call(t).done(e).fail(i):t&&E.isFunction(s=t.then)?s.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}E.Callbacks=function(n){n="string"==typeof n?P(n):E.extend({},n);var i,t,e,s,o=[],r=[],a=-1,l=function(){for(s=s||n.once,e=i=!0;r.length;a=-1)for(t=r.shift();++a<o.length;)!1===o[a].apply(t[0],t[1])&&n.stopOnFalse&&(a=o.length,t=!1);n.memory||(t=!1),i=!1,s&&(o=t?[]:"")},c={add:function(){return o&&(t&&!i&&(a=o.length-1,r.push(t)),function i(t){E.each(t,function(t,e){E.isFunction(e)?n.unique&&c.has(e)||o.push(e):e&&e.length&&"string"!==E.type(e)&&i(e)})}(arguments),t&&!i&&l()),this},remove:function(){return E.each(arguments,function(t,e){for(var i;-1<(i=E.inArray(e,o,i));)o.splice(i,1),i<=a&&a--}),this},has:function(t){return t?-1<E.inArray(t,o):0<o.length},empty:function(){return o&&(o=[]),this},disable:function(){return s=r=[],o=t="",this},disabled:function(){return!o},lock:function(){return s=r=[],t||i||(o=t=""),this},locked:function(){return!!s},fireWith:function(t,e){return s||(e=[t,(e=e||[]).slice?e.slice():e],r.push(e),i||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!e}};return c},E.extend({Deferred:function(t){var o=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],s="pending",r={state:function(){return s},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var s=arguments;return E.Deferred(function(n){E.each(o,function(t,e){var i=E.isFunction(s[e[4]])&&s[e[4]];a[e[1]](function(){var t=i&&i.apply(this,arguments);t&&E.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[e[0]+"With"](this,i?[t]:arguments)})}),s=null}).promise()},then:function(e,i,n){var l=0;function c(s,o,r,a){return function(){var i=this,n=arguments,t=function(){var t,e;if(!(s<l)){if((t=r.apply(i,n))===o.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,E.isFunction(e)?a?e.call(t,c(l,o,R,a),c(l,o,z,a)):(l++,e.call(t,c(l,o,R,a),c(l,o,z,a),c(l,o,R,o.notifyWith))):(r!==R&&(i=void 0,n=[t]),(a||o.resolveWith)(i,n))}},e=a?t:function(){try{t()}catch(t){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(t,e.stackTrace),l<=s+1&&(r!==z&&(i=void 0,n=[t]),o.rejectWith(i,n))}};s?e():(E.Deferred.getStackHook&&(e.stackTrace=E.Deferred.getStackHook()),k.setTimeout(e))}}return E.Deferred(function(t){o[0][3].add(c(0,t,E.isFunction(n)?n:R,t.notifyWith)),o[1][3].add(c(0,t,E.isFunction(e)?e:R)),o[2][3].add(c(0,t,E.isFunction(i)?i:z))}).promise()},promise:function(t){return null!=t?E.extend(t,r):r}},a={};return E.each(o,function(t,e){var i=e[2],n=e[5];r[e[1]]=i.add,n&&i.add(function(){s=n},o[3-t][2].disable,o[0][2].lock),i.add(e[3].fire),a[e[0]]=function(){return a[e[0]+"With"](this===a?void 0:this,arguments),this},a[e[0]+"With"]=i.fireWith}),r.promise(a),t&&t.call(a,a),a},when:function(t){var i=arguments.length,e=i,n=Array(e),s=a.call(arguments),o=E.Deferred(),r=function(e){return function(t){n[e]=this,s[e]=1<arguments.length?a.call(arguments):t,--i||o.resolveWith(n,s)}};if(i<=1&&(M(t,o.done(r(e)).resolve,o.reject,!i),"pending"===o.state()||E.isFunction(s[e]&&s[e].then)))return o.then();for(;e--;)M(s[e],r(e),o.reject);return o.promise()}});var F=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(t,e){k.console&&k.console.warn&&t&&F.test(t.name)&&k.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},E.readyException=function(t){k.setTimeout(function(){throw t})};var q=E.Deferred();function U(){$.removeEventListener("DOMContentLoaded",U),k.removeEventListener("load",U),E.ready()}E.fn.ready=function(t){return q.then(t).catch(function(t){E.readyException(t)}),this},E.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--E.readyWait:E.isReady)||(E.isReady=!0)!==t&&0<--E.readyWait||q.resolveWith($,[E])}}),E.ready.then=q.then,"complete"===$.readyState||"loading"!==$.readyState&&!$.documentElement.doScroll?k.setTimeout(E.ready):($.addEventListener("DOMContentLoaded",U),k.addEventListener("load",U));var W=function(t,e,i,n,s,o,r){var a=0,l=t.length,c=null==i;if("object"===E.type(i))for(a in s=!0,i)W(t,e,a,i[a],!0,o,r);else if(void 0!==n&&(s=!0,E.isFunction(n)||(r=!0),c&&(e=r?(e.call(t,n),null):(c=e,function(t,e,i){return c.call(E(t),i)})),e))for(;a<l;a++)e(t[a],i,r?n:n.call(t[a],a,e(t[a],i)));return s?t:c?e.call(t):l?e(t[0],i):o},V=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Q(){this.expando=E.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(t){var e=t[this.expando];return e||(e={},V(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,s=this.cache(t);if("string"==typeof e)s[E.camelCase(e)]=i;else for(n in e)s[E.camelCase(n)]=e[n];return s},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][E.camelCase(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map(E.camelCase):(e=E.camelCase(e))in n?[e]:e.match(B)||[]).length;for(;i--;)delete n[e[i]]}void 0!==e&&!E.isEmptyObject(n)||(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!E.isEmptyObject(e)}};var J=new Q,G=new Q,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,X=/[A-Z]/g;function Y(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:K.test(t)?JSON.parse(t):t)}function Z(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(X,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i=Y(i)}catch(t){}G.set(t,e,i)}else i=void 0;return i}E.extend({hasData:function(t){return G.hasData(t)||J.hasData(t)},data:function(t,e,i){return G.access(t,e,i)},removeData:function(t,e){G.remove(t,e)},_data:function(t,e,i){return J.access(t,e,i)},_removeData:function(t,e){J.remove(t,e)}}),E.fn.extend({data:function(i,t){var e,n,s,o=this[0],r=o&&o.attributes;if(void 0!==i)return"object"==typeof i?this.each(function(){G.set(this,i)}):W(this,function(t){var e;if(o&&void 0===t)return void 0!==(e=G.get(o,i))?e:void 0!==(e=Z(o,i))?e:void 0;this.each(function(){G.set(this,i,t)})},null,t,1<arguments.length,null,!0);if(this.length&&(s=G.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){for(e=r.length;e--;)r[e]&&0===(n=r[e].name).indexOf("data-")&&(n=E.camelCase(n.slice(5)),Z(o,n,s[n]));J.set(o,"hasDataAttrs",!0)}return s},removeData:function(t){return this.each(function(){G.remove(this,t)})}}),E.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=J.get(t,e),i&&(!n||Array.isArray(i)?n=J.access(t,e,E.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=E.queue(t,e),n=i.length,s=i.shift(),o=E._queueHooks(t,e),r=function(){E.dequeue(t,e)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete o.stop,s.call(t,r,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return J.get(t,i)||J.access(t,i,{empty:E.Callbacks("once memory").add(function(){J.remove(t,[e+"queue",i])})})}}),E.fn.extend({queue:function(e,i){var t=2;return"string"!=typeof e&&(i=e,e="fx",t--),arguments.length<t?E.queue(this[0],e):void 0===i?this:this.each(function(){var t=E.queue(this,e,i);E._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&E.dequeue(this,e)})},dequeue:function(t){return this.each(function(){E.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,s=E.Deferred(),o=this,r=this.length,a=function(){--n||s.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)(i=J.get(o[r],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),s.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),it=["Top","Right","Bottom","Left"],nt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&E.contains(t.ownerDocument,t)&&"none"===E.css(t,"display")},st=function(t,e,i,n){var s,o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];for(o in s=i.apply(t,n||[]),e)t.style[o]=r[o];return s};function ot(t,e,i,n){var s,o=1,r=20,a=n?function(){return n.cur()}:function(){return E.css(t,e,"")},l=a(),c=i&&i[3]||(E.cssNumber[e]?"":"px"),u=(E.cssNumber[e]||"px"!==c&&+l)&&et.exec(E.css(t,e));if(u&&u[3]!==c)for(c=c||u[3],i=i||[],u=+l||1;u/=o=o||".5",E.style(t,e,u+c),o!==(o=a()/l)&&1!==o&&--r;);return i&&(u=+u||+l||0,s=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=u,n.end=s)),s}var rt={};function at(t){var e,i=t.ownerDocument,n=t.nodeName,s=rt[n];return s||(e=i.body.appendChild(i.createElement(n)),s=E.css(e,"display"),e.parentNode.removeChild(e),"none"===s&&(s="block"),rt[n]=s)}function lt(t,e){for(var i,n,s=[],o=0,r=t.length;o<r;o++)(n=t[o]).style&&(i=n.style.display,e?("none"===i&&(s[o]=J.get(n,"display")||null,s[o]||(n.style.display="")),""===n.style.display&&nt(n)&&(s[o]=at(n))):"none"!==i&&(s[o]="none",J.set(n,"display",i)));for(o=0;o<r;o++)null!=s[o]&&(t[o].style.display=s[o]);return t}E.fn.extend({show:function(){return lt(this,!0)},hide:function(){return lt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){nt(this)?E(this).show():E(this).hide()})}});var ct=/^(?:checkbox|radio)$/i,ut=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ht=/^$|\/(?:java|ecma)script/i,dt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function gt(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&T(t,e)?E.merge([t],i):i}function pt(t,e){for(var i=0,n=t.length;i<n;i++)J.set(t[i],"globalEval",!e||J.get(e[i],"globalEval"))}dt.optgroup=dt.option,dt.tbody=dt.tfoot=dt.colgroup=dt.caption=dt.thead,dt.th=dt.td;var ft=/<|&#?\w+;/,mt,vt,bt;function yt(t,e,i,n,s){for(var o,r,a,l,c,u,h=e.createDocumentFragment(),d=[],g=0,p=t.length;g<p;g++)if((o=t[g])||0===o)if("object"===E.type(o))E.merge(d,o.nodeType?[o]:o);else if(ft.test(o)){for(r=r||h.appendChild(e.createElement("div")),a=(ut.exec(o)||["",""])[1].toLowerCase(),l=dt[a]||dt._default,r.innerHTML=l[1]+E.htmlPrefilter(o)+l[2],u=l[0];u--;)r=r.lastChild;E.merge(d,r.childNodes),(r=h.firstChild).textContent=""}else d.push(e.createTextNode(o));for(h.textContent="",g=0;o=d[g++];)if(n&&-1<E.inArray(o,n))s&&s.push(o);else if(c=E.contains(o.ownerDocument,o),r=gt(h.appendChild(o),"script"),c&&pt(r),i)for(u=0;o=r[u++];)ht.test(o.type||"")&&i.push(o);return h}vt=$.createDocumentFragment().appendChild($.createElement("div")),(bt=$.createElement("input")).setAttribute("type","radio"),bt.setAttribute("checked","checked"),bt.setAttribute("name","t"),vt.appendChild(bt),m.checkClone=vt.cloneNode(!0).cloneNode(!0).lastChild.checked,vt.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!vt.cloneNode(!0).lastChild.defaultValue;var Ct=$.documentElement,wt=/^key/,xt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,kt=/^([^.]*)(?:\.(.+)|)/;function $t(){return!0}function Et(){return!1}function St(){try{return $.activeElement}catch(t){}}function Tt(t,e,i,n,s,o){var r,a;if("object"==typeof e){for(a in"string"!=typeof i&&(n=n||i,i=void 0),e)Tt(t,a,i,n,e[a],o);return t}if(null==n&&null==s?(s=i,n=i=void 0):null==s&&("string"==typeof i?(s=n,n=void 0):(s=n,n=i,i=void 0)),!1===s)s=Et;else if(!s)return t;return 1===o&&(r=s,(s=function(t){return E().off(t),r.apply(this,arguments)}).guid=r.guid||(r.guid=E.guid++)),t.each(function(){E.event.add(this,e,s,n,i)})}E.event={global:{},add:function(e,t,i,n,s){var o,r,a,l,c,u,h,d,g,p,f,m=J.get(e);if(m)for(i.handler&&(i=(o=i).handler,s=o.selector),s&&E.find.matchesSelector(Ct,s),i.guid||(i.guid=E.guid++),(l=m.events)||(l=m.events={}),(r=m.handle)||(r=m.handle=function(t){return void 0!==E&&E.event.triggered!==t.type?E.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(B)||[""]).length;c--;)g=f=(a=kt.exec(t[c])||[])[1],p=(a[2]||"").split(".").sort(),g&&(h=E.event.special[g]||{},g=(s?h.delegateType:h.bindType)||g,h=E.event.special[g]||{},u=E.extend({type:g,origType:f,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&E.expr.match.needsContext.test(s),namespace:p.join(".")},o),(d=l[g])||((d=l[g]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,n,p,r)||e.addEventListener&&e.addEventListener(g,r)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),s?d.splice(d.delegateCount++,0,u):d.push(u),E.event.global[g]=!0)},remove:function(t,e,i,n,s){var o,r,a,l,c,u,h,d,g,p,f,m=J.hasData(t)&&J.get(t);if(m&&(l=m.events)){for(c=(e=(e||"").match(B)||[""]).length;c--;)if(g=f=(a=kt.exec(e[c])||[])[1],p=(a[2]||"").split(".").sort(),g){for(h=E.event.special[g]||{},d=l[g=(n?h.delegateType:h.bindType)||g]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=d.length;o--;)u=d[o],!s&&f!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));r&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,m.handle)||E.removeEvent(t,g,m.handle),delete l[g])}else for(g in l)E.event.remove(t,g+e[c],i,n,!0);E.isEmptyObject(l)&&J.remove(t,"handle events")}},dispatch:function(t){var e=E.event.fix(t),i,n,s,o,r,a,l=new Array(arguments.length),c=(J.get(this,"events")||{})[e.type]||[],u=E.event.special[e.type]||{};for(l[0]=e,i=1;i<arguments.length;i++)l[i]=arguments[i];if(e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(a=E.event.handlers.call(this,e,c),i=0;(o=a[i++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(r.namespace)||(e.handleObj=r,e.data=r.data,void 0!==(s=((E.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,l))&&!1===(e.result=s)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(t,e){var i,n,s,o,r,a=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&1<=t.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],r={},i=0;i<l;i++)void 0===r[s=(n=e[i]).selector+" "]&&(r[s]=n.needsContext?-1<E(s,this).index(c):E.find(s,this,null,[c]).length),r[s]&&o.push(n);o.length&&a.push({elem:c,handlers:o})}return c=this,l<e.length&&a.push({elem:c,handlers:e.slice(l)}),a},addProp:function(e,t){Object.defineProperty(E.Event.prototype,e,{enumerable:!0,configurable:!0,get:E.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[E.expando]?t:new E.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==St()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===St()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&T(this,"input"))return this.click(),!1},_default:function(t){return T(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},E.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},E.Event=function(t,e){if(!(this instanceof E.Event))return new E.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?$t:Et,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&E.extend(this,e),this.timeStamp=t&&t.timeStamp||E.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Et,isPropagationStopped:Et,isImmediatePropagationStopped:Et,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=$t,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=$t,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=$t,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&wt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&xt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},E.event.addProp),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,o){E.event.special[t]={delegateType:o,bindType:o,handle:function(t){var e,i=this,n=t.relatedTarget,s=t.handleObj;return n&&(n===i||E.contains(i,n))||(t.type=s.origType,e=s.handler.apply(this,arguments),t.type=o),e}}}),E.fn.extend({on:function(t,e,i,n){return Tt(this,t,e,i,n)},one:function(t,e,i,n){return Tt(this,t,e,i,n,1)},off:function(t,e,i){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,E(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=Et),this.each(function(){E.event.remove(this,t,i,e)});for(s in t)this.off(s,e,t[s]);return this}});var It=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,_t=/<script|<style|<link/i,Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,jt=/^true\/(.*)/,Lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function At(t,e){return T(t,"table")&&T(11!==e.nodeType?e:e.firstChild,"tr")&&E(">tbody",t)[0]||t}function Ot(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Dt(t){var e=jt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function Ht(t,e){var i,n,s,o,r,a,l,c;if(1===e.nodeType){if(J.hasData(t)&&(o=J.access(t),r=J.set(e,o),c=o.events))for(s in delete r.handle,r.events={},c)for(i=0,n=c[s].length;i<n;i++)E.event.add(e,s,c[s][i]);G.hasData(t)&&(a=G.access(t),l=E.extend({},a),G.set(e,l))}}function Bt(t,e){var i=e.nodeName.toLowerCase();"input"===i&&ct.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function Pt(i,n,s,o){n=f.apply([],n);var t,e,r,a,l,c,u=0,h=i.length,d=h-1,g=n[0],p=E.isFunction(g);if(p||1<h&&"string"==typeof g&&!m.checkClone&&Nt.test(g))return i.each(function(t){var e=i.eq(t);p&&(n[0]=g.call(this,t,e.html())),Pt(e,n,s,o)});if(h&&(e=(t=yt(n,i[0].ownerDocument,!1,i,o)).firstChild,1===t.childNodes.length&&(t=e),e||o)){for(a=(r=E.map(gt(t,"script"),Ot)).length;u<h;u++)l=t,u!==d&&(l=E.clone(l,!0,!0),a&&E.merge(r,gt(l,"script"))),s.call(i[u],l,u);if(a)for(c=r[r.length-1].ownerDocument,E.map(r,Dt),u=0;u<a;u++)l=r[u],ht.test(l.type||"")&&!J.access(l,"globalEval")&&E.contains(c,l)&&(l.src?E._evalUrl&&E._evalUrl(l.src):v(l.textContent.replace(Lt,""),c))}return i}function Rt(t,e,i){for(var n,s=e?E.filter(e,t):t,o=0;null!=(n=s[o]);o++)i||1!==n.nodeType||E.cleanData(gt(n)),n.parentNode&&(i&&E.contains(n.ownerDocument,n)&&pt(gt(n,"script")),n.parentNode.removeChild(n));return t}E.extend({htmlPrefilter:function(t){return t.replace(It,"<$1></$2>")},clone:function(t,e,i){var n,s,o,r,a=t.cloneNode(!0),l=E.contains(t.ownerDocument,t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||E.isXMLDoc(t)))for(r=gt(a),n=0,s=(o=gt(t)).length;n<s;n++)Bt(o[n],r[n]);if(e)if(i)for(o=o||gt(t),r=r||gt(a),n=0,s=o.length;n<s;n++)Ht(o[n],r[n]);else Ht(t,a);return 0<(r=gt(a,"script")).length&&pt(r,!l&&gt(t,"script")),a},cleanData:function(t){for(var e,i,n,s=E.event.special,o=0;void 0!==(i=t[o]);o++)if(V(i)){if(e=i[J.expando]){if(e.events)for(n in e.events)s[n]?E.event.remove(i,n):E.removeEvent(i,n,e.handle);i[J.expando]=void 0}i[G.expando]&&(i[G.expando]=void 0)}}}),E.fn.extend({detach:function(t){return Rt(this,t,!0)},remove:function(t){return Rt(this,t)},text:function(t){return W(this,function(t){return void 0===t?E.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Pt(this,arguments,function(t){var e;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||At(this,t).appendChild(t)})},prepend:function(){return Pt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=At(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Pt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Pt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(E.cleanData(gt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return E.clone(this,t,e)})},html:function(t){return W(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!_t.test(t)&&!dt[(ut.exec(t)||["",""])[1].toLowerCase()]){t=E.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(E.cleanData(gt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var i=[];return Pt(this,arguments,function(t){var e=this.parentNode;E.inArray(this,i)<0&&(E.cleanData(gt(this)),e&&e.replaceChild(t,this))},i)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,r){E.fn[t]=function(t){for(var e,i=[],n=E(t),s=n.length-1,o=0;o<=s;o++)e=o===s?this:this.clone(!0),E(n[o])[r](e),l.apply(i,e.get());return this.pushStack(i)}});var zt=/^margin/,Mt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),Ft=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=k),e.getComputedStyle(t)},qt,Ut,Wt,Vt,Qt,Jt;function Gt(){if(Jt){Jt.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",Jt.innerHTML="",Ct.appendChild(Qt);var t=k.getComputedStyle(Jt);qt="1%"!==t.top,Vt="2px"===t.marginLeft,Ut="4px"===t.width,Jt.style.marginRight="50%",Wt="4px"===t.marginRight,Ct.removeChild(Qt),Jt=null}}function Kt(t,e,i){var n,s,o,r,a=t.style;return(i=i||Ft(t))&&(""!==(r=i.getPropertyValue(e)||i[e])||E.contains(t.ownerDocument,t)||(r=E.style(t,e)),!m.pixelMarginRight()&&Mt.test(r)&&zt.test(e)&&(n=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=i.width,a.width=n,a.minWidth=s,a.maxWidth=o)),void 0!==r?r+"":r}function Xt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}Qt=$.createElement("div"),(Jt=$.createElement("div")).style&&(Jt.style.backgroundClip="content-box",Jt.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===Jt.style.backgroundClip,Qt.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",Qt.appendChild(Jt),E.extend(m,{pixelPosition:function(){return Gt(),qt},boxSizingReliable:function(){return Gt(),Ut},pixelMarginRight:function(){return Gt(),Wt},reliableMarginLeft:function(){return Gt(),Vt}}));var Yt=/^(none|table(?!-c[ea]).+)/,Zt=/^--/,te={position:"absolute",visibility:"hidden",display:"block"},ee={letterSpacing:"0",fontWeight:"400"},ie=["Webkit","Moz","ms"],ne=$.createElement("div").style;function se(t){if(t in ne)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=ie.length;i--;)if((t=ie[i]+e)in ne)return t}function oe(t){var e=E.cssProps[t];return e||(e=E.cssProps[t]=se(t)||t),e}function re(t,e,i){var n=et.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function ae(t,e,i,n,s){var o,r=0;for(o=i===(n?"border":"content")?4:"width"===e?1:0;o<4;o+=2)"margin"===i&&(r+=E.css(t,i+it[o],!0,s)),n?("content"===i&&(r-=E.css(t,"padding"+it[o],!0,s)),"margin"!==i&&(r-=E.css(t,"border"+it[o]+"Width",!0,s))):(r+=E.css(t,"padding"+it[o],!0,s),"padding"!==i&&(r+=E.css(t,"border"+it[o]+"Width",!0,s)));return r}function le(t,e,i){var n,s=Ft(t),o=Kt(t,e,s),r="border-box"===E.css(t,"boxSizing",!1,s);return Mt.test(o)?o:(n=r&&(m.boxSizingReliable()||o===t.style[e]),"auto"===o&&(o=t["offset"+e[0].toUpperCase()+e.slice(1)]),(o=parseFloat(o)||0)+ae(t,e,i||(r?"border":"content"),n,s)+"px")}function ce(t,e,i,n,s){return new ce.prototype.init(t,e,i,n,s)}E.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Kt(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,o,r,a=E.camelCase(e),l=Zt.test(e),c=t.style;if(l||(e=oe(a)),r=E.cssHooks[e]||E.cssHooks[a],void 0===i)return r&&"get"in r&&void 0!==(s=r.get(t,!1,n))?s:c[e];"string"===(o=typeof i)&&(s=et.exec(i))&&s[1]&&(i=ot(t,e,s),o="number"),null!=i&&i==i&&("number"===o&&(i+=s&&s[3]||(E.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==i||0!==e.indexOf("background")||(c[e]="inherit"),r&&"set"in r&&void 0===(i=r.set(t,i,n))||(l?c.setProperty(e,i):c[e]=i))}},css:function(t,e,i,n){var s,o,r,a=E.camelCase(e),l;return Zt.test(e)||(e=oe(a)),(r=E.cssHooks[e]||E.cssHooks[a])&&"get"in r&&(s=r.get(t,!0,i)),void 0===s&&(s=Kt(t,e,n)),"normal"===s&&e in ee&&(s=ee[e]),""===i||i?(o=parseFloat(s),!0===i||isFinite(o)?o||0:s):s}}),E.each(["height","width"],function(t,r){E.cssHooks[r]={get:function(t,e,i){if(e)return!Yt.test(E.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?le(t,r,i):st(t,te,function(){return le(t,r,i)})},set:function(t,e,i){var n,s=i&&Ft(t),o=i&&ae(t,r,i,"border-box"===E.css(t,"boxSizing",!1,s),s);return o&&(n=et.exec(e))&&"px"!==(n[3]||"px")&&(t.style[r]=e,e=E.css(t,r)),re(t,e,o)}}}),E.cssHooks.marginLeft=Xt(m.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Kt(t,"marginLeft"))||t.getBoundingClientRect().left-st(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),E.each({margin:"",padding:"",border:"Width"},function(s,o){E.cssHooks[s+o]={expand:function(t){for(var e=0,i={},n="string"==typeof t?t.split(" "):[t];e<4;e++)i[s+it[e]+o]=n[e]||n[e-2]||n[0];return i}},zt.test(s)||(E.cssHooks[s+o].set=re)}),E.fn.extend({css:function(t,e){return W(this,function(t,e,i){var n,s,o={},r=0;if(Array.isArray(e)){for(n=Ft(t),s=e.length;r<s;r++)o[e[r]]=E.css(t,e[r],!1,n);return o}return void 0!==i?E.style(t,e,i):E.css(t,e)},t,e,1<arguments.length)}}),((E.Tween=ce).prototype={constructor:ce,init:function(t,e,i,n,s,o){this.elem=t,this.prop=i,this.easing=s||E.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(E.cssNumber[i]?"":"px")},cur:function(){var t=ce.propHooks[this.prop];return t&&t.get?t.get(this):ce.propHooks._default.get(this)},run:function(t){var e,i=ce.propHooks[this.prop];return this.options.duration?this.pos=e=E.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):ce.propHooks._default.set(this),this}}).init.prototype=ce.prototype,(ce.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=E.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){E.fx.step[t.prop]?E.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[E.cssProps[t.prop]]&&!E.cssHooks[t.prop]?t.elem[t.prop]=t.now:E.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=ce.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},E.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},E.fx=ce.prototype.init,E.fx.step={};var ue,he,de=/^(?:toggle|show|hide)$/,ge=/queueHooks$/,pe,fe,me;function ve(){he&&(!1===$.hidden&&k.requestAnimationFrame?k.requestAnimationFrame(ve):k.setTimeout(ve,E.fx.interval),E.fx.tick())}function be(){return k.setTimeout(function(){ue=void 0}),ue=E.now()}function ye(t,e){var i,n=0,s={height:t};for(e=e?1:0;n<4;n+=2-e)s["margin"+(i=it[n])]=s["padding"+i]=t;return e&&(s.opacity=s.width=t),s}function Ce(t,e,i){for(var n,s=(ke.tweeners[e]||[]).concat(ke.tweeners["*"]),o=0,r=s.length;o<r;o++)if(n=s[o].call(i,e,t))return n}function we(t,e,i){var n,s,o,r,a,l,c,u,h="width"in e||"height"in e,d=this,g={},p=t.style,f=t.nodeType&&nt(t),m=J.get(t,"fxshow");for(n in i.queue||(null==(r=E._queueHooks(t,"fx")).unqueued&&(r.unqueued=0,a=r.empty.fire,r.empty.fire=function(){r.unqueued||a()}),r.unqueued++,d.always(function(){d.always(function(){r.unqueued--,E.queue(t,"fx").length||r.empty.fire()})})),e)if(s=e[n],de.test(s)){if(delete e[n],o=o||"toggle"===s,s===(f?"hide":"show")){if("show"!==s||!m||void 0===m[n])continue;f=!0}g[n]=m&&m[n]||E.style(t,n)}if((l=!E.isEmptyObject(e))||!E.isEmptyObject(g))for(n in h&&1===t.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=J.get(t,"display")),"none"===(u=E.css(t,"display"))&&(c?u=c:(lt([t],!0),c=t.style.display||c,u=E.css(t,"display"),lt([t]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===E.css(t,"float")&&(l||(d.done(function(){p.display=c}),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),l=!1,g)l||(m?"hidden"in m&&(f=m.hidden):m=J.access(t,"fxshow",{display:c}),o&&(m.hidden=!f),f&&lt([t],!0),d.done(function(){for(n in f||lt([t]),J.remove(t,"fxshow"),g)E.style(t,n,g[n])})),l=Ce(f?m[n]:0,n,d),n in m||(m[n]=l.start,f&&(l.end=l.start,l.start=0))}function xe(t,e){var i,n,s,o,r;for(i in t)if(s=e[n=E.camelCase(i)],o=t[i],Array.isArray(o)&&(s=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),(r=E.cssHooks[n])&&"expand"in r)for(i in o=r.expand(o),delete t[n],o)i in t||(t[i]=o[i],e[i]=s);else e[n]=s}function ke(r,t,e){var i,a,n=0,s=ke.prefilters.length,l=E.Deferred().always(function(){delete o.elem}),o=function(){if(a)return!1;for(var t=ue||be(),e=Math.max(0,c.startTime+c.duration-t),i,n=1-(e/c.duration||0),s=0,o=c.tweens.length;s<o;s++)c.tweens[s].run(n);return l.notifyWith(r,[c,n,e]),n<1&&o?e:(o||l.notifyWith(r,[c,1,0]),l.resolveWith(r,[c]),!1)},c=l.promise({elem:r,props:E.extend({},t),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},e),originalProperties:t,originalOptions:e,startTime:ue||be(),duration:e.duration,tweens:[],createTween:function(t,e){var i=E.Tween(r,c.opts,t,e,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var e=0,i=t?c.tweens.length:0;if(a)return this;for(a=!0;e<i;e++)c.tweens[e].run(1);return t?(l.notifyWith(r,[c,1,0]),l.resolveWith(r,[c,t])):l.rejectWith(r,[c,t]),this}}),u=c.props;for(xe(u,c.opts.specialEasing);n<s;n++)if(i=ke.prefilters[n].call(c,r,u,c.opts))return E.isFunction(i.stop)&&(E._queueHooks(c.elem,c.opts.queue).stop=E.proxy(i.stop,i)),i;return E.map(u,Ce,c),E.isFunction(c.opts.start)&&c.opts.start.call(r,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),E.fx.timer(E.extend(o,{elem:r,anim:c,queue:c.opts.queue})),c}E.Animation=E.extend(ke,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return ot(i.elem,t,et.exec(e),i),i}]},tweener:function(t,e){for(var i,n=0,s=(t=E.isFunction(t)?(e=t,["*"]):t.match(B)).length;n<s;n++)i=t[n],ke.tweeners[i]=ke.tweeners[i]||[],ke.tweeners[i].unshift(e)},prefilters:[we],prefilter:function(t,e){e?ke.prefilters.unshift(t):ke.prefilters.push(t)}}),E.speed=function(t,e,i){var n=t&&"object"==typeof t?E.extend({},t):{complete:i||!i&&e||E.isFunction(t)&&t,duration:t,easing:i&&e||e&&!E.isFunction(e)&&e};return E.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in E.fx.speeds?n.duration=E.fx.speeds[n.duration]:n.duration=E.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){E.isFunction(n.old)&&n.old.call(this),n.queue&&E.dequeue(this,n.queue)},n},E.fn.extend({fadeTo:function(t,e,i,n){return this.filter(nt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(e,t,i,n){var s=E.isEmptyObject(e),o=E.speed(t,i,n),r=function(){var t=ke(this,E.extend({},e),o);(s||J.get(this,"finish"))&&t.stop(!0)};return r.finish=r,s||!1===o.queue?this.each(r):this.queue(o.queue,r)},stop:function(s,t,o){var r=function(t){var e=t.stop;delete t.stop,e(o)};return"string"!=typeof s&&(o=t,t=s,s=void 0),t&&!1!==s&&this.queue(s||"fx",[]),this.each(function(){var t=!0,e=null!=s&&s+"queueHooks",i=E.timers,n=J.get(this);if(e)n[e]&&n[e].stop&&r(n[e]);else for(e in n)n[e]&&n[e].stop&&ge.test(e)&&r(n[e]);for(e=i.length;e--;)i[e].elem!==this||null!=s&&i[e].queue!==s||(i[e].anim.stop(o),t=!1,i.splice(e,1));!t&&o||E.dequeue(this,s)})},finish:function(r){return!1!==r&&(r=r||"fx"),this.each(function(){var t,e=J.get(this),i=e[r+"queue"],n=e[r+"queueHooks"],s=E.timers,o=i?i.length:0;for(e.finish=!0,E.queue(this,r,[]),n&&n.stop&&n.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===r&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete e.finish})}}),E.each(["toggle","show","hide"],function(t,n){var s=E.fn[n];E.fn[n]=function(t,e,i){return null==t||"boolean"==typeof t?s.apply(this,arguments):this.animate(ye(n,!0),t,e,i)}}),E.each({slideDown:ye("show"),slideUp:ye("hide"),slideToggle:ye("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){E.fn[t]=function(t,e,i){return this.animate(n,t,e,i)}}),E.timers=[],E.fx.tick=function(){var t,e=0,i=E.timers;for(ue=E.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||E.fx.stop(),ue=void 0},E.fx.timer=function(t){E.timers.push(t),E.fx.start()},E.fx.interval=13,E.fx.start=function(){he||(he=!0,ve())},E.fx.stop=function(){he=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(n,t){return n=E.fx&&E.fx.speeds[n]||n,t=t||"fx",this.queue(t,function(t,e){var i=k.setTimeout(t,n);e.stop=function(){k.clearTimeout(i)}})},pe=$.createElement("input"),me=$.createElement("select").appendChild($.createElement("option")),pe.type="checkbox",m.checkOn=""!==pe.value,m.optSelected=me.selected,(pe=$.createElement("input")).value="t",pe.type="radio",m.radioValue="t"===pe.value;var $e,Ee=E.expr.attrHandle;E.fn.extend({attr:function(t,e){return W(this,E.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){E.removeAttr(this,t)})}}),E.extend({attr:function(t,e,i){var n,s,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?E.prop(t,e,i):(1===o&&E.isXMLDoc(t)||(s=E.attrHooks[e.toLowerCase()]||(E.expr.match.bool.test(e)?$e:void 0)),void 0!==i?null===i?void E.removeAttr(t,e):s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:(t.setAttribute(e,i+""),i):s&&"get"in s&&null!==(n=s.get(t,e))?n:null==(n=E.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&T(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,s=e&&e.match(B);if(s&&1===t.nodeType)for(;i=s[n++];)t.removeAttribute(i)}}),$e={set:function(t,e,i){return!1===e?E.removeAttr(t,i):t.setAttribute(i,i),i}},E.each(E.expr.match.bool.source.match(/\w+/g),function(t,e){var r=Ee[e]||E.find.attr;Ee[e]=function(t,e,i){var n,s,o=e.toLowerCase();return i||(s=Ee[o],Ee[o]=n,n=null!=r(t,e,i)?o:null,Ee[o]=s),n}});var Se=/^(?:input|select|textarea|button)$/i,Te=/^(?:a|area)$/i;function Ie(t){var e;return(t.match(B)||[]).join(" ")}function _e(t){return t.getAttribute&&t.getAttribute("class")||""}E.fn.extend({prop:function(t,e){return W(this,E.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[E.propFix[t]||t]})}}),E.extend({prop:function(t,e,i){var n,s,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&E.isXMLDoc(t)||(e=E.propFix[e]||e,s=E.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:t[e]=i:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=E.find.attr(t,"tabindex");return e?parseInt(e,10):Se.test(t.nodeName)||Te.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(E.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this}),E.fn.extend({addClass:function(e){var t,i,n,s,o,r,a,l=0;if(E.isFunction(e))return this.each(function(t){E(this).addClass(e.call(this,t,_e(this)))});if("string"==typeof e&&e)for(t=e.match(B)||[];i=this[l++];)if(s=_e(i),n=1===i.nodeType&&" "+Ie(s)+" "){for(r=0;o=t[r++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");s!==(a=Ie(n))&&i.setAttribute("class",a)}return this},removeClass:function(e){var t,i,n,s,o,r,a,l=0;if(E.isFunction(e))return this.each(function(t){E(this).removeClass(e.call(this,t,_e(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(B)||[];i=this[l++];)if(s=_e(i),n=1===i.nodeType&&" "+Ie(s)+" "){for(r=0;o=t[r++];)for(;-1<n.indexOf(" "+o+" ");)n=n.replace(" "+o+" "," ");s!==(a=Ie(n))&&i.setAttribute("class",a)}return this},toggleClass:function(s,e){var o=typeof s;return"boolean"==typeof e&&"string"==o?e?this.addClass(s):this.removeClass(s):E.isFunction(s)?this.each(function(t){E(this).toggleClass(s.call(this,t,_e(this),e),e)}):this.each(function(){var t,e,i,n;if("string"==o)for(e=0,i=E(this),n=s.match(B)||[];t=n[e++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==s&&"boolean"!=o||((t=_e(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===s?"":J.get(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&-1<(" "+Ie(_e(i))+" ").indexOf(e))return!0;return!1}});var Ne=/\r/g;E.fn.extend({val:function(i){var n,t,s,e=this[0];return arguments.length?(s=E.isFunction(i),this.each(function(t){var e;1===this.nodeType&&(null==(e=s?i.call(this,t,E(this).val()):i)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=E.map(e,function(t){return null==t?"":t+""})),(n=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,e,"value")||(this.value=e))})):e?(n=E.valHooks[e.type]||E.valHooks[e.nodeName.toLowerCase()])&&"get"in n&&void 0!==(t=n.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(Ne,""):null==t?"":t:void 0}}),E.extend({valHooks:{option:{get:function(t){var e=E.find.attr(t,"value");return null!=e?e:Ie(E.text(t))}},select:{get:function(t){var e,i,n,s=t.options,o=t.selectedIndex,r="select-one"===t.type,a=r?null:[],l=r?o+1:s.length;for(n=o<0?l:r?o:0;n<l;n++)if(((i=s[n]).selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!T(i.parentNode,"optgroup"))){if(e=E(i).val(),r)return e;a.push(e)}return a},set:function(t,e){for(var i,n,s=t.options,o=E.makeArray(e),r=s.length;r--;)((n=s[r]).selected=-1<E.inArray(E.valHooks.option.get(n),o))&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<E.inArray(E(t).val(),e)}},m.checkOn||(E.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var je=/^(?:focusinfocus|focusoutblur)$/;E.extend(E.event,{trigger:function(t,e,i,n){var s,o,r,a,l,c,u,h=[i||$],d=p.call(t,"type")?t.type:t,g=p.call(t,"namespace")?t.namespace.split("."):[];if(o=r=i=i||$,3!==i.nodeType&&8!==i.nodeType&&!je.test(d+E.event.triggered)&&(-1<d.indexOf(".")&&(d=(g=d.split(".")).shift(),g.sort()),l=d.indexOf(":")<0&&"on"+d,(t=t[E.expando]?t:new E.Event(d,"object"==typeof t&&t)).isTrigger=n?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:E.makeArray(e,[t]),u=E.event.special[d]||{},n||!u.trigger||!1!==u.trigger.apply(i,e))){if(!n&&!u.noBubble&&!E.isWindow(i)){for(a=u.delegateType||d,je.test(a+d)||(o=o.parentNode);o;o=o.parentNode)h.push(o),r=o;r===(i.ownerDocument||$)&&h.push(r.defaultView||r.parentWindow||k)}for(s=0;(o=h[s++])&&!t.isPropagationStopped();)t.type=1<s?a:u.bindType||d,(c=(J.get(o,"events")||{})[t.type]&&J.get(o,"handle"))&&c.apply(o,e),(c=l&&o[l])&&c.apply&&V(o)&&(t.result=c.apply(o,e),!1===t.result&&t.preventDefault());return t.type=d,n||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(h.pop(),e)||!V(i)||l&&E.isFunction(i[d])&&!E.isWindow(i)&&((r=i[l])&&(i[l]=null),i[E.event.triggered=d](),E.event.triggered=void 0,r&&(i[l]=r)),t.result}},simulate:function(t,e,i){var n=E.extend(new E.Event,i,{type:t,isSimulated:!0});E.event.trigger(n,null,e)}}),E.fn.extend({trigger:function(t,e){return this.each(function(){E.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return E.event.trigger(t,e,i,!0)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,i){E.fn[i]=function(t,e){return 0<arguments.length?this.on(i,null,t,e):this.trigger(i)}}),E.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),m.focusin="onfocusin"in k,m.focusin||E.each({focus:"focusin",blur:"focusout"},function(i,n){var s=function(t){E.event.simulate(n,t.target,E.event.fix(t))};E.event.special[n]={setup:function(){var t=this.ownerDocument||this,e=J.access(t,n);e||t.addEventListener(i,s,!0),J.access(t,n,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=J.access(t,n)-1;e?J.access(t,n,e):(t.removeEventListener(i,s,!0),J.remove(t,n))}}});var Le=k.location,Ae=E.now(),Oe=/\?/;E.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new k.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||E.error("Invalid XML: "+t),e};var De=/\[\]$/,He=/\r?\n/g,Be=/^(?:submit|button|image|reset|file)$/i,Pe=/^(?:input|select|textarea|keygen)/i;function Re(i,t,n,s){var e;if(Array.isArray(t))E.each(t,function(t,e){n||De.test(i)?s(i,e):Re(i+"["+("object"==typeof e&&null!=e?t:"")+"]",e,n,s)});else if(n||"object"!==E.type(t))s(i,t);else for(e in t)Re(i+"["+e+"]",t[e],n,s)}E.param=function(t,e){var i,n=[],s=function(t,e){var i=E.isFunction(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(t)||t.jquery&&!E.isPlainObject(t))E.each(t,function(){s(this.name,this.value)});else for(i in t)Re(i,t[i],e,s);return n.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=E.prop(this,"elements");return t?E.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!E(this).is(":disabled")&&Pe.test(this.nodeName)&&!Be.test(t)&&(this.checked||!ct.test(t))}).map(function(t,e){var i=E(this).val();return null==i?null:Array.isArray(i)?E.map(i,function(t){return{name:e.name,value:t.replace(He,"\r\n")}}):{name:e.name,value:i.replace(He,"\r\n")}}).get()}});var ze=/%20/g,Me=/#.*$/,Fe=/([?&])_=[^&]*/,qe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ue=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,We=/^(?:GET|HEAD)$/,Ve=/^\/\//,Qe={},Je={},Ge="*/".concat("*"),Ke=$.createElement("a");function Xe(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var i,n=0,s=t.toLowerCase().match(B)||[];if(E.isFunction(e))for(;i=s[n++];)"+"===i[0]?(i=i.slice(1)||"*",(o[i]=o[i]||[]).unshift(e)):(o[i]=o[i]||[]).push(e)}}function Ye(e,s,o,r){var a={},l=e===Je;function c(t){var n;return a[t]=!0,E.each(e[t]||[],function(t,e){var i=e(s,o,r);return"string"!=typeof i||l||a[i]?l?!(n=i):void 0:(s.dataTypes.unshift(i),c(i),!1)}),n}return c(s.dataTypes[0])||!a["*"]&&c("*")}function Ze(t,e){var i,n,s=E.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((s[i]?t:n||(n={}))[i]=e[i]);return n&&E.extend(!0,t,n),t}function ti(t,e,i){for(var n,s,o,r,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(s in a)if(a[s]&&a[s].test(n)){l.unshift(s);break}if(l[0]in i)o=l[0];else{for(s in i){if(!l[0]||t.converters[s+" "+l[0]]){o=s;break}r||(r=s)}o=o||r}if(o)return o!==l[0]&&l.unshift(o),i[o]}function ei(t,e,i,n){var s,o,r,a,l,c={},u=t.dataTypes.slice();if(u[1])for(r in t.converters)c[r.toLowerCase()]=t.converters[r];for(o=u.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(r=c[l+" "+o]||c["* "+o]))for(s in c)if((a=s.split(" "))[1]===o&&(r=c[l+" "+a[0]]||c["* "+a[0]])){!0===r?r=c[s]:!0!==c[s]&&(o=a[0],u.unshift(a[1]));break}if(!0!==r)if(r&&t.throws)e=r(e);else try{e=r(e)}catch(t){return{state:"parsererror",error:r?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}Ke.href=Le.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Le.href,type:"GET",isLocal:Ue.test(Le.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ge,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ze(Ze(t,E.ajaxSettings),e):Ze(E.ajaxSettings,t)},ajaxPrefilter:Xe(Qe),ajaxTransport:Xe(Je),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var u,h,d,i,g,n,p,f,s,o,m=E.ajaxSetup({},e),v=m.context||m,b=m.context&&(v.nodeType||v.jquery)?E(v):E.event,y=E.Deferred(),C=E.Callbacks("once memory"),w=m.statusCode||{},r={},a={},l="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(p){if(!i)for(i={};e=qe.exec(d);)i[e[1].toLowerCase()]=e[2];e=i[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return p?d:null},setRequestHeader:function(t,e){return null==p&&(t=a[t.toLowerCase()]=a[t.toLowerCase()]||t,r[t]=e),this},overrideMimeType:function(t){return null==p&&(m.mimeType=t),this},statusCode:function(t){var e;if(t)if(p)x.always(t[x.status]);else for(e in t)w[e]=[w[e],t[e]];return this},abort:function(t){var e=t||l;return u&&u.abort(e),c(0,e),this}};if(y.promise(x),m.url=((t||m.url||Le.href)+"").replace(Ve,Le.protocol+"//"),m.type=e.method||e.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(B)||[""],null==m.crossDomain){n=$.createElement("a");try{n.href=m.url,n.href=n.href,m.crossDomain=Ke.protocol+"//"+Ke.host!=n.protocol+"//"+n.host}catch(t){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=E.param(m.data,m.traditional)),Ye(Qe,m,e,x),p)return x;for(s in(f=E.event&&m.global)&&0==E.active++&&E.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!We.test(m.type),h=m.url.replace(Me,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(ze,"+")):(o=m.url.slice(h.length),m.data&&(h+=(Oe.test(h)?"&":"?")+m.data,delete m.data),!1===m.cache&&(h=h.replace(Fe,"$1"),o=(Oe.test(h)?"&":"?")+"_="+Ae+++o),m.url=h+o),m.ifModified&&(E.lastModified[h]&&x.setRequestHeader("If-Modified-Since",E.lastModified[h]),E.etag[h]&&x.setRequestHeader("If-None-Match",E.etag[h])),(m.data&&m.hasContent&&!1!==m.contentType||e.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Ge+"; q=0.01":""):m.accepts["*"]),m.headers)x.setRequestHeader(s,m.headers[s]);if(m.beforeSend&&(!1===m.beforeSend.call(v,x,m)||p))return x.abort();if(l="abort",C.add(m.complete),x.done(m.success),x.fail(m.error),u=Ye(Je,m,e,x)){if(x.readyState=1,f&&b.trigger("ajaxSend",[x,m]),p)return x;m.async&&0<m.timeout&&(g=k.setTimeout(function(){x.abort("timeout")},m.timeout));try{p=!1,u.send(r,c)}catch(t){if(p)throw t;c(-1,t)}}else c(-1,"No Transport");function c(t,e,i,n){var s,o,r,a,l,c=e;p||(p=!0,g&&k.clearTimeout(g),u=void 0,d=n||"",x.readyState=0<t?4:0,s=200<=t&&t<300||304===t,i&&(a=ti(m,x,i)),a=ei(m,a,x,s),s?(m.ifModified&&((l=x.getResponseHeader("Last-Modified"))&&(E.lastModified[h]=l),(l=x.getResponseHeader("etag"))&&(E.etag[h]=l)),204===t||"HEAD"===m.type?c="nocontent":304===t?c="notmodified":(c=a.state,o=a.data,s=!(r=a.error))):(r=c,!t&&c||(c="error",t<0&&(t=0))),x.status=t,x.statusText=(e||c)+"",s?y.resolveWith(v,[o,c,x]):y.rejectWith(v,[x,c,r]),x.statusCode(w),w=void 0,f&&b.trigger(s?"ajaxSuccess":"ajaxError",[x,m,s?o:r]),C.fireWith(v,[x,c]),f&&(b.trigger("ajaxComplete",[x,m]),--E.active||E.event.trigger("ajaxStop")))}return x},getJSON:function(t,e,i){return E.get(t,e,i,"json")},getScript:function(t,e){return E.get(t,void 0,e,"script")}}),E.each(["get","post"],function(t,s){E[s]=function(t,e,i,n){return E.isFunction(e)&&(n=n||i,i=e,e=void 0),E.ajax(E.extend({url:t,type:s,dataType:n,data:e,success:i},E.isPlainObject(t)&&t))}}),E._evalUrl=function(t){return E.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},E.fn.extend({wrapAll:function(t){var e;return this[0]&&(E.isFunction(t)&&(t=t.call(this[0])),e=E(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(i){return E.isFunction(i)?this.each(function(t){E(this).wrapInner(i.call(this,t))}):this.each(function(){var t=E(this),e=t.contents();e.length?e.wrapAll(i):t.append(i)})},wrap:function(e){var i=E.isFunction(e);return this.each(function(t){E(this).wrapAll(i?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){E(this).replaceWith(this.childNodes)}),this}}),E.expr.pseudos.hidden=function(t){return!E.expr.pseudos.visible(t)},E.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new k.XMLHttpRequest}catch(t){}};var ii={0:200,1223:204},ni=E.ajaxSettings.xhr();m.cors=!!ni&&"withCredentials"in ni,m.ajax=ni=!!ni,E.ajaxTransport(function(s){var o,r;if(m.cors||ni&&!s.crossDomain)return{send:function(t,e){var i,n=s.xhr();if(n.open(s.type,s.url,s.async,s.username,s.password),s.xhrFields)for(i in s.xhrFields)n[i]=s.xhrFields[i];for(i in s.mimeType&&n.overrideMimeType&&n.overrideMimeType(s.mimeType),s.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)n.setRequestHeader(i,t[i]);o=function(t){return function(){o&&(o=r=n.onload=n.onerror=n.onabort=n.onreadystatechange=null,"abort"===t?n.abort():"error"===t?"number"!=typeof n.status?e(0,"error"):e(n.status,n.statusText):e(ii[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=o(),r=n.onerror=o("error"),void 0!==n.onabort?n.onabort=r:n.onreadystatechange=function(){4===n.readyState&&k.setTimeout(function(){o&&r()})},o=o("abort");try{n.send(s.hasContent&&s.data||null)}catch(t){if(o)throw t}},abort:function(){o&&o()}}}),E.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return E.globalEval(t),t}}}),E.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),E.ajaxTransport("script",function(i){var n,s;if(i.crossDomain)return{send:function(t,e){n=E("<script>").prop({charset:i.scriptCharset,src:i.url}).on("load error",s=function(t){n.remove(),s=null,t&&e("error"===t.type?404:200,t.type)}),$.head.appendChild(n[0])},abort:function(){s&&s()}}});var si=[],oi=/(=)\?(?=&|$)|\?\?/,ri;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=si.pop()||E.expando+"_"+Ae++;return this[t]=!0,t}}),E.ajaxPrefilter("json jsonp",function(t,e,i){var n,s,o,r=!1!==t.jsonp&&(oi.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&oi.test(t.data)&&"data");if(r||"jsonp"===t.dataTypes[0])return n=t.jsonpCallback=E.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(oi,"$1"+n):!1!==t.jsonp&&(t.url+=(Oe.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return o||E.error(n+" was not called"),o[0]},t.dataTypes[0]="json",s=k[n],k[n]=function(){o=arguments},i.always(function(){void 0===s?E(k).removeProp(n):k[n]=s,t[n]&&(t.jsonpCallback=e.jsonpCallback,si.push(n)),o&&E.isFunction(s)&&s(o[0]),o=s=void 0}),"script"}),m.createHTMLDocument=((ri=$.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===ri.childNodes.length),E.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(m.createHTMLDocument?((n=(e=$.implementation.createHTMLDocument("")).createElement("base")).href=$.location.href,e.head.appendChild(n)):e=$),o=!i&&[],(s=I.exec(t))?[e.createElement(s[1])]:(s=yt([t],e,o),o&&o.length&&E(o).remove(),E.merge([],s.childNodes)));var n,s,o},E.fn.load=function(t,e,i){var n,s,o,r=this,a=t.indexOf(" ");return-1<a&&(n=Ie(t.slice(a)),t=t.slice(0,a)),E.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(s="POST"),0<r.length&&E.ajax({url:t,type:s||"GET",dataType:"html",data:e}).done(function(t){o=arguments,r.html(n?E("<div>").append(E.parseHTML(t)).find(n):t)}).always(i&&function(t,e){r.each(function(){i.apply(this,o||[t.responseText,e,t])})}),this},E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){E.fn[e]=function(t){return this.on(e,t)}}),E.expr.pseudos.animated=function(e){return E.grep(E.timers,function(t){return e===t.elem}).length},E.offset={setOffset:function(t,e,i){var n,s,o,r,a,l,c,u=E.css(t,"position"),h=E(t),d={};"static"===u&&(t.style.position="relative"),a=h.offset(),o=E.css(t,"top"),l=E.css(t,"left"),s=(c=("absolute"===u||"fixed"===u)&&-1<(o+l).indexOf("auto"))?(r=(n=h.position()).top,n.left):(r=parseFloat(o)||0,parseFloat(l)||0),E.isFunction(e)&&(e=e.call(t,i,E.extend({},a))),null!=e.top&&(d.top=e.top-a.top+r),null!=e.left&&(d.left=e.left-a.left+s),"using"in e?e.using.call(t,d):h.css(d)}},E.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){E.offset.setOffset(this,e,t)});var t,i,n,s,o=this[0];return o?o.getClientRects().length?(n=o.getBoundingClientRect(),i=(t=o.ownerDocument).documentElement,s=t.defaultView,{top:n.top+s.pageYOffset-i.clientTop,left:n.left+s.pageXOffset-i.clientLeft}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===E.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),T(t[0],"html")||(n=t.offset()),n={top:n.top+E.css(t[0],"borderTopWidth",!0),left:n.left+E.css(t[0],"borderLeftWidth",!0)}),{top:e.top-n.top-E.css(i,"marginTop",!0),left:e.left-n.left-E.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===E.css(t,"position");)t=t.offsetParent;return t||Ct})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,s){var o="pageYOffset"===s;E.fn[e]=function(t){return W(this,function(t,e,i){var n;if(E.isWindow(t)?n=t:9===t.nodeType&&(n=t.defaultView),void 0===i)return n?n[s]:t[e];n?n.scrollTo(o?n.pageXOffset:i,o?i:n.pageYOffset):t[e]=i},e,t,arguments.length)}}),E.each(["top","left"],function(t,i){E.cssHooks[i]=Xt(m.pixelPosition,function(t,e){if(e)return e=Kt(t,i),Mt.test(e)?E(t).position()[i]+"px":e})}),E.each({Height:"height",Width:"width"},function(r,a){E.each({padding:"inner"+r,content:a,"":"outer"+r},function(n,o){E.fn[o]=function(t,e){var i=arguments.length&&(n||"boolean"!=typeof t),s=n||(!0===t||!0===e?"margin":"border");return W(this,function(t,e,i){var n;return E.isWindow(t)?0===o.indexOf("outer")?t["inner"+r]:t.document.documentElement["client"+r]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+r],n["scroll"+r],t.body["offset"+r],n["offset"+r],n["client"+r])):void 0===i?E.css(t,e,s):E.style(t,e,i,s)},a,i?t:void 0,i)}})}),E.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}}),E.holdReady=function(t){t?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=T,"function"==typeof define&&define.amd&&define("jquery",[],function(){return E});var ai=k.jQuery,li=k.$;return E.noConflict=function(t){return k.$===E&&(k.$=li),t&&k.jQuery===E&&(k.jQuery=ai),E},t||(k.jQuery=k.$=E),E}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(d){d.extend(d.fn,{validate:function(t){if(this.length){var n=d.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new d.validator(t,this[0]),d.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",function(t){n.submitButton=t.currentTarget,d(this).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==d(this).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.on("submit.validate",function(i){function t(){var t,e;return n.submitButton&&(n.settings.submitHandler||n.formSubmitted)&&(t=d("<input type='hidden'/>").attr("name",n.submitButton.name).val(d(n.submitButton).val()).appendTo(n.currentForm)),!n.settings.submitHandler||(e=n.settings.submitHandler.call(n,n.currentForm,i),t&&t.remove(),void 0!==e&&e)}return n.settings.debug&&i.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,t()):n.form()?n.pendingRequest?!(n.formSubmitted=!0):t():(n.focusInvalid(),!1)})),n)}t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var t,e,i;return d(this[0]).is("form")?t=this.validate().form():(i=[],t=!0,e=d(this[0].form).validate(),this.each(function(){(t=e.element(this)&&t)||(i=i.concat(e.errorList))}),e.errorList=i),t},rules:function(t,e){var i,n,s,o,r,a,l=this[0];if(null!=l&&(!l.form&&l.hasAttribute("contenteditable")&&(l.form=this.closest("form")[0],l.name=this.attr("name")),null!=l.form)){if(t)switch(i=d.data(l.form,"validator").settings,n=i.rules,s=d.validator.staticRules(l),t){case"add":d.extend(s,d.validator.normalizeRule(e)),delete s.messages,n[l.name]=s,e.messages&&(i.messages[l.name]=d.extend(i.messages[l.name],e.messages));break;case"remove":return e?(a={},d.each(e.split(/\s/),function(t,e){a[e]=s[e],delete s[e]}),a):(delete n[l.name],s)}return(o=d.validator.normalizeRules(d.extend({},d.validator.classRules(l),d.validator.attributeRules(l),d.validator.dataRules(l),d.validator.staticRules(l)),l)).required&&(r=o.required,delete o.required,o=d.extend({required:r},o)),o.remote&&(r=o.remote,delete o.remote,o=d.extend(o,{remote:r})),o}}}),d.extend(d.expr.pseudos||d.expr[":"],{blank:function(t){return!d.trim(""+d(t).val())},filled:function(t){var e=d(t).val();return null!==e&&!!d.trim(""+e)},unchecked:function(t){return!d(t).prop("checked")}}),d.validator=function(t,e){this.settings=d.extend(!0,{},d.validator.defaults,t),this.currentForm=e,this.init()},d.validator.format=function(i,t){return 1===arguments.length?function(){var t=d.makeArray(arguments);return t.unshift(i),d.validator.format.apply(this,t)}:(void 0===t||(2<arguments.length&&t.constructor!==Array&&(t=d.makeArray(arguments).slice(1)),t.constructor!==Array&&(t=[t]),d.each(t,function(t,e){i=i.replace(new RegExp("\\{"+t+"\\}","g"),function(){return e})})),i)},d.extend(d.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:d([]),errorLabelContainer:d([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){var i=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===e.which&&""===this.elementValue(t)||-1!==d.inArray(e.keyCode,i)||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(t,e,i){"radio"===t.type?this.findByName(t.name).addClass(e).removeClass(i):d(t).addClass(e).removeClass(i)},unhighlight:function(t,e,i){"radio"===t.type?this.findByName(t.name).removeClass(e).addClass(i):d(t).removeClass(e).addClass(i)}},setDefaults:function(t){d.extend(d.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:d.validator.format("Please enter no more than {0} characters."),minlength:d.validator.format("Please enter at least {0} characters."),rangelength:d.validator.format("Please enter a value between {0} and {1} characters long."),range:d.validator.format("Please enter a value between {0} and {1}."),max:d.validator.format("Please enter a value less than or equal to {0}."),min:d.validator.format("Please enter a value greater than or equal to {0}."),step:d.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){!this.form&&this.hasAttribute("contenteditable")&&(this.form=d(this).closest("form")[0],this.name=d(this).attr("name"));var e=d.data(this.form,"validator"),i="on"+t.type.replace(/^validate/,""),n=e.settings;n[i]&&!d(this).is(n.ignore)&&n[i].call(e,this,t)}this.labelContainer=d(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||d(this.currentForm),this.containers=d(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,n=this.groups={};d.each(this.settings.groups,function(i,t){"string"==typeof t&&(t=t.split(/\s/)),d.each(t,function(t,e){n[e]=i})}),i=this.settings.rules,d.each(i,function(t,e){i[t]=d.validator.normalizeRule(e)}),d(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&d(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),d.extend(this.submitted,this.errorMap),this.invalid=d.extend({},this.errorMap),this.valid()||d(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(t){var e,i,n=this.clean(t),s=this.validationTargetFor(n),o=this,r=!0;return void 0===s?delete this.invalid[n.name]:(this.prepareElement(s),this.currentElements=d(s),(i=this.groups[s.name])&&d.each(this.groups,function(t,e){e===i&&t!==s.name&&((n=o.validationTargetFor(o.clean(o.findByName(t))))&&n.name in o.invalid&&(o.currentElements.push(n),r=o.check(n)&&r))}),e=!1!==this.check(s),r=r&&e,this.invalid[s.name]=!e,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),d(t).attr("aria-invalid",!e)),r},showErrors:function(e){if(e){var i=this;d.extend(this.errorMap,e),this.errorList=d.map(this.errorMap,function(t,e){return{message:t,element:i.findByName(e)[0]}}),this.successList=d.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){d.fn.resetForm&&d(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(t){var e;if(this.settings.unhighlight)for(e=0;t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,""),this.findByName(t[e].name).removeClass(this.settings.validClass);else t.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,i=0;for(e in t)void 0!==t[e]&&null!==t[e]&&!1!==t[e]&&i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{d(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===d.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return d(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var t=this.name||d(this).attr("name");return!t&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=d(this).closest("form")[0],this.name=t),!(t in i||!e.objectLength(d(this).rules())||(i[t]=!0,0))})},clean:function(t){return d(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return d(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=d([]),this.toHide=d([])},reset:function(){this.resetInternals(),this.currentElements=d([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(t){var e,i,n=d(t),s=t.type;return"radio"===s||"checkbox"===s?this.findByName(t.name).filter(":checked").val():"number"===s&&void 0!==t.validity?t.validity.badInput?"NaN":n.val():(e=t.hasAttribute("contenteditable")?n.text():n.val(),"file"===s?"C:\\fakepath\\"===e.substr(0,12)?e.substr(12):0<=(i=e.lastIndexOf("/"))?e.substr(i+1):0<=(i=e.lastIndexOf("\\"))?e.substr(i+1):e:"string"==typeof e?e.replace(/\r/g,""):e)},check:function(e){e=this.validationTargetFor(this.clean(e));var t,i,n,s,o=d(e).rules(),r=d.map(o,function(t,e){return e}).length,a=!1,l=this.elementValue(e);if("function"==typeof o.normalizer?s=o.normalizer:"function"==typeof this.settings.normalizer&&(s=this.settings.normalizer),s){if("string"!=typeof(l=s.call(e,l)))throw new TypeError("The normalizer should return a string value.");delete o.normalizer}for(i in o){n={method:i,parameters:o[i]};try{if("dependency-mismatch"===(t=d.validator.methods[i].call(this,l,e,n.parameters))&&1===r){a=!0;continue}if(a=!1,"pending"===t)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!t)return this.formatAndAdd(e,n),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+n.method+"' method.",t),t instanceof TypeError&&(t.message+=".  Exception occurred when checking element "+e.id+", check the '"+n.method+"' method."),t}}if(!a)return this.objectLength(o)&&this.successList.push(e),!0},customDataMessage:function(t,e){return d(t).data("msg"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase())||d(t).data("msg")},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(t,e){"string"==typeof e&&(e={method:e});var i=this.findDefined(this.customMessage(t.name,e.method),this.customDataMessage(t,e.method),!this.settings.ignoreTitle&&t.title||void 0,d.validator.messages[e.method],"<strong>Warning: No message defined for "+t.name+"</strong>"),n=/\$?\{(\d+)\}/g;return"function"==typeof i?i=i.call(this,e.parameters,t):n.test(i)&&(i=d.validator.format(i.replace(n,"{$1}"),e.parameters)),i},formatAndAdd:function(t,e){var i=this.defaultMessage(t,e);this.errorList.push({message:i,element:t,method:e.method}),this.errorMap[t.name]=i,this.submitted[t.name]=i},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,i;for(t=0;this.errorList[t];t++)i=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return d(this.errorList).map(function(){return this.element})},showLabel:function(t,e){var i,n,s,o,r=this.errorsFor(t),a=this.idOrName(t),l=d(t).attr("aria-describedby");r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(e)):(i=r=d("<"+this.settings.errorElement+">").attr("id",a+"-error").addClass(this.settings.errorClass).html(e||""),this.settings.wrapper&&(i=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement.call(this,i,d(t)):i.insertAfter(t),r.is("label")?r.attr("for",a):0===r.parents("label[for='"+this.escapeCssMeta(a)+"']").length&&(s=r.attr("id"),l?l.match(new RegExp("\\b"+this.escapeCssMeta(s)+"\\b"))||(l+=" "+s):l=s,d(t).attr("aria-describedby",l),(n=this.groups[t.name])&&(o=this,d.each(o.groups,function(t,e){e===n&&d("[name='"+o.escapeCssMeta(t)+"']",o.currentForm).attr("aria-describedby",r.attr("id"))})))),!e&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,t)),this.toShow=this.toShow.add(r)},errorsFor:function(t){var e=this.escapeCssMeta(this.idOrName(t)),i=d(t).attr("aria-describedby"),n="label[for='"+e+"'], label[for='"+e+"'] *";return i&&(n=n+", #"+this.escapeCssMeta(i).replace(/\s+/g,", #")),this.errors().filter(n)},escapeCssMeta:function(t){return t.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),d(t).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(t){return d(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,e){switch(e.nodeName.toLowerCase()){case"select":return d("option:selected",e).length;case"input":if(this.checkable(e))return this.findByName(e.name).filter(":checked").length}return t.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t){return t},string:function(t,e){return!!d(t,e.form).length},function:function(t,e){return t(e)}},optional:function(t){var e=this.elementValue(t);return!d.validator.methods.required.call(this,e,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,d(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,e){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],d(t).removeClass(this.settings.pendingClass),e&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(d(this.currentForm).submit(),this.submitButton&&d("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!e&&0===this.pendingRequest&&this.formSubmitted&&(d(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,e){return e="string"==typeof e&&e||"remote",d.data(t,"previousValue")||d.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:e})})},destroy:function(){this.resetForm(),d(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,e){t.constructor===String?this.classRuleSettings[t]=e:d.extend(this.classRuleSettings,t)},classRules:function(t){var e={},i=d(t).attr("class");return i&&d.each(i.split(" "),function(){this in d.validator.classRuleSettings&&d.extend(e,d.validator.classRuleSettings[this])}),e},normalizeAttributeRule:function(t,e,i,n){/min|max|step/.test(i)&&(null===e||/number|range|text/.test(e))&&(n=Number(n),isNaN(n)&&(n=void 0)),n||0===n?t[i]=n:e===i&&"range"!==e&&(t[i]=!0)},attributeRules:function(t){var e,i,n={},s=d(t),o=t.getAttribute("type");for(e in d.validator.methods)i="required"===e?(""===(i=t.getAttribute(e))&&(i=!0),!!i):s.attr(e),this.normalizeAttributeRule(n,o,e,i);return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(t){var e,i,n={},s=d(t),o=t.getAttribute("type");for(e in d.validator.methods)i=s.data("rule"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()),this.normalizeAttributeRule(n,o,e,i);return n},staticRules:function(t){var e={},i=d.data(t.form,"validator");return i.settings.rules&&(e=d.validator.normalizeRule(i.settings.rules[t.name])||{}),e},normalizeRules:function(n,s){return d.each(n,function(t,e){if(!1!==e){if(e.param||e.depends){var i=!0;switch(typeof e.depends){case"string":i=!!d(e.depends,s.form).length;break;case"function":i=e.depends.call(s,s)}i?n[t]=void 0===e.param||e.param:(d.data(s.form,"validator").resetElements(d(s)),delete n[t])}}else delete n[t]}),d.each(n,function(t,e){n[t]=d.isFunction(e)&&"normalizer"!==t?e(s):e}),d.each(["minlength","maxlength"],function(){n[this]&&(n[this]=Number(n[this]))}),d.each(["rangelength","range"],function(){var t;n[this]&&(d.isArray(n[this])?n[this]=[Number(n[this][0]),Number(n[this][1])]:"string"==typeof n[this]&&(t=n[this].replace(/[\[\]]/g,"").split(/[\s,]+/),n[this]=[Number(t[0]),Number(t[1])]))}),d.validator.autoCreateRanges&&(null!=n.min&&null!=n.max&&(n.range=[n.min,n.max],delete n.min,delete n.max),null!=n.minlength&&null!=n.maxlength&&(n.rangelength=[n.minlength,n.maxlength],delete n.minlength,delete n.maxlength)),n},normalizeRule:function(t){if("string"==typeof t){var e={};d.each(t.split(/\s/),function(){e[this]=!0}),t=e}return t},addMethod:function(t,e,i){d.validator.methods[t]=e,d.validator.messages[t]=void 0!==i?i:d.validator.messages[t],e.length<3&&d.validator.addClassRules(t,d.validator.normalizeRule(t))},methods:{required:function(t,e,i){if(!this.depend(i,e))return"dependency-mismatch";if("select"!==e.nodeName.toLowerCase())return this.checkable(e)?0<this.getLength(t,e):0<t.length;var n=d(e).val();return n&&0<n.length},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},minlength:function(t,e,i){var n=d.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||i<=n},maxlength:function(t,e,i){var n=d.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||n<=i},rangelength:function(t,e,i){var n=d.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||n>=i[0]&&n<=i[1]},min:function(t,e,i){return this.optional(e)||i<=t},max:function(t,e,i){return this.optional(e)||t<=i},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},step:function(t,e,i){var n,s=d(e).attr("type"),o="Step attribute on input type "+s+" is not supported.",r=["text","number","range"],a=new RegExp("\\b"+s+"\\b"),l,c=function(t){var e=(""+t).match(/(?:\.(\d+))?$/);return e&&e[1]?e[1].length:0},u=function(t){return Math.round(t*Math.pow(10,n))},h=!0;if(s&&!a.test(r.join()))throw new Error(o);return n=c(i),(c(t)>n||u(t)%u(i)!=0)&&(h=!1),this.optional(e)||h},equalTo:function(t,e,i){var n=d(i);return this.settings.onfocusout&&n.not(".validate-equalTo-blur").length&&n.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){d(e).valid()}),t===n.val()},remote:function(o,r,t,a){if(this.optional(r))return"dependency-mismatch";a="string"==typeof a&&a||"remote";var l,e,i,c=this.previousValue(r,a);return this.settings.messages[r.name]||(this.settings.messages[r.name]={}),c.originalMessage=c.originalMessage||this.settings.messages[r.name][a],this.settings.messages[r.name][a]=c.message,t="string"==typeof t&&{url:t}||t,i=d.param(d.extend({data:o},t.data)),c.old===i?c.valid:(c.old=i,(l=this).startRequest(r),(e={})[r.name]=o,d.ajax(d.extend(!0,{mode:"abort",port:"validate"+r.name,dataType:"json",data:e,context:l.currentForm,success:function(t){var e,i,n,s=!0===t||"true"===t;l.settings.messages[r.name][a]=c.originalMessage,s?(n=l.formSubmitted,l.resetInternals(),l.toHide=l.errorsFor(r),l.formSubmitted=n,l.successList.push(r),l.invalid[r.name]=!1,l.showErrors()):(e={},i=t||l.defaultMessage(r,{method:a,parameters:o}),e[r.name]=c.message=i,l.invalid[r.name]=!0,l.showErrors(e)),c.valid=s,l.stopRequest(r,s)}},t)),"pending")}}});var n,s={};return d.ajaxPrefilter?d.ajaxPrefilter(function(t,e,i){var n=t.port;"abort"===t.mode&&(s[n]&&s[n].abort(),s[n]=i)}):(n=d.ajax,d.ajax=function(t){var e=("mode"in t?t:d.ajaxSettings).mode,i=("port"in t?t:d.ajaxSettings).port;return"abort"===e?(s[i]&&s[i].abort(),s[i]=n.apply(this,arguments),s[i]):n.apply(this,arguments)}),d}),function(window,undefined){var Eggshell=function(o){"use strict";var n=function(t,e,i){this.name=t,this.dependencies=e||[],this.constructor=i,this.instance=null,this.getName=function(){return this.name},this.getDependencies=function(){return this.dependencies},this.getInstance=function(){return this.instance},this.instantiate=function(t){return this.instance=this.constructor.apply({},t),this.instance=this.instance?this.instance:{},this.instance}},l={},s=function(t){l[t.getName()]=t,c()},c=function(){var t=!1;for(var e in l){var i=l[e];if(!i.getInstance()){for(var n=i.getDependencies(),s=[],o=!0,r=0;r<n.length;r++){var a=l[n[r]];if(!a||!a.getInstance()){o=!1;break}s.push(a.getInstance())}o&&(i.instantiate(s),t=!0)}}t&&c()};return o.module=function(t,e,i){if(!t||"string"!=typeof t)throw"Invalid module name. Name needs to be a non empty String.";if(e&&!(e instanceof Array))throw"Invalid dependencies. Dependencies can either be null or an array of module names";if(!i||"function"!=typeof i)throw"Invalid constructor function";return s(new n(t,e,i)),o},o.namespace=function(t,e,i){if(!t||"string"!=typeof t)throw"Invalid namespace. Namespace needs to be a non empty String.";if(null==e)throw"Invalid object to be exported";if(void 0!==i&&"boolean"!=typeof i)throw"Invalid overwrite flag. It needs to be either null or boolean.";var n=t.split(".");t=o;for(var s=0;s<n.length-1;s++)t[n[s]]||(t[n[s]]={}),t=t[n[s]];if(t[n[n.length-1]]&&!i)throw"Namespace is already taken";return t[n[n.length-1]]=e,o},o}({});Eggshell.module("Logger",[],function(){for(var t=window.console=window.console||{},e=["log","debug","warn","error"],i=function(){},n=0;n<e.length;n++)t[e[n]]||(t[e[n]]=i);var s="warn";return this.debug=function(){"debug"==s&&t.debug(arguments)},this.log=function(){"debug"!=s&&"info"!=s||t.log(arguments)},this.warn=function(){"debug"!=s&&"info"!=s&&"warn"!=s||t.warn(arguments)},this.error=function(){t.error(arguments)},this.setLogLevel=function(t){return s=t,Eggshell},Eggshell.namespace("setLogLevel",this.setLogLevel),this}),Eggshell.module("Api",["Logger","Eventbus","Connector","Loader","DefinitionRegistry","EggRegistry","ComponentResourceRegistry","Validator","InterfaceRegistry"],function(Logger,Eventbus,Connector,Loader,DefinitionRegistry,EggRegistry,ComponentResourceRegistry,Validator,InterfaceRegistry){var handleError=!1,strictMode=!1,resolveSelector=function(t){return"string"==typeof t?t:"object"==typeof t&&t.shell&&t.shell.getId?t.shell.getId():"object"==typeof t&&t.getId?t.getId():"object"==typeof t&&t.prototype&&t.prototype.Eggshell&&t.prototype.Eggshell.getId?t.prototype.Eggshell.getId():Loader.getShellInProgress()?Loader.getShellInProgress().getId():null},getEgg=function(t){return EggRegistry.exist(t)?EggRegistry.get(t):null},merge=function(t,e){var i={},n,s=0;if(null!==t)if(t.length&&"number"==typeof t.length)for(i=[],s=0;s<t.length;s++)i.push(t[s]);else for(n in t)i[n]=t[n];if(null!==e)if(e.length&&"number"==typeof e.length)for(s=0;s<e.length;s++)i.push(e[s]);else for(n in e)i[n]=e[n];return i};Eggshell.namespace("enableErrorHandling",function(t){return handleError=!!t,Eventbus.enableErrorHandling(t),Eggshell}),Eggshell.namespace("enableStrictMode",function(t){return strictMode=!!t,Eggshell}),Eggshell.namespace("define",function(e,i,n){var t=function(t,e,i){if(2==arguments.length&&(Logger.debug(t+" definition is depreciated. Component definition contains class, config, and implementation."),i=e,e=null),"function"==typeof e&&void 0===i&&(Logger.debug(t+" definition is depreciated. Component definition contains class, config, and implementation."),i=e,e=null),"string"!=typeof t||!t)throw"Invalid class. It must be a string.";if("function"!=typeof i||!i)throw"Invalid constructor. It must be a function.";if(e&&e.interface){var n=e.interface;if(!(e=InterfaceRegistry.get(e.interface,e)))throw"Unrecognized interface "+n}return DefinitionRegistry.exist(t)?e.force_replace&&(DefinitionRegistry.register(t,{config:e,constructor:i},!0),Logger.debug("Component defined. Forced replace",t,e,i)):(DefinitionRegistry.register(t,{config:e,constructor:i}),Logger.debug("Component defined.",t,e,i)),Eggshell};if(!handleError)return t(e,i,n),Eggshell;try{return t(e,i,n),Eggshell}catch(t){Logger.error('Encountered exception in "Eggshell.define".',t,e,i,n)}}),Eggshell.namespace("definition",function(e){var t=function(t){return DefinitionRegistry.get(t)};if(!handleError)return t(e);try{return t(e)}catch(t){return Logger.error('Encountered error in "Eggshell.getDefintion".',t,e,attributes),null}}),Eggshell.namespace("create",function(clazz,attributes){var create=function(clazz,attributes){if("string"!=typeof clazz||!clazz)throw"Invalid constructor id.";var config=null,singleton=!1,constructor=null,definition=DefinitionRegistry.get(clazz);definition?(config=definition&&definition.config?definition.config:{},constructor=definition.constructor,singleton=!(!config||!config.singleton)):constructor=eval(clazz);var id=null;return id=singleton?Loader.load(clazz,clazz,constructor,attributes):Loader.load(null,clazz,constructor,attributes),Eggshell.find(id)};if(!handleError)return create(clazz,attributes);try{return create(clazz,attributes)}catch(t){return Logger.error('Encountered error in "Eggshell.create".',t,clazz,attributes),new Eggshell.Shell([],[])}}),Eggshell.namespace("find",function(e){var t=function(t){var e=resolveSelector(t);if("string"!=typeof e||!e)throw"Invalid id.";for(var i=[],n=[],s=EggRegistry.getAll(),o=0;o<s.length;o++)if(s[o].getId()===e||s[o].getClass()===e){var r=s[o];i.push(r.getId()),n.push(r.getClass())}var a={},l=[];for(o=0;o<i.length;o++)a[i[o]]||(a[i[o]]=!0,l.push(i[o]));a={};var c=[],u;for(o=0;o<n.length;o++)a[n[o]]||(a[n[o]]=!0,c.push(n[o]));return new Eggshell.Shell(l,c)};if(!handleError)return t(e);try{return t(e)}catch(t){return Logger.error('Encountered error in "Eggshell.find".',t,e),new Eggshell.Shell([],[])}}),Eggshell.namespace("trigger",function(e,i,n,s){var t=function(t,e,i){var n=resolveSelector(t);if("string"!=typeof n||!n)throw"Invalid id.";if("string"!=typeof e||!e)throw"Invalid Action.";var s=getEgg(n);if(s){var o=DefinitionRegistry.get(s.getClass());if(o&&o.config&&o.config.strict&&(o.config.outputs||o.config.inputs)){var r=merge(o.config.inputs,o.config.outputs);Validator.validate(r,e,i)}s.trigger(e,i)}else Eventbus.fire(n,e,i)};if(!handleError)return t(e,i,n,s),Eggshell;try{return t(e,i,n,s),Eggshell}catch(t){Logger.error('Encountered error in "Eggshell.trigger".',t,{selector:e,action:i,payload:n,options:s})}}),Eggshell.namespace("on",function(e,i,n,s){var t=function(t,e,i,n){var s=resolveSelector(t);if("string"!=typeof s||!s)throw"Invalid id.";if("string"!=typeof e||!e)throw"Invalid Action.";if("function"!=typeof i||!i)throw"Invalid callback function.";getEgg(s)?getEgg(s).on(e,i,n):Eventbus.addListener(s,e,i,n)};if(!handleError)return t(e,i,n,s),Eggshell;try{return t(e,i,n,s),Eggshell}catch(t){Logger.error('Encountered error in "Eggshell.on".',t,{selector:e,action:i,callback:n,context:s})}}),Eggshell.namespace("off",function(e,i,n,s){var t=function(t,e,i,n){var s=resolveSelector(t);if("string"!=typeof s||!s)throw"Invalid id.";if("string"!=typeof e||!e)throw"Invalid Action.";getEgg(s)?getEgg(s).off(e,i,n):Eventbus.removeListener(s,e,i,n)};if(!handleError)return t(e,i,n,s),Eggshell;try{return t(e,i,n,s),Eggshell}catch(t){Logger.error('Encountered error in "Eggshell.off".',t,{selector:e,action:i,callback:n,context:s})}}),Eggshell.namespace("connect",function(e,i,n,s){var t=function(t,e,i,n){var s=resolveSelector(t),o=resolveSelector(i);if(n||(n=e),"string"!=typeof s||!s)throw"Invalid output id.";if("string"!=typeof e||!e)throw"Invalid output action.";if("string"!=typeof o||!o)throw"Invalid input id.";if("string"!=typeof n||!n)throw"Invalid input action.";Connector.connect(s,e,o,n)};if(!handleError)return t(e,i,n,s),Eggshell;try{return t(e,i,n,s),Eggshell}catch(t){Logger.error('Encountered error in "Eggshell.connect".',t,{outputId:e,outputAction:i,inputId:n,inputAction:s})}}),Eggshell.namespace("destroy",function(e){var t=function(t){var e=resolveSelector(t);if("string"!=typeof e||!e)throw"Invalid id.";Loader.unload(e),Eventbus.removeListener(e)};if(!handleError)return t(e),Eggshell;try{return t(e),Eggshell}catch(t){Logger.error('Encountered error in "Eggshell.destroy"',t,e)}}),Eggshell.namespace("destroyAll",function(){var t=function(){for(var t=EggRegistry.getAll(),e=null,i=0;i<t.length;i++)(e=DefinitionRegistry.get(t[i].getClass()))&&e.config&&e.config.immuneToDestroyAll||Eggshell.destroy(t[i].getId())};if(!handleError)return t(),Eggshell;try{return t(),Eggshell}catch(t){Logger.error('Encountered error in "Eggshell.destroyAll"',t,selector)}}),Eggshell.namespace("immuneToDestroyAll",function(e){var t=function(t){var e=resolveSelector(t),i=getEgg(e),n;i&&(DefinitionRegistry.get(i.getClass()).config.immuneToDestroyAll=!0)};if(!handleError)return t(e),Eggshell;try{return t(e),Eggshell}catch(t){Logger.error('Encountered error in "Eggshell.immuneToDestroyAll"',t,e)}}),Eggshell.namespace("getInterface",InterfaceRegistry.get),Eggshell.namespace("defineInterface",InterfaceRegistry.set),Eggshell.namespace("createOnce",function(clazz,attributes){Logger.debug('Depreciated. Use "Eggshell.create" and "singleton" flag instead. Old API will be decommissioned in the next major release.');var create=function(clazz,attributes){if("string"!=typeof clazz||!clazz)throw"Invalid constructor id.";var config=null,singleton=!1,constructor=null,definition=DefinitionRegistry.get(clazz);definition?(config=definition&&definition.config?definition.config:{},constructor=definition.constructor,singleton=!(!config||!config.singleton)):constructor=eval(clazz);var id=null;return id=Loader.load(clazz,clazz,constructor,attributes),Eggshell.find(id)};if(!handleError)return create(clazz,attributes);try{return create(clazz,attributes)}catch(t){return Logger.error('Encountered error in "Eggshell.createOnce".',t,clazz,attributes),new Eggshell.Shell([],[])}}),Eggshell.namespace("getDefinition",function(t){return Logger.debug('Depreciated. Use "Eggshell.definition". Old API will be decommissioned in the next major release.'),Eggshell.definition(t)}),Eggshell.namespace("shell",function(t){return Logger.debug('Depreciated. Use "Eggshell.find". Old API will be decommissioned in the next major release.'),Eggshell.find(t)}),Eggshell.namespace("output",function(t,e,i,n){return Logger.debug('Depreciated. Use "Eggshell.trigger". Old API will be decommissioned in the next major release.'),Eggshell.trigger(t,e,i,n)}),Eggshell.namespace("listen",function(t,e,i,n){return Logger.debug('Depreciated. Use "Eggshell.on". Old API will be decommissioned in the next major release.'),Eggshell.on(t,e,i,n)}),Eggshell.namespace("bind",Eggshell.listen),Eggshell.namespace("input",Eggshell.listen),Eggshell.namespace("stopListening",function(t,e,i,n){return Logger.debug('Depreciated. Use "Eggshell.off". Old API will be decommissioned in the next major release.'),Eggshell.off(t,e,i,n)}),Eggshell.namespace("unbind",Eggshell.stopListening),Eggshell.namespace("disconnect",Eggshell.stopListening)}),Eggshell.module("Shell",["Logger","Api"],function(s,t){var e=function(t,e){var r=[];if("string"==typeof t)r.push(t);else for(var i=0;i<t.length;i++)r.push(t[i]);this.eggshell=!0,this.getId=function(){return r[0]},this.getClass=function(){return e[0]},this.trigger=function(t,e){for(var i=0;i<r.length;i++)Eggshell.trigger(r[i],t,e);return this},this.on=function(t,e,i,n){for(var s=0;s<r.length;s++){var o=r[s];Eggshell.on(o,t,e,i,n)}return this},this.off=function(t,e,i,n){for(var s=0;s<r.length;s++)Eggshell.off(r[s],t,e,i,n);return this},this.connect=function(t,e){for(var i=0;i<r.length;i++)for(var n=0;n<e.length;n++)Eggshell.connect(r[i],t,e[n].selector,e[n].action);return this},this.destroy=function(){for(var t=0;t<r.length;t++)Eggshell.destroy(r[t]);return null},this.getNs=function(){return s.debug('Depreciated function. Use "Shell.getId()". Old API will be decommissioned in the next major release.'),this.getId()},this.getNamespace=function(){return s.debug('Depreciated function. Use "Shell.getId()". Old API will be decommissioned in the next major release.'),this.getId()},this.getConstructorNamespace=function(){return s.debug('Depreciated function. Use "Shell.getClass". Old API will be decommissioned in the next major release.'),this.getClass()},this.listen=function(t,e,i,n){return s.debug('Depreciated function. Use "Shell.on". Old API will be decommissioned in the next major release.'),this.on(t,e,i,n)},this.input=function(t,e,i,n){return s.debug('Depreciated function. Use "Shell.on". Old API will be decommissioned in the next major release.'),this.on(t,e,i,n)},this.output=function(t,e){return s.debug('Depreciated function. Use "Shell.trigger(action, payload, context)". Old API will be decommissioned in the next major release.'),this.trigger(t,e)},this.stopListening=function(t,e,i,n){return s.debug('Depreciated function. Use "Shell.off(action, payload, context, options)". Old API will be decommissioned in the next major release.'),this.off(t,e,i,n)},this.disconnect=function(t,e,i,n){return s.debug('Depreciated function. Use "Shell.off(action, payload, context, options)". Old API will be decommissioned in the next major release.'),this.off(t,e,i,n)}};return Eggshell.namespace("Shell",e),e}),Eggshell.module("Connector",["Logger","Eventbus"],function(u,h){return this.connect=function(t,e,i,n){var s=(r=t,a=e,l=i,c=n,{connect:function(t,e){var i=r,n=a,s=l,o=c;"*"===n&&(n=t.action),"*"===o&&(o=n),u.debug("Routing event. ",{input:{channel:s,action:o},output:{channel:i,action:n}}),h.fire(s,o,e,t.chain)}}),r,a,l,c;h.addListener(t,e,s.connect,s),u.debug("Connector created.",s)},this}),Eggshell.module("Egg",["Logger","Eventbus"],function(t,d){var e;return function(a,t){var l=null,c=!1,e=[],u=function(t){e[e.length]=t},h=function(){for(;e.length;){var t=e[0];delete e[0],e.splice(0,1),t.call(this)}e=[]};this.getId=function(){return a},this.getClass=function(){return t},this.ready=function(t){l=t,c=!0,h(),delete this.ready,delete this.setContext},this.destroy=function(){e=c=l=null},this.trigger=function(t,e){var i,n,s;u((i=a,n=t,s=e,function(){d.fire(i,n,s)})),c&&h()},this.on=function(t,e,i){var n,s,o,r;u((n=a,s=t,o=e,r=i,function(){r||(r=l),"*"===s?d.addListener(n,"*",o,r):d.addListener(n,s,o,r)})),c&&h()},this.off=function(t,e,i){var n,s,o;return i||(i=l),u((n=a,s=t,(o=i)||(o=l),function(){d.removeListener(n,s,e,o)})),c&&h(),this}}}),Eggshell.module("Event",[],function(){return function(t,e,i){this.channel=t,this.action=e,this.chain=i,this.namespace=t}}),Eggshell.module("Interceptor",[],function(){return function(t,e,i){this.Event=t,this.callback=e,this.context=i}}),Eggshell.module("Eventbus",["Logger","Event","Interceptor","Listener"],function(c,u,r,a){var h=!0,d={},g={};return this.enableErrorHandling=function(t){h=!!t},this.fire=function(t,e,i,n){i=null!=i?i:{},(n=null!=n?n:[]).push(new u(t,e));var s=new u(t,e,n);if(c.debug("Event fired.",s.channel,s.action,i),g[s.channel]&&g[s.channel][s.action]){var o=g[s.channel][s.action];if(h)try{o.callback.apply(o.context,i),c.debug("Interceptor fired.",o)}catch(t){c.error("Interceptor error.",t,s.channel,s.action,o)}else o.callback.apply(o.context,i),c.debug("Interceptor fired.",o)}else if(d){var r=[];d["*"]&&(d["*"]["*"]&&(r=r.concat(d["*"]["*"])),d["*"][s.action]&&(r=r.concat(d["*"][s.action]))),d[s.channel]&&(d[s.channel]["*"]&&(r=r.concat(d[s.channel]["*"])),d[s.channel][s.action]&&(r=r.concat(d[s.channel][s.action])));for(var a=0;a<r.length;a++){var l=r[a];if(h)try{l.callback.call(l.context,s,i),c.debug("Listener fired.",s.channel,s.action,l)}catch(t){c.error("Listener error.",t,s.channel,s.action,l)}else l.callback.call(l.context,s,i),c.debug("Listener fired.",s.channel,s.action,l)}}},this.addInterceptor=function(t,e,i,n){var s=new u(t,e),o=new r(s,i,n);g[t]||(g[t]={}),g[t][e]=o,c.debug("Interceptor added.",t,e,o,n)},this.removeInterceptor=function(t,e){g[t]||(g[t]={}),delete g[t][e],c.debug("Interceptor removed",t,e)},this.addListener=function(t,e,i,n){var s=new u(t,e),o=new a(s,i,n);d[t]||(d[t]={}),d[t][e]||(d[t][e]=[]),d[t][e].push(o),c.debug("Listener added.",t,e,o,n)},this.removeListener=function(t,e,i,n){if(d[t])if(e&&"string"==typeof e){var s=d[t][e];if(s)for(var o=0;o<s.length;o++){var r=s[o];if(i){if(!n&&r.callback===i){delete r[o],s.splice(o,1),c.debug("Listener removed",t,e,i);break}if(r.callback===i&&r.context===n){delete r[o],s.splice(o,1),c.debug("Listener removed",t,e,i,n);break}}else delete r[o],s.splice(o,1),c.debug("Listeners removed",t,e)}}else delete d[t],d[t]={},c.debug("Listeners removed",t)},this}),Eggshell.module("Listener",[],function(){return function(t,e,i){this.Event=t,this.callback=e,this.context=i}}),Eggshell.module("Loader",["Logger","Egg","ComponentRegistry","EggRegistry"],function(a,l,c,u){var t=0,h=null,d=null,g=function(){return"eggshell."+ ++t};return this.getShellInProgress=function(){return h},this.load=function(t,e,i,n){if(t){if(c.exist(t))return c.get(t)}else if(t=g(),c.exist(t))throw"Component id is already taken";var s=new l(t,e);u.register(t,s);var o=new Eggshell.Shell(t,e);h=o,i.prototype.Eggshell=o,i.prototype.shell=o,"object"==typeof n&&(n.shell=o);var r=null;return r=d&&d.instantiate?d.instantiate(t,e,i,n):new i(n),c.register(t,r),r.Eggshell=o,r.shell=o,s.ready(r),s.trigger("initialize",n),a.debug("Component loaded",t,r),h=null,t},this.unload=function(t){var e=u.get(t);if(e){e.trigger("destroy"),u.unregister(t);var i=c.get(t);d&&d.destroy&&d.destroy(t,i),c.unregister(t)}},Eggshell.namespace("loader.setFactory",function(t){d=t}),this}),Eggshell.module("ComponentRegistry",["Registry"],function(t){return new t("ComponentRegistry")}),Eggshell.module("DefinitionRegistry",["Registry"],function(t){return new t("DefinitionRegistry")}),Eggshell.module("EggRegistry",["Registry"],function(t){return new t("EggRegistry ")}),Eggshell.module("InterfaceRegistry",[],function(){var n={},t,e;function s(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]?e[i]instanceof Array&&t[i]instanceof Array?t[i]=t[i].concat(e[i]):"object"==typeof e[i]?s(t[i],e[i]):t[i]=e[i]:t[i]=e[i]);return t}return{set:function(t,e){return n[t]=e,Eggshell},get:function(t,e){var i=n[t];return i?e?s(e,i):i:null}}}),Eggshell.module("Registry",["Logger"],function(o){var t;return function(n){var s={};this.exist=function(t){return!!s[t]},this.getAll=function(){var t=[];for(var e in s)t.push(s[e]);return t},this.get=function(t){return this.exist(t)?s[t]:null},this.register=function(t,e,i){if(!i&&this.exist(t))throw'Key "'+t+'" already taken';s[t]=e,o.debug("Object registered in registry "+n,t,e)},this.unregister=function(t){delete s[t],o.debug("Object unregistered in registry "+n,t)}}}),Eggshell.module("ComponentResourceRegistry",["Registry"],function(t){return new t("EggRegistry ")}),Eggshell.module("Validator",["Logger"],function(t){return this.validate=function(t,e,i){if(this.detectMethod(i))throw"Payload cannot contain functions";if(null!==t){if("object"!=typeof t)throw"Invalid input / output configuration";var n;if("number"==typeof t.length){for(var s=0;s<t.length;s++)if((n=t[s])===e)return;throw"Action not found in component configuration."}for(n in t)if(n===e){var o=t[n];if(null===o||void 0===o.payload||null===o.payload)return;if(null===o.payload)return;if(this.validateStructure(o.payload,i))return;throw"Payload does not confirm to data structure."}throw"Action not found in component configuration."}},this.validateStructure=function(t,e){if("string"==typeof t)return typeof e===t;if("object"!=typeof t)throw"Structure type is not supported. It can either be a native type as a string value or an object of native types.";for(var i in t){var n=t[i];if(!this.validateStructure(n,e[i]))return!1}return!0},this.detectMethod=function(t){if("function"==typeof t)return!0;if("object"!=typeof t)return!1;for(var e in t)if(!0===this.detectMethod(t[e]))return!0;return!1},this}),window.Eggshell=window.Eggshell?window.Eggshell:Eggshell}(window),Eggshell.module("Marker",["Api","DefinitionRegistry","ComponentRegistry"],function(t,o,r){Eggshell.on("*","initialize",function(t){var e=t.channel;shell=Eggshell.find(e);var i=shell.getClass(),n=o.get(i);if(n&&n.config&&n.config.markers){!0===n.config.strict&&n.config.outputs&&($.isArray(n.config.outputs)?n.config.outputs=$.merge(n.config.outputs,["place markers"]):n.config.outputs["place markers"]=null);var s=r.get(e);shell.on("place markers",function(){var t=this.id,e=this.clazz,i=this.component,n=this.markers;for(var s in n){var o=n[s].automation;if($el=i.$(s),$el.length<=0)throw'Marker "'+s+'" not found in component "'+t+'".';escapeCss=function(t){return t=t.replace(/[!\"#$%&'\(\)\*\+,\.\/:;<=>\?\@\[\\\]\^`\{\|\}~]/g,"-").replace(/\s/g,"-")},$el.addClass("chg-test-"+escapeCss(e)+"-"+escapeCss(o))}},{component:s,markers:n.config.markers,id:e,clazz:i})}},this)}),function(p,f){var o=p.document,s=p.location,d=function(t,e){t=t.split(".");for(var i=p.C,n,s,o=0;o<t.length;o++){var r=t[o];i=(n=i)[s=r]||(i[r]={})}return e!==f&&(n[s]=e),i},t;d.utility=function(){return self},d.utility.exists=function(t,e){e=e.split(".");for(var i=t,n=0;n<e.length;n++){var s=e[n];if(i[s]===f)return!1;i=i[s]}return!0},d.utility.access=function(t,e){var i=e||p,n;t=t.split(".");for(var s=0;s<t.length;s++){if(i[n=t[s]]===f)return f;i=i[n]}return i},d.utility.getMaxIndex=function(){for(var t=$("body").children(),e=[1e3],i=0;i<t.length;i++)e.push(+$(t[i]).css("z-index")||0);var n;return d.utility.max(e)},d.utility.updateCsrfToken=function(t,e,i){var e=void 0!==e?e:"/",i=void 0!==i&&i,n;$.ajax({url:e+"_ajax/global/init",type:"post",dataType:"json",xhrFields:{withCredentials:!0},success:(n=t,function(t){t.token!==d.global.csrfToken&&(d.global.csrfToken=t.token),t.facebookId&&i&&d("global.facebookAppId",t.facebookId),n&&n()})})},d.utility.loadScript=function(t,e,i){var n=o.createElement("script");return n.setAttribute("type","text/javascript"),n.setAttribute("charset","utf-8"),n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,e())}:n.onload=function(){e()},n.src=t,o.getElementsByTagName("head")[0].appendChild(n),i&&d.dom.$window.one("pageunload",function(){n.parentNode.removeChild(n)}),n},d.utility.max=function(t){return Math.max.apply(Math,t)},d.utility.min=function(t){return Math.min.apply(Math,t)},d.utility.addCommasToInt=function(t){var e=t.toString();return e.match(/\D/)?null:e=e.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")},d.utility.processPlaceholders=function(){var t;$("[placeholder]").each(function(){var t=$(this),e=t.attr("placeholder");t.placeholder(e)})},d.utility.json2UriParams=function(t){var e=[];for(var i in t)t[i]&&e.push(i+"="+encodeURIComponent(t[i]));return e.join("&")},d.utility.getParams=function(){return d.utility.getParamsByUrl(p.location.href)},d.utility.getParamsByUrl=function(t){var e={},i=t.indexOf("?");if(-1==i)return e;var n=t.indexOf("#"),s;0<n&&(t=t.slice(0,n)),t=(t=t.substr(i+1,t.length)).split("&");for(var o=0;o<t.length;o++)(s=t[o].split("="))[0]=decodeURIComponent(s[0]),s[1]=s[1]==f?1:decodeURIComponent(s[1]),e[s[0]]?("[object Array]"!=Object.prototype.toString.call(e[s[0]])&&(e[s[0]]=[e[s[0]]]),e[s[0]].push(s[1])):e[s[0]]=s[1];return e},d.dump=function(){if(!(-1<top.location.href.indexOf("www.chegg.com"))){for(var t=0,e=arguments.length;t<e;t++)d.log("Variable type: "+Object.prototype.toString.call(arguments[t])),d.log("Variable value: ",arguments[t]);d.log(d.log.divider(10)+" Stacktrace "+d.log.divider(10)),console.trace()}},d.log=function(){null!=d.utility.getCookie("logging")&&Function.prototype.bind&&console&&console.log&&Function.prototype.bind.call(console.log,console).apply(console,arguments)},d.log.divider=function(t){for(var e="",i=0;i<t;i++)e+="=";return e},d.utility.clone=function(t,e){if(null==t||"object"!=typeof t)return t;var i=new t.constructor;for(var n in t)e&&-1!=n.indexOf(e)||(i[n]=this.clone(t[n]));return i},d.utility.bookCover=function(t,e,i){i=$.extend({cart:!1,readNowCornerVersion:!1,isOverdue:!1,overdueCornerVersion:!1},i),t=$.extend({},t);var n="",s="",o="",r="",a="";switch(e){case 1:case 2:n=t.imgThumb,r="small",a="tiny";break;case 3:n=t.imgSmall,a=r="small";break;case 4:n=t.imgMedium,r="small",a="medium";break;case 5:n=t.imgLarge,a=r="large"}if(n&&0!==n.indexOf("http")&&0!==n.indexOf("//")&&-1===n.indexOf(d.global.coversBaseUrl)&&(n=d.global.coversBaseUrl+this.makeImagesProtocolRelative(n).replace(/^\//,"")),i.hasOwnProperty("type")&&i.type==d.utility.bookCover.tbsType){var l;switch(o='<div class="tbs-book-cover '+a+'"> ',!0){case null!=n:l='<img class="tbs-book-cover-img" src="'+this.makeImagesProtocolRelative(n)+'" onerror="this.src=\''+d.global.errorImage+"'\" />";break;default:l='<span class="tbs-title">Solutions</span>'}o+=l,o+='<div class="tbs-bottom-line">by </div></div>'}else if(i.type==d.utility.bookCover.accessCodeType){var l;switch(o='<div class="access-code-book-cover '+a+' orange-banner">',!0){case null!=n:l='<img class="access-code-book-cover-img" src="'+this.makeImagesProtocolRelative(n)+'" onerror="this.src=\''+d.global.errorImage+"'\" />";break;default:l='<span class="access-code-title">Access Code</span>'}o+=l,o+="</div>"}else{var c="";if(i.cart&&(c="id=book-in-review"),d.utility.isMobile()){var u="";if(_.isObject(i)){switch(!0===i.isSample&&(u="sample "),!0){case!0===i.isOverdue:u+="overdue";break;case!0===i.isRwyw:u+="rwyw";break;case!0===i.isETextbook:u+="etextbook"}"small"==r&&(u+=r)}o='<div class="book-cover '+u+'"><img src="'+this.makeImagesProtocolRelative(n)+'" onerror="this.src="'+d.global.errorImage+'"></div>'}else{var h="";null!=i&&(void 0!==i.isReadNow&&i.isReadNow?(s='<div class="read-now-strip"></div>',void 0!==i.readNowCornerVersion&&i.readNowCornerVersion&&(s='<div class="read-now-corner '+r+'"></div>')):void 0!==i.isOverdue&&i.isOverdue?(s='<div class="overdue-strip"></div>',void 0!==i.overdueCornerVersion&&i.overdueCornerVersion&&(s='<div class="overdue-corner '+r+'"></div>')):void 0!==i.isRwyw&&i.isRwyw?s=void 0!==i.stripVersion&&i.stripVersion?'<div class="img-courtesy-etextbook-overlay"></div>':'<div class="instant-access">Includes free <span>Instant Access</span></div>':void 0!==i.showRwywOverlay&&i.showRwywOverlay&&(h='<div id="rwyw-book-overlay-100" class="icn icon-chegg-etb-courtesy"/>')),o="<div "+c+' class="book-img-'+e,i&&i.noBoxShadow&&(o+=" noBoxShadow"),o+='"><img class="book-cover" src="'+this.makeImagesProtocolRelative(n)+'" onerror="this.src=\''+d.global.errorImage+"'\" />",o+=h+s+"</div>"}}return o},d.utility.bookCover.dropdown=1,d.utility.bookCover.thumb=2,d.utility.bookCover.small=3,d.utility.bookCover.medium=4,d.utility.bookCover.large=5,d.utility.bookCover.bookType="book",d.utility.bookCover.tbsType="tbs",d.utility.bookCover.accessCodeType="accessCode",d.utility.openGlobalNav=function(t){Eggshell.find("C.global.nav").trigger("expand navigation bar")},d.utility.closeGlobalNav=function(t){Eggshell.find("C.global.nav").trigger("collapse navigation bar")},d.utility.reflowSubNav=function(){$(".chg-nav").css({width:d.dom.$content.width()})},d.utility.showTower=function(){$(".chg-container").addClass("has-tower"),d.utility.reflowSubNav()},d.utility.hideTower=function(){$(".chg-container").removeClass("has-tower"),d.utility.reflowSubNav()},d.utility.makeImagesProtocolRelative=function(t){return t.replace("http:","").replace("https:","")},function(){var e={},t=["$","_","Backbone","C","Class","console","History","jQuery","swfobject","matchMedia","CRITEO","_FirebugCommandLine","FxFrames","Fx","MathJax","SelectParser","AbstractChosen","get_side_border_padding","SkypeClick2Call","tinyMCE","tinymce","cheggmathjax","WebFont","WebFontConfig","insertSteps","allocatedAxes","ctx","startAngle","FB","fbAsyncInit","fb_xdm_frame_http","fb_xdm_frame_https","BrightTag","btServe","bt_parameter","bt_meta","bt_data","bt_data_escaped","bt_log","bt_handle_exception","_bt_url_prefix","_bt_referrer","_bt_site","_bt_mode"];for(var i in p)e[i]=1;for(var n=0;n<t.length;n++)e[t[n]]=1;d.utility.checkPollution=function(){for(var t in p)e[t]||0===t.indexOf("jQuery")||d.log("pollution of window."+t)}}(),d.utility.navigate=function(e,i){if(d.global.adTargeting={},void 0!==d.dom&&void 0!==d.dom.$window)var t=d.dom.$window.triggerHandler("beforeunload");if(t!==f){var n;if(!confirm(t+"\n\nAre you sure you want to leave this page?"))return;void 0!==d.dom&&void 0!==d.dom.$window&&d.dom.$window.unobserve("beforeunload",this)}if(d.global.navigationOptimization&&!d.utility.isAjaxLoadable(e))return i?s.replace(e):s.href=e,!1;if(History.enabled&&d.global.ajaxPageLoading)try{e!=s.href?i?History.replaceState(null,null,e):History.pushState(null,null,e):d.utility._handleRequest(e)}catch(t){i?s.replace(e):s.href=e}else i?s.replace(e):s.href=e},d.utility.isAjaxLoadable=function(t){var e=!0,i=d.utility.parseUrl(t),n=i.host,s=i.path;if(n){var o,r=n.split(".")[0];-1<n.indexOf("chegg.com")&&"www"!==r&&(e=!1)}return s&&(-1<s.indexOf("/tutors")||-1<s.indexOf("/jobs"))&&(e=!1),e},d.utility.parseUrl=function(t){for(var e=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],i,n=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),s={},o=14,r=!1;o--;)n[o]&&(s[e[o]]=n[o]);if(s.path){var a=s.path.split("/");"_ajax"===(s.splits=a)[1]&&(r=!0)}return s.isAjax=r,s},d.utility.refresh=function(){d.utility.navigate(s.href)},d.utility.replace=function(t){d.utility.navigate(t,!0)},d.utility.escapeRegEx=function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},d.utility.escapeHtml=function(t){return $("<div/>").text(t).html()},d.utility.serializeFormToJson=function(t){var e,i=(t.jQuery?t:$(t)).serializeArray(),s={};return $.each(i,function(t,e){var i=e.name,n=e.value;s[i]=s[i]===f?n:$.isArray(s[i])?s[i].concat(n):[s[i],n]}),s},d.utility.appendCSRFToken=function(t){if(t.length&&0===t.find('input[name="token"]').length){var e=$('<input name="token" type="hidden" />').val(d.global.csrfToken);t.append(e)}return t},d.utility.getMyUniversityIsNotListedId=function(){return"a0000000-0000-0000-0000-000000000000"},d.utility.attrSupportedByEl=function(t,e){var i=d.utility.attrSupportedByEl.cache[t]||o.createElement(t);return d.utility.attrSupportedByEl.cache[t]||(d.utility.attrSupportedByEl.cache[t]=i),e in i},d.utility.attrSupportedByEl.cache={},d.utility.rgba2rgb=function(t){var e=t.match(/rgba\((.+)\)/);return e?((e=e[1].split(",")).pop(),"rgb("+e.join(",")+")"):t},d.utility.unique=function(t){var e=[];t:for(var i=0,n=t.length;i<n;i++){for(var s=i+1;s<n;s++)if(t[s]===t[i])continue t;e.push(t[i])}return e},d.utility.isCookieAllowed=function(t){if(!d.global.cookieCategories)return!0;var e={necessary:"snc",performance:"prf",functional:"fnc",targeting:"trg",social:"soc"};if(!this.cookiesList){var i;this.cookiesList={};try{i=JSON.parse(d.global.cookieCategories)}catch(t){}_.each(i,function(t,e){t&&_.each(t.split(","),function(t){this.cookiesList[t]=e},this)},this)}var n=!1,s=this.cookiesList[t]||"functional",o=e[s];if("necessary"===s)n=!0;else if(p.OptanonActiveGroups)n=-1<p.OptanonActiveGroups.split(",").indexOf(o);else{var r=this.getParamsByUrl("?"+this.getCookie("OptanonConsent"));n=r.groups?-1<r.groups.split(",").indexOf(o+":1"):!d.global.cookieLazyBlock}return n},d.utility.setCookie=function(t,e,i){if(d.utility.isCookieAllowed(t)){var n=new Date;n.setTime(n.getTime()+864e5*i);var s=escape(e)+(null==i?"":";expires="+n.toUTCString())+";path=/";o.cookie=t+"="+s+";domain="+(d.global.cookieDomain||COOKIE_DOMAIN)}},d.utility.getCookie=function(t){var e,i,n,s=o.cookie.split(";");for(e=0;e<s.length;e++)if(i=s[e].substr(0,s[e].indexOf("=")),n=s[e].substr(s[e].indexOf("=")+1),(i=i.replace(/^\s+|\s+$/g,""))==t)return unescape(n)},d.utility.setLastOrderKey=function(){var t=d.utility.getCookie("O");t&&void 0!==t&&(digitalData.user=digitalData.user||{},digitalData.user.profile=digitalData.user.profile||{},digitalData.user.profile.profileInfo=digitalData.user.profile.profileInfo||{},digitalData.user.profile.profileInfo.attributes=digitalData.user.profile.profileInfo.attributes||{},digitalData.user.profile.profileInfo.attributes.lastOrderKey=t)},d.utility.setLocal=function(t,e,i){return i||(i=864e5),$.jStorage.set(t,e,{TTL:i})},d.utility.getLocal=function(t,e){return $.jStorage.get(t,e)},d.utility.deleteLocal=function(t){return $.jStorage.deleteKey(t)},d.utility.listLocal=function(){return $.jStorage.index()},d.utility.getActiveExperiments=function(){var t=d.utility.getCookie("exp");return t&&t.length?t.toUpperCase().split("|"):[]},d.utility.dataLogger=function(){var t=d.utility.getCookie("V"),e=d.utility.getCookie("exp");e.toUpperCase();var i={uvn:t,pageTrackId:d.logger.pageTrackId,experiments:e,userUuid:d.global.userUuid};return $.extend({},i)},d.utility.updateCart=function(i){$.ajax({url:"/_ajax/cart/count",complete:function(t){var e={};try{e=JSON.parse(t.responseText)}catch(t){e={items:0}}0==e.items||null==e.items?($(".chg-cart-area").css({display:"none"}),$(".hide-with-cart").css({display:"none"})):($(".chg-cart-count").text(e.items),null==e.items&&$(".chg-cart-count").text(0),$(".chg-cart-area").css({display:"inline-block"}),$(".hide-with-cart").css({display:"inline-block"})),"function"==typeof i&&i(e)}})},d.utility.zeroPad=function(t,e){e=e||10;var i=String(e).length-String(t).length+1;return 0<i?new Array(i).join("0")+t:t},d.utility.getMessage=function(t,e,i,n){return'<div class="'+t+'"><div class="msg-icon">'+(i=i?'<div class="msg-header">'+i+"</div>":"")+'<div class="msg-text">'+e+(n=n?'<span class="msg-close"></span>':"")+"</div></div></div>"},d.utility.showCsrfMessage=function(){d.utility.csrfMessageDialog||(d.utility.csrfMessageDialog=Eggshell.create("C.Eggshell.dialog",{el:$("body")}),Eggshell.immuneToDestroyAll(d.utility.csrfMessageDialog));var t=d.utility.csrfMessageDialog;Eggshell.trigger(t,"set headline","Action could not be completed"),Eggshell.trigger(t,"hide sub headline"),Eggshell.trigger(t,"hide icon"),Eggshell.trigger(t,"set content html","Your session has expired due to inactivity. Please refresh the page."),Eggshell.trigger(t,"show")},d.utility.isISBN10=function(t){if(10!=(t=t.replace(/[^\dxX]/g,"")).length)return!1;var e=t.split("");"X"==e[9].toUpperCase()&&(e[9]=10);for(var i=0,n=0;n<e.length;n++)i+=(10-n)*parseInt(e[n]);return i%11==0},d.utility.isISBN13=function(t){if(13!=(t=t.replace(/[^\d]/g,"")).length)return!1;for(var e=t.split(""),i=0,n=0;n<13;n+=2)i+=parseInt(e[n]);for(var s=1;s<12;s+=2)i+=3*parseInt(e[s]);return 0==i%10},d.utility.ordinal=function(t){var e=Math.abs(t)%10,i;return t+(Math.abs(t)%100<21&&4<Math.abs(t)%100?"th":e<4?e<3?e<2?e<1?"th":"st":"nd":"rd":"th")},d.utility.highlightText=function(t,e){var i="chg-suggest-term",n='<span class="'+i+'"> $1</span>',s=(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),o,r=new RegExp("("+s+")","gi");if(-1===(o=t.replace(r,n)).indexOf(i)){var a=s.trim().replace(/\s+/g," ").split(" "),l=new RegExp("[&]?\\b("+a.join("\\b|")+")","gi");o=t.replace(l,function(t,e){var i=new RegExp("("+t+")","gi");return 0===t.indexOf("&")?t:t.replace(i,n)})}return o},d.utility.loadCss=function(t){var e=o.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",t),o.getElementsByTagName("head")[0].appendChild(e)},d.utility.isAdBlock=function t(e,i){var i=void 0!==i?i:"/s/_global/adframe.js";function n(t){o(!1)}function s(t){o(!0)}function o(t){d.global.isAdBlock=t,e&&e(t)}d.utility.loadScript(i,n,!0).onerror=s},d.utility.isFFInIncognitoMode=function t(){var e;d.global.isFFInIncognitoMode=!1,"MozAppearance"in o.documentElement.style&&(indexedDB.open("test").onerror=function(){d.global.isFFInIncognitoMode=!0})},d.utility.cleanInput=function(t){return t.replace(/<(?:.|\n)*?>/gm,"")},d.utility.isMobile=function t(){return t.val===f&&(t.val=$("body").hasClass("mobile")),t.val},d.utility.isIOS=function t(){if(t.val===f){var e=navigator.userAgent.toLowerCase();t.val=e.match(/iPad/i)||e.match(/iPhone/i)||e.match(/iPod/i)}return t.val},d.utility.isAndroid=function t(){if(t.val===f){var e=navigator.userAgent.toLowerCase();t.val=-1<e.indexOf("android")}return t.val},d.utility.isIE=function t(){return t.val===f&&(t.val=o.documentMode||/Edge/.test(navigator.userAgent)),t.val},d.utility.isEdge=function t(){return t.val===f&&(t.val=-1!==navigator.userAgent.indexOf("Edge")),t.val},d.utility.setSessionVariable=function(t,e,i){$.ajax({url:"/_ajax/common/session/set",type:"get",dataType:"json",data:{key:t,value:e,token:d.global.csrfToken},success:i,error:function(t){console.log("Error setting session variable. "+JSON.stringify(t))}})},d.utility.getSessionVariable=function(t,e){$.ajax({url:"/_ajax/common/session/get",type:"get",dataType:"json",data:{key:t,token:d.global.csrfToken},success:e,error:function(t){d.log("Error retrieving session variable. "+JSON.stringify(t))}})},d.utility.setSessionVariables=function(t,e){$.ajax({url:"/_ajax/common/session/set/bulk",type:"get",data:{pairs:t,token:d.global.csrfToken},success:e,error:function(t){console.log("Error setting session variables. "+JSON.stringify(t))}})},d.utility.setUserKvp=function(t,e,i){$.ajax({url:"/_ajax/common/userkvp/set",type:"get",dataType:"json",data:{key:t,value:e,token:d.global.csrfToken},success:i,error:function(t){d.log("Error setting user kvp value. "+JSON.stringify(t))}})},d.utility.doRioLogEvent=function(t,e,i,n,s){var o=d&&d.global&&d.global.clusterPrefix?"/"+d.global.clusterPrefix:"",r={eventName:t||"",eventPayload:e||{},eventVersion:i||"",eventSource:n||"",pageName:digitalData&&digitalData.page&&digitalData.page.pageInfo?digitalData.page.pageInfo.pageName:""};$.ajax({method:"POST",url:o+"/_ajax/log/rio/",data:r,error:function(t){console.log("Error logging event in Rio:",JSON.stringify(r),t)},complete:function(){s&&s()}})},d.utility.getSubsPriceData=function(t){$.ajax({url:"/_ajax/hwh/subscription/",type:"get",dataType:"json",data:{token:d.global.csrfToken},success:t,error:function(t){d.log("Error in getting subscription price data: "+JSON.stringify(res))}})},d.utility.setAdobeExperimentVariable=function(t,e){f===d.global.adobeExperiments&&(d.global.adobeExperiments={}),d.global.adobeExperiments[t]=e},d.utility.getAdobeExperimentVariable=function(t){return f===d.global.adobeExperiments||f===d.global.adobeExperiments[t]?null:d.global.adobeExperiments[t]},d.utility.fireAdobeClickEvent=function(t){digitalData={event:[]};var e={eventName:t.eventName,eventValue:t.eventValue,eventID:t.eventID,type:"click",timeStamp:new Date};digitalData.event.push(e)},d.utility.userAgentMatch=function(t){t===f&&(t=p.navigator.userAgent),t=t.toLowerCase();var e=/(edge)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(iemobile)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||0<=t.indexOf("trident")&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],i=/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[],n={},s={browser:e[5]||e[3]||e[1]||"",version:e[2]||e[4]||"0",versionNumber:e[4]||e[2]||"0",platform:i[0]||""};if(s.browser&&(n[s.browser]=!0,n.version=s.version,n.versionNumber=parseInt(s.versionNumber,10)),s.platform&&(n[s.platform]=!0),(n.android||n.bb||n.blackberry||n.ipad||n.iphone||n.ipod||n.kindle||n.playbook||n.silk||n["windows phone"])&&(n.mobile=!0),(n.cros||n.mac||n.linux||n.win)&&(n.desktop=!0),(n.chrome||n.opr||n.safari)&&(n.webkit=!0),n.rv||n.iemobile){var o="msie";n[s.browser=o]=!0}if(n.edge){delete n.edge;var r="msedge";n[s.browser=r]=!0}if(n.safari&&n.blackberry){var a="blackberry";n[s.browser=a]=!0}if(n.safari&&n.playbook){var l="playbook";n[s.browser=l]=!0}if(n.bb){var c="blackberry";n[s.browser=c]=!0}if(n.opr){var u="opera";n[s.browser=u]=!0}if(n.safari&&n.android){var h="android";n[s.browser=h]=!0}if(n.safari&&n.kindle){var d="kindle";n[s.browser=d]=!0}if(n.safari&&n.silk){var g="silk";n[s.browser=g]=!0}return n.name=s.browser,n.platform=s.platform,n},d.utility.browser=d.utility.userAgentMatch(navigator.userAgent||p.navigator.userAgent),p.C=p.C||d}(window),JSON||(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,n,s,o,r=gap,a,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,i=0;i<o;i+=1)a[i]=str(i,l)||"null";return s=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+r+"]":"["+a.join(",")+"]",gap=r,s}if(rep&&"object"==typeof rep)for(o=rep.length,i=0;i<o;i+=1)"string"==typeof rep[i]&&(s=str(n=rep[i],l))&&a.push(quote(n)+(gap?": ":":")+s);else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(s=str(n,l))&&a.push(quote(n)+(gap?": ":":")+s);return s=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+r+"}":"{"+a.join(",")+"}",gap=r,s}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var n;if(indent=gap="","number"==typeof i)for(n=0;n<i;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if((rep=e)&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(t,e){var i,n,s=t[e];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(void 0!==(n=walk(s,i))?s[i]=n:delete s[i]);return reviver.call(t,e,s)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){var t="0.3.2",u=window.jQuery||window.$||(window.$={}),h={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(t){return String(t).evalJSON()}||u.parseJSON||u.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||u.toJSON};if(!h.parse||!h.stringify)throw new Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");var d={__jstorage_meta:{CRC32:{}}},i={jStorage:"{}"},n=null,e=0,g=!1,a={},s=!1,o=0,r={},l=+new Date,c,p={isXML:function(t){var e=(t?t.ownerDocument||t:0).documentElement;return!!e&&"HTML"!==e.nodeName},encode:function(e){if(!this.isXML(e))return!1;try{return(new XMLSerializer).serializeToString(e)}catch(t){try{return e.xml}catch(t){}}return!1},decode:function(t){var e="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(t){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e},i;return!!e&&(i=e.call("DOMParser"in window&&new DOMParser||window,t,"text/xml"),!!this.isXML(i)&&i)}},f=function(){};function m(){var t=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),t=!0,window.localStorage.removeItem("_tmptest")}catch(t){}if(t)try{window.localStorage&&(i=window.localStorage,g="localStorage",o=i.jStorage_update)}catch(t){}else if("globalStorage"in window)try{window.globalStorage&&(i=window.globalStorage[window.location.hostname],g="globalStorage",o=i.jStorage_update)}catch(t){}else{if(!(n=document.createElement("link")).addBehavior)return void(n=null);n.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(n);try{n.load("jStorage")}catch(t){n.setAttribute("jStorage","{}"),n.save("jStorage"),n.load("jStorage")}var e="{}";try{e=n.getAttribute("jStorage")}catch(t){}try{o=n.getAttribute("jStorage_update")}catch(t){}i.jStorage=e,g="userDataBehavior"}$(),T(),v("local"),v("session"),y(),I(),"addEventListener"in window&&window.addEventListener("pageshow",function(t){t.persisted&&C()},!1)}function v(e,t){var i=!1,n=0,s,o,r={},a=Math.random();if(t||void 0===window[e+"Storage"])if("local"==e&&window.globalStorage)localStorage=window.globalStorage[window.location.hostname];else if("userDataBehavior"==g){for(s in t&&window[e+"Storage"]&&window[e+"Storage"].parentNode&&window[e+"Storage"].parentNode.removeChild(window[e+"Storage"]),o=document.createElement("button"),document.getElementsByTagName("head")[0].appendChild(o),"local"==e?r=d:"session"==e&&l(),r)r.hasOwnProperty(s)&&"__jstorage_meta"!=s&&"length"!=s&&void 0!==r[s]&&(s in o||n++,o[s]=r[s]);o.length=n,o.key=function(t){var e=0,i;for(i in l(),r)if(r.hasOwnProperty(i)&&"__jstorage_meta"!=i&&"length"!=i&&void 0!==r[i]){if(e==t)return i;e++}},o.getItem=function(t){return l(),"session"==e?r[t]:u.jStorage.get(t)},o.setItem=function(t,e){void 0!==e&&(o[t]=(e||"").toString())},o.removeItem=function(t){if("local"==e)return u.jStorage.deleteKey(t);o[t]=void 0,i=!0,t in o&&o.removeAttribute(t),i=!1},o.clear=function(){"session"!=e?u.jStorage.flush():v("session",!(window.name=""))},"local"==e&&(f=function(t,e){"length"!=t&&(i=!0,void 0===e?t in o&&(n--,o.removeAttribute(t)):(t in o||n++,o[t]=(e||"").toString()),o.length=n,i=!1)}),o.attachEvent("onpropertychange",function(t){if("length"!=t.propertyName&&!i&&"length"!=t.propertyName){if("local"==e)t.propertyName in r||void 0===o[t.propertyName]||n++;else if("session"==e)return l(),void 0===o[t.propertyName]||t.propertyName in r?void 0===o[t.propertyName]&&t.propertyName in r?(delete r[t.propertyName],n--):r[t.propertyName]=o[t.propertyName]:(r[t.propertyName]=o[t.propertyName],n++),c(),void(o.length=n);u.jStorage.set(t.propertyName,o[t.propertyName]),o.length=n}}),window[e+"Storage"]=o}function l(){if("session"==e)try{r=h.parse(window.name||"{}")}catch(t){r={}}}function c(){"session"==e&&(window.name=h.stringify(r))}}function b(){var t="{}";if("userDataBehavior"==g){n.load("jStorage");try{t=n.getAttribute("jStorage")}catch(t){}try{o=n.getAttribute("jStorage_update")}catch(t){}i.jStorage=t}$(),T(),I()}function y(){"localStorage"==g||"globalStorage"==g?"addEventListener"in window?window.addEventListener("storage",C,!1):document.attachEvent("onstorage",C):"userDataBehavior"==g&&setInterval(C,1e3)}function C(){var t;clearTimeout(s),s=setTimeout(function(){if("localStorage"==g||"globalStorage"==g)t=i.jStorage_update;else if("userDataBehavior"==g){n.load("jStorage");try{t=n.getAttribute("jStorage_update")}catch(t){}}t&&t!=o&&(o=t,w())},25)}function w(){var t=h.parse(h.stringify(d.__jstorage_meta.CRC32)),e;b(),e=h.parse(h.stringify(d.__jstorage_meta.CRC32));var i,n=[],s=[];for(i in t)if(t.hasOwnProperty(i)){if(!e[i]){s.push(i);continue}t[i]!=e[i]&&"2."==String(t[i]).substr(0,2)&&n.push(i)}for(i in e)e.hasOwnProperty(i)&&(t[i]||n.push(i));x(n,"updated"),x(s,"deleted")}function x(t,e){if(t=[].concat(t||[]),"flushed"==e){for(var i in t=[],a)a.hasOwnProperty(i)&&t.push(i);e="deleted"}for(var n=0,s=t.length;n<s;n++)if(a[t[n]])for(var o=0,r=a[t[n]].length;o<r;o++)a[t[n]][o](t[n],e)}function k(){var t=(+new Date).toString();"localStorage"==g||"globalStorage"==g?i.jStorage_update=t:"userDataBehavior"==g&&(n.setAttribute("jStorage_update",t),n.save("jStorage")),C()}function $(){if(i.jStorage)try{d=h.parse(String(i.jStorage))}catch(t){i.jStorage="{}"}else i.jStorage="{}";e=i.jStorage?String(i.jStorage).length:0,d.__jstorage_meta||(d.__jstorage_meta={}),d.__jstorage_meta.CRC32||(d.__jstorage_meta.CRC32={})}function E(){N();try{i.jStorage=h.stringify(d),n&&(n.setAttribute("jStorage",i.jStorage),n.save("jStorage")),e=i.jStorage?String(i.jStorage).length:0}catch(t){}}function S(t){if(!t||"string"!=typeof t&&"number"!=typeof t)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==t)throw new TypeError("Reserved key name");return!0}function T(){var t,e,i,n,s=1/0,o=!1,r=[];if(clearTimeout(c),d.__jstorage_meta&&"object"==typeof d.__jstorage_meta.TTL){for(e in t=+new Date,i=d.__jstorage_meta.TTL,n=d.__jstorage_meta.CRC32,i)i.hasOwnProperty(e)&&(i[e]<=t?(delete i[e],delete n[e],delete d[e],o=!0,r.push(e)):i[e]<s&&(s=i[e]));s!=1/0&&(c=setTimeout(T,s-t)),o&&(E(),k(),x(r,"deleted"))}}function I(){if(d.__jstorage_meta.PubSub){for(var t,e=l,i=len=d.__jstorage_meta.PubSub.length-1;0<=i;i--)(t=d.__jstorage_meta.PubSub[i])[0]>l&&(e=t[0],_(t[1],t[2]));l=e}}function _(t,e){if(r[t])for(var i=0,n=r[t].length;i<n;i++)r[t][i](t,h.parse(h.stringify(e)))}function N(){if(d.__jstorage_meta.PubSub){for(var t=+new Date-2e3,e=0,i=d.__jstorage_meta.PubSub.length;e<i;e++)if(d.__jstorage_meta.PubSub[e][0]<=t){d.__jstorage_meta.PubSub.splice(e,d.__jstorage_meta.PubSub.length-e);break}d.__jstorage_meta.PubSub.length||delete d.__jstorage_meta.PubSub}}function j(t,e){d.__jstorage_meta||(d.__jstorage_meta={}),d.__jstorage_meta.PubSub||(d.__jstorage_meta.PubSub=[]),d.__jstorage_meta.PubSub.unshift([+new Date,t,e]),E(),k()}function L(t,e){for(var i=t.length,n=e^i,s=0,o;4<=i;)o=1540483477*(65535&(o=255&t.charCodeAt(s)|(255&t.charCodeAt(++s))<<8|(255&t.charCodeAt(++s))<<16|(255&t.charCodeAt(++s))<<24))+((1540483477*(o>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),i-=4,++s;switch(i){case 3:n^=(255&t.charCodeAt(s+2))<<16;case 2:n^=(255&t.charCodeAt(s+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(s)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0}u.jStorage={version:t,set:function(t,e,i){if(S(t),i=i||{},void 0===e)return this.deleteKey(t),e;if(p.isXML(e))e={_is_xml:!0,xml:p.encode(e)};else{if("function"==typeof e)return;e&&"object"==typeof e&&(e=h.parse(h.stringify(e)))}return d[t]=e,d.__jstorage_meta.CRC32[t]="2."+L(h.stringify(e)),this.setTTL(t,i.TTL||0),f(t,e),x(t,"updated"),e},get:function(t,e){return S(t),t in d?d[t]&&"object"==typeof d[t]&&d[t]._is_xml?p.decode(d[t].xml):d[t]:void 0===e?null:e},deleteKey:function(t){return S(t),t in d&&(delete d[t],"object"==typeof d.__jstorage_meta.TTL&&t in d.__jstorage_meta.TTL&&delete d.__jstorage_meta.TTL[t],delete d.__jstorage_meta.CRC32[t],f(t,void 0),E(),k(),x(t,"deleted"),!0)},setTTL:function(t,e){var i=+new Date;return S(t),e=Number(e)||0,t in d&&(d.__jstorage_meta.TTL||(d.__jstorage_meta.TTL={}),0<e?d.__jstorage_meta.TTL[t]=i+e:delete d.__jstorage_meta.TTL[t],E(),T(),k(),!0)},getTTL:function(t){var e=+new Date,i;return S(t),t in d&&d.__jstorage_meta.TTL&&d.__jstorage_meta.TTL[t]&&(i=d.__jstorage_meta.TTL[t]-e)||0},flush:function(){return d={__jstorage_meta:{CRC32:{}}},v("local",!0),E(),k(),x(null,"flushed"),!0},storageObj:function(){function t(){}return t.prototype=d,new t},index:function(){var t=[],e;for(e in d)d.hasOwnProperty(e)&&"__jstorage_meta"!=e&&t.push(e);return t},storageSize:function(){return e},currentBackend:function(){return g},storageAvailable:function(){return!!g},listenKeyChange:function(t,e){S(t),a[t]||(a[t]=[]),a[t].push(e)},stopListening:function(t,e){if(S(t),a[t])if(e)for(var i=a[t].length-1;0<=i;i--)a[t][i]==e&&a[t].splice(i,1);else delete a[t]},subscribe:function(t,e){if(!(t=(t||"").toString()))throw new TypeError("Channel not defined");r[t]||(r[t]=[]),r[t].push(e)},publish:function(t,e){if(!(t=(t||"").toString()))throw new TypeError("Channel not defined");j(t,e)},reInit:function(){b()}},m()}(),function(){var t=this,e=t._,r={},s=Array.prototype,i=Object.prototype,n=Function.prototype,o=s.push,a=s.slice,l=s.concat,h=i.toString,c=i.hasOwnProperty,u=s.forEach,d=s.map,g=s.reduce,p=s.reduceRight,f=s.filter,m=s.every,v=s.some,b=s.indexOf,y=s.lastIndexOf,C=Array.isArray,w=Object.keys,x=n.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.4.3";var $=k.each=k.forEach=function(t,e,i){if(null!=t)if(u&&t.forEach===u)t.forEach(e,i);else if(t.length===+t.length){for(var n=0,s=t.length;n<s;n++)if(e.call(i,t[n],n,t)===r)return}else for(var o in t)if(k.has(t,o)&&e.call(i,t[o],o,t)===r)return};k.map=k.collect=function(t,n,s){var o=[];return null==t?o:d&&t.map===d?t.map(n,s):($(t,function(t,e,i){o[o.length]=n.call(s,t,e,i)}),o)};var E="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,n,s,o){var r=2<arguments.length;if(null==t&&(t=[]),g&&t.reduce===g)return o&&(n=k.bind(n,o)),r?t.reduce(n,s):t.reduce(n);if($(t,function(t,e,i){r?s=n.call(o,s,t,e,i):(s=t,r=!0)}),!r)throw new TypeError(E);return s},k.reduceRight=k.foldr=function(n,s,o,r){var a=2<arguments.length;if(null==n&&(n=[]),p&&n.reduceRight===p)return r&&(s=k.bind(s,r)),a?n.reduceRight(s,o):n.reduceRight(s);var l=n.length;if(l!==+l){var c=k.keys(n);l=c.length}if($(n,function(t,e,i){e=c?c[--l]:--l,a?o=s.call(r,o,n[e],e,i):(o=n[e],a=!0)}),!a)throw new TypeError(E);return o},k.find=k.detect=function(t,n,s){var o;return S(t,function(t,e,i){if(n.call(s,t,e,i))return o=t,!0}),o},k.filter=k.select=function(t,n,s){var o=[];return null==t?o:f&&t.filter===f?t.filter(n,s):($(t,function(t,e,i){n.call(s,t,e,i)&&(o[o.length]=t)}),o)},k.reject=function(t,n,s){return k.filter(t,function(t,e,i){return!n.call(s,t,e,i)},s)},k.every=k.all=function(t,n,s){n||(n=k.identity);var o=!0;return null==t?o:m&&t.every===m?t.every(n,s):($(t,function(t,e,i){if(!(o=o&&n.call(s,t,e,i)))return r}),!!o)};var S=k.some=k.any=function(t,n,s){n||(n=k.identity);var o=!1;return null==t?o:v&&t.some===v?t.some(n,s):($(t,function(t,e,i){if(o||(o=n.call(s,t,e,i)))return r}),!!o)};k.contains=k.include=function(t,e){return null!=t&&(b&&t.indexOf===b?-1!=t.indexOf(e):S(t,function(t){return t===e}))},k.invoke=function(t,e){var i=a.call(arguments,2),n=k.isFunction(e);return k.map(t,function(t){return(n?e:t[e]).apply(t,i)})},k.pluck=function(t,e){return k.map(t,function(t){return t[e]})},k.where=function(t,i){return k.isEmpty(i)?[]:k.filter(t,function(t){for(var e in i)if(i[e]!==t[e])return!1;return!0})},k.max=function(t,s,o){if(!s&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!s&&k.isEmpty(t))return-1/0;var r={computed:-1/0,value:-1/0};return $(t,function(t,e,i){var n=s?s.call(o,t,e,i):t;n>=r.computed&&(r={value:t,computed:n})}),r.value},k.min=function(t,s,o){if(!s&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!s&&k.isEmpty(t))return 1/0;var r={computed:1/0,value:1/0};return $(t,function(t,e,i){var n=s?s.call(o,t,e,i):t;n<r.computed&&(r={value:t,computed:n})}),r.value},k.shuffle=function(t){var e,i=0,n=[];return $(t,function(t){e=k.random(i++),n[i-1]=n[e],n[e]=t}),n};var T=function(e){return k.isFunction(e)?e:function(t){return t[e]}};k.sortBy=function(t,e,n){var s=T(e);return k.pluck(k.map(t,function(t,e,i){return{value:t,index:e,criteria:s.call(n,t,e,i)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(n<i||void 0===i)return 1;if(i<n||void 0===n)return-1}return t.index<e.index?-1:1}),"value")};var I=function(n,t,s,o){var r={},a=T(t||k.identity);return $(n,function(t,e){var i=a.call(s,t,e,n);o(r,i,t)}),r};k.groupBy=function(t,e,i){return I(t,e,i,function(t,e,i){(k.has(t,e)?t[e]:t[e]=[]).push(i)})},k.countBy=function(t,e,i){return I(t,e,i,function(t,e){k.has(t,e)||(t[e]=0),t[e]++})},k.sortedIndex=function(t,e,i,n){for(var s=(i=null==i?k.identity:T(i)).call(n,e),o=0,r=t.length;o<r;){var a=o+r>>>1;i.call(n,t[a])<s?o=1+a:r=a}return o},k.toArray=function(t){return t?k.isArray(t)?a.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,i){if(null!=t)return null==e||i?t[0]:a.call(t,0,e)},k.initial=function(t,e,i){return a.call(t,0,t.length-(null==e||i?1:e))},k.last=function(t,e,i){if(null!=t)return null==e||i?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,i){return a.call(t,null==e||i?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var _=function(t,e,i){return $(t,function(t){k.isArray(t)?e?o.apply(i,t):_(t,e,i):i.push(t)}),i};k.flatten=function(t,e){return _(t,e,[])},k.without=function(t){return k.difference(t,a.call(arguments,1))},k.uniq=k.unique=function(i,n,t,e){k.isFunction(n)&&(e=t,t=n,n=!1);var s=t?k.map(i,t,e):i,o=[],r=[];return $(s,function(t,e){(n?e&&r[r.length-1]===t:k.contains(r,t))||(r.push(t),o.push(i[e]))}),o},k.union=function(){return k.uniq(l.apply(s,arguments))},k.intersection=function(t){var i=a.call(arguments,1);return k.filter(k.uniq(t),function(e){return k.every(i,function(t){return 0<=k.indexOf(t,e)})})},k.difference=function(t){var e=l.apply(s,a.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=a.call(arguments),e=k.max(k.pluck(t,"length")),i=new Array(e),n=0;n<e;n++)i[n]=k.pluck(t,""+n);return i},k.object=function(t,e){if(null==t)return{};for(var i={},n=0,s=t.length;n<s;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},k.indexOf=function(t,e,i){if(null==t)return-1;var n=0,s=t.length;if(i){if("number"!=typeof i)return t[n=k.sortedIndex(t,e)]===e?n:-1;n=i<0?Math.max(0,s+i):i}if(b&&t.indexOf===b)return t.indexOf(e,i);for(;n<s;n++)if(t[n]===e)return n;return-1},k.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(y&&t.lastIndexOf===y)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var s=n?i:t.length;s--;)if(t[s]===e)return s;return-1},k.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),s=0,o=new Array(n);s<n;)o[s++]=t,t+=i;return o};var N=function(){};k.bind=function(i,n){var s,o;if(i.bind===x&&x)return x.apply(i,a.call(arguments,1));if(!k.isFunction(i))throw new TypeError;return s=a.call(arguments,2),o=function(){if(!(this instanceof o))return i.apply(n,s.concat(a.call(arguments)));N.prototype=i.prototype;var t=new N;N.prototype=null;var e=i.apply(t,s.concat(a.call(arguments)));return Object(e)===e?e:t}},k.bindAll=function(e){var t=a.call(arguments,1);return 0===t.length&&(t=k.functions(e)),$(t,function(t){e[t]=k.bind(e[t],e)}),e},k.memoize=function(e,i){var n={};return i||(i=k.identity),function(){var t=i.apply(this,arguments);return k.has(n,t)?n[t]:n[t]=e.apply(this,arguments)}},k.delay=function(t,e){var i=a.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(a.call(arguments,1)))},k.throttle=function(i,n){var s,o,r,a,l=0,c=function(){l=new Date,r=null,a=i.apply(s,o)};return function(){var t=new Date,e=n-(t-l);return s=this,o=arguments,e<=0?(clearTimeout(r),r=null,l=t,a=i.apply(s,o)):r||(r=setTimeout(c,e)),a}},k.debounce=function(s,o,r){var a,l;return function(){var t=this,e=arguments,i=function(){a=null,r||(l=s.apply(t,e))},n=r&&!a;return clearTimeout(a),a=setTimeout(i,o),n&&(l=s.apply(t,e)),l}},k.once=function(t){var e=!1,i;return function(){return e||(e=!0,i=t.apply(this,arguments),t=null),i}},k.wrap=function(e,i){return function(){var t=[e];return o.apply(t,arguments),i.apply(this,t)}},k.compose=function(){var i=arguments;return function(){for(var t=arguments,e=i.length-1;0<=e;e--)t=[i[e].apply(this,t)];return t[0]}},k.after=function(t,e){return t<=0?e():function(){if(--t<1)return e.apply(this,arguments)}},k.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)k.has(t,i)&&(e[e.length]=i);return e},k.values=function(t){var e=[];for(var i in t)k.has(t,i)&&e.push(t[i]);return e},k.pairs=function(t){var e=[];for(var i in t)k.has(t,i)&&e.push([i,t[i]]);return e},k.invert=function(t){var e={};for(var i in t)k.has(t,i)&&(e[t[i]]=i);return e},k.functions=k.methods=function(t){var e=[];for(var i in t)k.isFunction(t[i])&&e.push(i);return e.sort()},k.extend=function(i){return $(a.call(arguments,1),function(t){if(t)for(var e in t)i[e]=t[e]}),i},k.pick=function(e){var i={},t=l.apply(s,a.call(arguments,1));return $(t,function(t){t in e&&(i[t]=e[t])}),i},k.omit=function(t){var e={},i=l.apply(s,a.call(arguments,1));for(var n in t)k.contains(i,n)||(e[n]=t[n]);return e},k.defaults=function(i){return $(a.call(arguments,1),function(t){if(t)for(var e in t)null==i[e]&&(i[e]=t[e])}),i},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var j=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var s=h.call(t);if(s!=h.call(e))return!1;switch(s){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=i.length;o--;)if(i[o]==t)return n[o]==e;i.push(t),n.push(e);var r=0,a=!0;if("[object Array]"==s){if(a=(r=t.length)==e.length)for(;r--&&(a=j(t[r],e[r],i,n)););}else{var l=t.constructor,c=e.constructor;if(l!==c&&!(k.isFunction(l)&&l instanceof l&&k.isFunction(c)&&c instanceof c))return!1;for(var u in t)if(k.has(t,u)&&(r++,!(a=k.has(e,u)&&j(t[u],e[u],i,n))))break;if(a){for(u in e)if(k.has(e,u)&&!r--)break;a=!r}}return i.pop(),n.pop(),a};k.isEqual=function(t,e){return j(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=C||function(t){return"[object Array]"==h.call(t)},k.isObject=function(t){return t===Object(t)},$(["Arguments","Function","String","Number","Date","RegExp"],function(e){k["is"+e]=function(t){return h.call(t)=="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"==h.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return c.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.times=function(t,e,i){for(var n=Array(t),s=0;s<t;s++)n[s]=e.call(i,s);return n},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var L={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};L.unescape=k.invert(L.escape);var A={escape:new RegExp("["+k.keys(L.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(L.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(e){k[e]=function(t){return null==t?"":(""+t).replace(A[e],function(t){return L[e][t]})}}),k.result=function(t,e){if(null==t)return null;var i=t[e];return k.isFunction(i)?i.call(t):i},k.mixin=function(i){$(k.functions(i),function(t){var e=k[t]=i[t];k.prototype[t]=function(){var t=[this._wrapped];return o.apply(t,arguments),P.call(this,e.apply(k,t))}})};var O=0;k.uniqueId=function(t){var e=++O+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(o,t,e){var i;e=k.defaults({},e,k.templateSettings);var n=new RegExp([(e.escape||D).source,(e.interpolate||D).source,(e.evaluate||D).source].join("|")+"|$","g"),r=0,a="__p+='";o.replace(n,function(t,e,i,n,s){return a+=o.slice(r,s).replace(B,function(t){return"\\"+H[t]}),e&&(a+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),n&&(a+="';\n"+n+"\n__p+='"),r=s+t.length,t}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(e.variable||"obj","_",a)}catch(t){throw t.source=a,t}if(t)return i(t,k);var s=function(t){return i.call(this,t,k)};return s.source="function("+(e.variable||"obj")+"){\n"+a+"}",s},k.chain=function(t){return k(t).chain()};var P=function(t){return this._chain?k(t).chain():t};k.mixin(k),$(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var i=s[e];k.prototype[e]=function(){var t=this._wrapped;return i.apply(t,arguments),"shift"!=e&&"splice"!=e||0!==t.length||delete t[0],P.call(this,t)}}),$(["concat","join","slice"],function(t){var e=s[t];k.prototype[t]=function(){return P.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var t=this,e=t.Backbone,i=[],p=i.push,s=i.slice,f=i.splice,a;(a="undefined"!=typeof exports?exports:t.Backbone={}).VERSION="1.0.0";var m=t._;m||"undefined"==typeof require||(m=require("underscore")),a.$=t.jQuery||t.Zepto||t.ender||t.$,a.noConflict=function(){return t.Backbone=e,this},a.emulateHTTP=!1,a.emulateJSON=!1;var n=a.Events={on:function(t,e,i){return h(this,"on",t,[e,i])&&e&&(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:i,ctx:i||this})),this;var n},once:function(t,e,i){if(!h(this,"once",t,[e,i])||!e)return this;var n=this,s=m.once(function(){n.off(t,s),e.apply(this,arguments)});return s._callback=e,this.on(t,s,i)},off:function(t,e,i){var n,s,o,r,a,l,c,u;if(!this._events||!h(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events={},this;for(a=0,l=(r=t?[t]:m.keys(this._events)).length;a<l;a++)if(t=r[a],o=this._events[t]){if(this._events[t]=n=[],e||i)for(c=0,u=o.length;c<u;c++)s=o[c],(e&&e!==s.callback&&e!==s.callback._callback||i&&i!==s.context)&&n.push(s);n.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!h(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&o(i,e),n&&o(n,arguments),this},stopListening:function(t,e,i){var n=this._listeners;if(!n)return this;var s=!e&&!i;for(var o in"object"==typeof e&&(i=this),t&&((n={})[t._listenerId]=t),n)n[o].off(e,i,this),s&&delete this._listeners[o];return this}},l=/\s+/,h=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(n));return!1}if(l.test(i)){for(var o=i.split(l),r=0,a=o.length;r<a;r++)t[e].apply(t,[o[r]].concat(n));return!1}return!0},o=function(t,e){var i,n=-1,s=t.length,o=e[0],r=e[1],a=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o,r);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o,r,a);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e)}},r={listenTo:"on",listenToOnce:"once"};m.each(r,function(o,t){n[t]=function(t,e,i){var n=this._listeners||(this._listeners={}),s;return"object"==typeof e&&(i=this),(n[t._listenerId||(t._listenerId=m.uniqueId("l"))]=t)[o](e,i,this),this}}),n.bind=n.on,n.unbind=n.off,m.extend(a,n);var c=a.Model=function(t,e){var i,n=t||{};e||(e={}),this.cid=m.uniqueId("c"),this.attributes={},m.extend(this,m.pick(e,u)),e.parse&&(n=this.parse(n,e)||{}),(i=m.result(this,"defaults"))&&(n=m.defaults({},n,i)),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)},u=["url","urlRoot","collection"];m.extend(c.prototype,n,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return m.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return m.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var n,s,o,r,a,l,c,u;if(null==t)return this;if("object"==typeof t?(s=t,i=e):(s={})[t]=e,i||(i={}),!this._validate(s,i))return!1;for(n in o=i.unset,a=i.silent,r=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=m.clone(this.attributes),this.changed={}),u=this.attributes,c=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]),s)e=s[n],m.isEqual(u[n],e)||r.push(n),m.isEqual(c[n],e)?delete this.changed[n]:this.changed[n]=e,o?delete u[n]:u[n]=e;if(!a){r.length&&(this._pending=!0);for(var h=0,d=r.length;h<d;h++)this.trigger("change:"+r[h],this,u[r[h]],i)}if(l)return this;if(!a)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,m.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,m.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!m.isEmpty(this.changed):m.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&m.clone(this.changed);var e,i=!1,n=this._changing?this._previousAttributes:this.attributes;for(var s in t)m.isEqual(n[s],e=t[s])||((i||(i={}))[s]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return m.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?m.clone(e):{}).parse&&(e.parse=!0);var i=this,n=e.success;return e.success=function(t){if(!i.set(i.parse(t,e),e))return!1;n&&n(i,t,e),i.trigger("sync",i,t,e)},B(this,e),this.sync("read",this,e)},save:function(t,e,i){var n,s,o,r=this.attributes;if(null==t||"object"==typeof t?(n=t,i=e):(n={})[t]=e,n&&(!i||!i.wait)&&!this.set(n,i))return!1;if(i=m.extend({validate:!0},i),!this._validate(n,i))return!1;n&&i.wait&&(this.attributes=m.extend({},r,n)),void 0===i.parse&&(i.parse=!0);var a=this,l=i.success;return i.success=function(t){a.attributes=r;var e=a.parse(t,i);if(i.wait&&(e=m.extend(n||{},e)),m.isObject(e)&&!a.set(e,i))return!1;l&&l(a,t,i),a.trigger("sync",a,t,i)},B(this,i),"patch"==(s=this.isNew()?"create":i.patch?"patch":"update")&&(i.attrs=n),o=this.sync(s,this,i),n&&i.wait&&(this.attributes=r),o},destroy:function(e){e=e?m.clone(e):{};var i=this,n=e.success,s=function(){i.trigger("destroy",i,i.collection,e)};if(e.success=function(t){(e.wait||i.isNew())&&s(),n&&n(i,t,e),i.isNew()||i.trigger("sync",i,t,e)},this.isNew())return e.success(),!1;B(this,e);var t=this.sync("delete",this,e);return e.wait||s(),t},url:function(){var t=m.result(this,"urlRoot")||m.result(this.collection,"url")||H();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},m.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=m.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,m.extend(e||{},{validationError:i})),!1)}});var d=["keys","values","pairs","invert","pick","omit"];m.each(d,function(e){c.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.attributes),m[e].apply(m,t)}});var g=a.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,m.extend({silent:!0},e))},v={add:!0,remove:!0,merge:!0},b={add:!0,merge:!1,remove:!1};m.extend(g.prototype,n,{model:c,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return a.sync.apply(this,arguments)},add:function(t,e){return this.set(t,m.defaults(e||{},b))},remove:function(t,e){var i,n,s,o;for(e||(e={}),i=0,n=(t=m.isArray(t)?t.slice():[t]).length;i<n;i++)(o=this.get(t[i]))&&(delete this._byId[o.id],delete this._byId[o.cid],s=this.indexOf(o),this.models.splice(s,1),this.length--,e.silent||(e.index=s,o.trigger("remove",o,this,e)),this._removeReference(o));return this},set:function(t,e){var i,n,s,o,r,a;(e=m.defaults(e||{},v)).parse&&(t=this.parse(t,e)),m.isArray(t)||(t=t?[t]:[]);var l=e.at,c=this.comparator&&null==l&&!1!==e.sort,u=m.isString(this.comparator)?this.comparator:null,h=[],d=[],g={};for(i=0,n=t.length;i<n;i++)(s=this._prepareModel(t[i],e))&&((r=this.get(s))?(e.remove&&(g[r.cid]=!0),e.merge&&(r.set(s.attributes,e),c&&!a&&r.hasChanged(u)&&(a=!0))):e.add&&(h.push(s),s.on("all",this._onModelEvent,this),null!=(this._byId[s.cid]=s).id&&(this._byId[s.id]=s)));if(e.remove){for(i=0,n=this.length;i<n;++i)g[(s=this.models[i]).cid]||d.push(s);d.length&&this.remove(d,e)}if(h.length&&(c&&(a=!0),this.length+=h.length,null!=l?f.apply(this.models,[l,0].concat(h)):p.apply(this.models,h)),a&&this.sort({silent:!0}),e.silent)return this;for(i=0,n=h.length;i<n;i++)(s=h[i]).trigger("add",s,this,e);return a&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var i=0,n=this.models.length;i<n;i++)this._removeReference(this.models[i]);return e.previousModels=this.models,this._reset(),this.add(t,m.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,m.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,m.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){if(null!=t)return this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(i,t){return m.isEmpty(i)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var e in i)if(i[e]!==t.get(e))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),m.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(m.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,i){e||(e=this.comparator);var n=m.isFunction(e)?e:function(t){return t.get(e)};return m.sortedIndex(this.models,t,n,i)},pluck:function(t){return m.invoke(this.models,"get",t)},fetch:function(i){void 0===(i=i?m.clone(i):{}).parse&&(i.parse=!0);var n=i.success,s=this;return i.success=function(t){var e=i.reset?"reset":"set";s[e](t,i),n&&n(s,t,i),s.trigger("sync",s,t,i)},B(this,i),this.sync("read",this,i)},create:function(e,i){if(i=i?m.clone(i):{},!(e=this._prepareModel(e,i)))return!1;i.wait||this.add(e,i);var n=this,s=i.success;return i.success=function(t){i.wait&&n.add(e,i),s&&s(e,t,i)},e.save(null,i),e},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof c)return t.collection||(t.collection=this),t;e||(e={});var i=new(e.collection=this).model(t,e);return i._validate(t,e)?i:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];m.each(y,function(e){g.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.models),m[e].apply(m,t)}});var C=["groupBy","countBy","sortBy"];m.each(C,function(n){g.prototype[n]=function(e,t){var i=m.isFunction(e)?e:function(t){return t.get(e)};return m[n](this.models,i,t)}});var w=a.View=function(t){this.cid=m.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,k=["model","collection","el","id","attributes","className","tagName","events"];m.extend(w.prototype,n,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof a.$?t:a.$(t),this.el=this.$el[0],!1!==e&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=m.result(this,"events")))return this;for(var e in this.undelegateEvents(),t){var i=t[e];if(m.isFunction(i)||(i=this[t[e]]),i){var n=e.match(x),s=n[1],o=n[2];i=m.bind(i,this),s+=".delegateEvents"+this.cid,""===o?this.$el.on(s,i):this.$el.on(s,o,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=m.extend({},m.result(this,"options"),t)),m.extend(this,m.pick(t,k)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(m.result(this,"el"),!1);else{var t=m.extend({},m.result(this,"attributes"));this.id&&(t.id=m.result(this,"id")),this.className&&(t.class=m.result(this,"className"));var e=a.$("<"+m.result(this,"tagName")+">").attr(t);this.setElement(e,!1)}}}),a.sync=function(t,e,i){var n=$[t];m.defaults(i||(i={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var s={type:n,dataType:"json"};if(i.url||(s.url=m.result(e,"url")||H()),null!=i.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||e.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===n||"DELETE"===n||"PATCH"===n)){s.type="POST",i.emulateJSON&&(s.data._method=n);var o=i.beforeSend;i.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",n),o)return o.apply(this,arguments)}}"GET"===s.type||i.emulateJSON||(s.processData=!1),"PATCH"!==s.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var r=i.xhr=a.ajax(m.extend(s,i));return e.trigger("request",e,r,i),r};var $={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var E=a.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,I=/\*\w+/g,_=/[\-{}\[\]+?.,\\\^$|#\s]/g;m.extend(E.prototype,n,{initialize:function(){},route:function(i,n,s){m.isRegExp(i)||(i=this._routeToRegExp(i)),m.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var o=this;return a.history.route(i,function(t){var e=o._extractParameters(i,t);s&&s.apply(o,e),o.trigger.apply(o,["route:"+n].concat(e)),o.trigger("route",n,e),a.history.trigger("route",o,n,e)}),this},navigate:function(t,e){return a.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=m.result(this,"routes");for(var t,e=m.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(_,"\\$&").replace(S,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/]+)"}).replace(I,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return m.map(i,function(t){return t?decodeURIComponent(t):null})}});var N=a.History=function(){this.handlers=[],m.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},j=/^[#\/]|\s+$/g,L=/^\/+|\/+$/g,A=/msie [\w.]+/,O=/\/$/;N.started=!1,m.extend(N.prototype,n,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(O,"");t.indexOf(i)||(t=t.substr(i.length))}else t=this.getHash();return t.replace(j,"")},start:function(t){if(N.started)throw new Error("Backbone.history has already been started");N.started=!0,this.options=m.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment(),i=document.documentMode,n=A.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(L,"/"),n&&this._wantsHashChange&&(this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?a.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!n?a.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e;var s=this.location,o=s.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!o?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&o&&s.hash&&(this.fragment=this.getHash().replace(j,""),this.history.replaceState({},document.title,this.root+this.fragment+s.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),N.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(t){var e=this.fragment=this.getFragment(t),i;return m.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(t,e){if(!N.started)return!1;if(e&&!0!==e||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var i=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),a.history=new N;var D=function(t,e){var i=this,n;n=t&&m.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},m.extend(n,i,e);var s=function(){this.constructor=n};return s.prototype=i.prototype,n.prototype=new s,t&&m.extend(n.prototype,t),n.__super__=i.prototype,n};c.extend=g.extend=E.extend=w.extend=N.extend=D;var H=function(){throw new Error('A "url" property or function must be specified')},B=function(e,i){var n=i.error;i.error=function(t){n&&n(e,t,i),e.trigger("error",e,t,i)}}}.call(this),function(t,e){(t=t||global).EVENTS_NO_REQUIRE?t.Events=e():"object"==typeof exports?module.exports.Events=e():"function"==typeof define&&define.amd?define(function(){return{Events:e()}}):t.Events=e()}(this,function(){var r=!1,i=/([^:]+)(?:\:([^(]*)(?:\((.*)\))?)?/,a,l,c,u,h,d,g;try{r=document&&"addEventListener"in document}catch(t){}function p(t,e){return t.indexOf?t.indexOf(e):String.prototype.indexOf(t,e)}function n(t){if(d.strict)throw new Error(t);"console"in window&&(console.error?console.error(t):console.warn?console.warn(t):console.log(t))}function e(t){return t.replace(/^on([A-Z])/,function(t,e){return e.toLowerCase()})}function s(t){var e=t.match(i);return 2<t.split(":").length&&n("Library does not support multiple pseudo events"),{name:e[1],pseudo:e[2],args:e[3]}}function f(t){return s(e(t))}function m(t,e,i,n){var s;return r?(s=document.createEvent("UIEvents")).initUIEvent(t,n,!0,window,1):s={},s.dispatcher=e,s.args=i,s.object_event=!0,s}function v(t,e,i){r?t.$event_element.addEventListener(e,i,!1):t.$events[e]?-1==p(t.$events[e],i)&&t.$events[e].push(i):t.$events[e]=[i]}function b(t,e,i){var n,s;if(r)t.$event_element.dispatchEvent(i);else{if(!t.$events[e])return;for(n=0;s=t.$events[e][n];n++)s.apply(null,[i])}}function y(t,e,i){var n;if(r)t.$event_element.removeEventListener(e,i,!1);else{if(!t.$events[e])return;if((n=p(t.$events[e],i))<0)return;t.$events[e].splice(n,1)}}return(d=function t(e,i){var n=this,s,o="$event_element $latched $events $once addEvent addEvents fireEvent removeEvent addEventOnce fireLatchedEvent".split(" ");for(s in r?this.$event_element=e||document.createElement("events"):this.$events={},this.$has_events=!0,this.$latched={},this.$once={},this.addEvent=a,this.addEvents=l,this.fireEvent=c,this.removeEvent=u,this.addEventOnce=h,this.fireLatchedEvent=g,t.aliases)this[s]=this[t.aliases[s]],o.push(s);i||this.addEvent("destroy:delay(0)",function(){var t,e;if(!n.$no_ev_destroy){for(t=0;e=o[t];t++)n[e]=null;n.$events_destroyed=!0}})}).removeOn=e,d.getPseudos=s,d.processType=f,d.createEvent=m,d.strict=!1,d.aliases={on:"addEvent",addListener:"addEvent",once:"addEventOnce",removeListener:"removeEvent",off:"removeEvent",emit:"fireEvent"},d.Pseudoes={once:{addEvent:function(t,e){return this.addEventOnce(t,e)}},latched:{fireEvent:function(t,e){return this.fireLatchedEvent(t,e)}},times:{addEvent:function(e,i,n){var s=0,o=this;this.addEvent(e,function t(){i.apply(null,arguments),(s+=1)==n&&o.removeEvent(e,t)})}},delay:{addEvent:function(t,e,i){this.addEvent(t,function(){setTimeout(e,i)})},fireEvent:function(t,e,i){var n=this;setTimeout(function(){n.fireEvent(t,e)},i)}}},a=function t(e,i){if(this.$events_destroyed)return this;var n=f(e),s=d.Pseudoes[n.pseudo]&&d.Pseudoes[n.pseudo].addEvent,o=this.$latched[n.name]&&this.$latched[n.name].args,r;return s?s.apply(this,[n.name,i,n.args]):(v(this,n.name,i),this.$latched&&this.$latched[n.name]&&(r=m(n.name,this,o),i.apply(null,[r])),this)},l=function t(e){if(this.$events_destroyed)return this;var i;for(i in e)e.hasOwnProperty(i)&&this.addEvent(i,e[i]);return this},c=function t(e,i,n){if(this.$events_destroyed)return this;var s=f(e),o=d.Pseudoes[s.pseudo]&&d.Pseudoes[s.pseudo].fireEvent,r,a,l,c;if(null==n&&(n=!0),o)return o.call(this,s.name,i);if(l=this.$once[s.name],this.$once[s.name]=null,r=m(s.name,this,i,n),b(this,s.name,r),!l)return this;for(;a=l.pop();)this.removeEvent(s.name,a,!0);return this},u=function t(e,i,n){if(this.$events_destroyed)return this;var s=f(e),o;return y(this,s.name,i),!n&&this.$once[s.name]&&-1<(o=p(this.$once[s.name],i))&&this.$once[s.name].splice(o,1),this},h=function t(e,i){if(this.$events_destroyed)return this;var n=this,s=f(e);return this.$once[s.name]||(this.$once[s.name]=[]),-1==p(this.$once[s.name],i)&&this.$once[s.name].push(i),this.addEvent(s.name,i)},g=function t(e,i){return this.$events_destroyed||(this.$latched||(this.$latched={}),this.$latched[e]={args:i},this.fireEvent(e,i)),this},d.addEvent=a,d.addEvents=l,d.addEventOnce=h,d.fireEvent=c,d.fireLatchedEvent=g,d.removeEvent=u,d.processType=f,d}),function(l){var i={};function t(t,e){this.$parent_stack||(this.$parent_stack={});var i=this.$parent_stack[t];this.$parent_stack[t]=i?i.constructor?i.constructor.__super__:null:this.constructor.__super__;var n=this.$parent_stack[t][t].apply(this,e||[]);return this.$parent_stack[t]=i,n}var n=Backbone.View.extend({mixins:null,do_render:!0,_namespace:"",initialize:function(){this.mixins&&this._applyMixins(),this._namespace&&this._attachNamespace(),!this.$generated&&this.do_render&&this.render(),this.init&&this.init(),this.$attached||this.addListeners()},$parent:t,render:function(){this.$generated=!0},addListeners:function(){return this.$attached=!0,this.Eggshell&&this.Eggshell.on("destroy",this.destroy.bind(this)),this},_applyMixins:function(){var t,e;for(t=0;e=this.mixins[t];t++)i[e]?i[e].call(this):e.call?e.call(this):console.warn("Trying to apply undefined mixin: "+e)},_attachNamespace:function(){var t=Eggshell.getDefinition(this._namespace),n={},s=this.Eggshell,o=this;function r(){}function a(t){if(!n[t]){var e=l.camelCase(t.replace(/ /g,"-")),i=o[e]?o[e].bind(o):r;s.on(t,i),n[t]=!0}}function e(t){var e,i;if(t instanceof Array)for(i=0;e=t[i];i++)a(e);else for(e in t)a(e)}t&&t.config.inputs&&e(t.config.inputs)},destroy:function(){}});n.registerMixin=function(t,e){i[t]=e},C.define=function(t,e,i){return i._namespace=t,Eggshell.define(t,e,n.extend(i)),t},n.$parent=t,n.mixins=i,C.CheggView=n}(window.Zepto||window.jQuery),window.Zepto||window.jQuery,C.CheggView.registerMixin("Attacher",function(){var o=[];function t(){var t,e;for(t=0;e=o[t];t++)e.fn?e.target.off(e.name,e.ns,e.fn):e.target.off(e.name,e.ns);o=null}this.attach=function t(e,i,n,s){return e.on||(e=$(e)),s?e.on(i,n,s):e.on(i,n),o.push({target:e,name:i,ns:n,fn:s}),this},this.Eggshell&&this.Eggshell.on("destroy",t),this.dettach=t}),C.CheggView.registerMixin("$parent",function(){this.$parent=C.CheggView.$parent}),C.CheggView.registerMixin("Options",function(){this.setOptions=function(t){function n(t,e){var i;for(i in t)e.hasOwnProperty(i)&&t.hasOwnProperty(i)&&("object"==typeof e[i]?n(t[i],e[i]):t[i]=e[i])}return n(this.options,t),this}}),C.CheggView.registerMixin("Generator",function(){var t=this["generator:elements"],e=_.result(this,"generator:getData"),i=this["generator:template"],n="function"==typeof i?i.call(this,e):i,s;if(n&&(this.element=$(n)),t&&this.element)for(s in this.elements={},t)this.elements[s]=$(t[s],this.element);this.Eggshell&&this.Eggshell.on("destroy",function t(){this.Eggshell.off("destroy",t),this.element&&this.element.remove(),this.elements={}}.bind(this))}),C.CheggView.registerMixin("Bind",function(){var t,e;if(this.bound=function(e){if(!this.bound[e])try{this.bound[e]=this[e].bind(this)}catch(t){return void utils.warn("Trying to bind undefined method "+e)}return this.bound[e]},this.bind)for(t=0;e=this.bind[t];t++)this.bound(e)}),C.CheggView.registerMixin("Validator",function(){this.defaultOptions={onkeyup:!1,onfocusout:!1,onclick:!1,onsubmit:!1};var t=_.result(this,"validator:element")||this.element;this.opt=this["validator:options"],this.opt=$.extend(this.defaultOptions,this.opt),this.validator=t.validate(this.opt),this.setElementRules=function(t,e){t.rules("add",e)},this.showErrors=function(t){this.validator.showErrors(t)},this.runValidator=function(){return t.valid()},this.Eggshell&&this.Eggshell.on("destroy",function t(){this.Eggshell.off("destroy",t)}.bind(this))}),Eggshell.define("C.report.GA",{inputs:["submit custom command","report custom event","report","register"],outputs:["custom command sent","custom report sent"],singleton:!0,immueToDestroyAll:!0},function(t){var a=t||[],o=Eggshell.find(this),r=!1,l=[],i=setInterval($.proxy(function(){if("undefined"==typeof ga)r=!1;else{r=!0,clearInterval(i);for(var t=0,e=l.length;t<e;t++)c(l[t][0],l[t][1]);l=[]}},this),1e3),c=function(t,e){if(!r)return l.push([null,e]),"";var i=_.isArray(e)?e:[e];ga.apply(null,i);var n="event"==t?"custom report sent":"custom command sent",s=$.proxy(function(){this.trigger(n,e)},o);ga(s)},e=function(t,e){c(null,e)},n=function(t,e){c("event",["send","event",e.page,e.section,e.link])},s=function(t){if("register"!==t.action){var e=t.channel,i=t.action,n=null;if(a&&a[e]&&a[e][i])return n=a[e][i],void c("event",["send","event",n.page,n.section,n.link]);var s=Eggshell.find(e);return s&&s.getClass()&&(e=s.getClass(),a&&a[e]&&a[e][i])?(n=a[e][i],void c("event",["send","event",n.page,n.section,n.link])):void 0}},u=function(t,e){var i=e;if(i)for(var n in i){var s=i[n];for(var o in s){var r=s[o];a[n]||(a[n]={}),a[n][o]=r}}};return Eggshell.on("*","*",s,this),Eggshell.find(this).on("submit custom command",e).on("report",s).on("report custom event",n).on("register",u),{}}),Eggshell.module("Factory",["Logger","DefinitionRegistry","Api"],function(t,r,e){Eggshell.loader.setFactory({escapeCss:function(t){return t=t.replace(/[!\"#$%&'\(\)\*\+,\.\/:;<=>\?\@\[\\\]\^`\{\|\}~]/g,"-")},instantiate:function(t,e,i,n){"object"!=typeof n&&(n={});var s=r.get(e);!1!==n.createSafeDomContainer&&!1!==n.newNode&&(null===s||s&&null===s.config||s&&s.config&&!1!==s.config.newNode)?(n.el||(n.el=$("body")),n.el.jquery||(n.el=$(n.el)),n.el.jquery&&(n.el=$.extend({},n.el)),n.el.attr("id")!=this.escapeCss(t)&&(n.el=$("<div/>").appendTo(n.el)),n.el.attr("id",this.escapeCss(t)),n.el.addClass(this.escapeCss(e)),n.className&&n.el.addClass(n.className)):n.el&&(n.el.jquery||(n.el=$(n.el)),n.el.attr("id",this.escapeCss(t)),n.el.addClass(this.escapeCss(e)),n.className&&n.el.addClass(n.className)),n.shell&&n.shell;var o=new i(n);return o&&o.Eggshell&&(o.Eggshell.listen("show",function(){this.$el&&this.$el.show()}),o.Eggshell.listen("hide",function(){this.$el&&this.$el.hide()}),o.Eggshell.on("track impression",function(){this.component.activityTracking={},this.component.activityTracking.$el=this.el,this.component.activityTracking.isSeen=!1,this.component.activityTracking.scrollDetector=Eggshell.create("C.Eggshell.window.scroll.tracker"),this.component.activityTracking.scrollDetected=$.proxy(function(){0<this.el.height()&&this.el.offset().top+Math.floor(this.el.height()/2)>=window.pageYOffset&&this.el.offset().top+Math.floor(this.el.height()/2)<window.pageYOffset+$(window).height()&&(this.component.activityTracking.scrollDetector.off("scrolled",this.component.activityTracking.scrollDetected,this),Eggshell.find(this.component).trigger("impression fired"))},this),this.component.activityTracking.scrollDetector.on("scrolled",this.component.activityTracking.scrollDetected,this),setTimeout(this.component.activityTracking.scrollDetected,1)},{component:o,el:n.el})),o},destroy:function(t,e){e.unbind&&e.unbind(),e.model&&e.model.unbind&&(e.model.unbind(),delete this.model),e.collection&&e.collection.unbind&&(e.collection.unbind(),delete this.collection),e.remove&&e.remove(),this.$el&&delete this.$el,this.el&&delete this.el,$("#"+this.escapeCss(t)).remove()}})}),Eggshell.define("C.eggshell.component.ajax.client",{inputs:["push","flush all"],outputs:[],singleton:!0},function(){var a=this,l={},c={},u=function(t){for(var e=0;e<l[t].length;e++)delete l[t][e];l[t]=[]},h=function(t){if(!t)throw"Empty payload.";if("string"!=typeof t.url||!t.url)throw"Invalid URL."},d=function(t){var e="";if(t.type&&(e=t.type),"?"!=(e+=t.url)[e.length-1]&&(e+="?"),t.data)for(var i in t.data)e+=i+"="+encodeURIComponent(t.data[i])+"&";return e},g=function(t,e,i){var n;return{request:t,response:e,arguments:i}},p=function(t,e,i,n){for(var s=0;s<l[t].length;s++){var o=l[t][s],r=g(o,i,n);a.Eggshell.trigger(e,r)}},t=function(t,e){var i=e;h(i),void 0===i.cache&&(i.cache=!0);var n=d(i);if(l[n]||(l[n]=[]),l[n].push(i),!(i.cache&&1<l[n].length)){if(i.cache&&c[n])return p.call(a,n,"success",c[n].response,[c[n].response]),p.call(a,n,"ready",c[n].response,[c[n].response]),void u(n);var s=function(){},o=$.extend({},i,{done:s,success:s,fail:s,error:s,always:s,complete:s}),r=$.ajax($.extend({},o,{context:this}));r.done(function(){p.call(a,n,"success",arguments[0],arguments),p.call(a,n,"ready",arguments[0],arguments),u(n),i.cache&&(c[n]=g(i,arguments[0],arguments))}),r.fail(function(t,e,i){p.call(a,n,"error",null,arguments),p.call(a,n,"ready",null,arguments),u(n)})}};a.Eggshell.listen("ajax",t),a.Eggshell.listen("push",function(t,e){if(!e)throw"Invalid payload";if(!e.settings)throw"Invalid ajax settings";if(!e.response)throw"Invalid ajax response";var i=e.settings,n=e.response;h(i);var s=d(i);c[s]=g(i,n,null)}),a.Eggshell.listen("flush all",function(t,e){c={}})}),$.cjax=function(){var e=Eggshell.create("C.eggshell.component.ajax.client");return Eggshell.immuneToDestroyAll(e),Eggshell.input(e,"success",function(t,e){var i=e.request,n=i.context;i.done?i.done.apply(n,e.arguments):i.success&&i.success.apply(n,e.arguments)}),Eggshell.input(e,"error",function(t,e){var i=e.request,n=i.context;i.fail?i.fail.apply(n,e.arguments):i.error&&i.error.apply(n,e.arguments)}),Eggshell.input(e,"ready",function(t,e){var i=e.request,n=i.context;i.always?i.always.apply(n,e.arguments):i.complete&&i.complete.apply(n,e.arguments)}),function(){var t={};1==arguments.length?"string"==typeof arguments[0]?t.url=arguments[0]:t=arguments[0]:2==arguments.length&&((t=arguments[1]).url=arguments[0]),t.context||(t.context=this),Eggshell.trigger(e,"ajax",t)}}(),Eggshell.define("C.Eggshell.window.scroll.tracker",{outputs:["scrolled"],singleton:!0},function(){$(window).scroll($.proxy(function(){this.Eggshell.trigger("scrolled")},this))}),Eggshell.define("C.common.tracking",{inputs:{"enable automatic tracking":{},"disable automatic tracking":{},"push class matcher":{payload:"string"},"set page information":{payload:{page:{name:"string",namespace:"string"}}}},singleton:!0,immueToDestroyAll:!0},Backbone.Model.extend({initialize:function(){this.reset(),Eggshell.find(this).on("reset",this.reset).on("push class matcher",this.pushClassMatcher,this).on("set page information",this.setPageInfo).on("enable automatic tracking",this.enable).on("disable automatic tracking",this.disable),Eggshell.on("*","*",this.track,this)},reset:function(){this.clear(),this.set({enabled:!0,class:[]})},pushClassMatcher:function(t,e){var i=this.get("class");i.push(e),this.set("class",i)},setPageInfo:function(t,e){this.set("page",e)},enable:function(){this.set("enabled",!0)},disable:function(){this.set("enabled",!1)},track:function(t,e){if(this.get("enabled")){var i=t.action,n;if(0<=i.indexOf("clicked")||0<=i.indexOf("focused")||0<=i.indexOf("blurred"))if(t.namespace)for(var s=t.namespace,o,r=Eggshell.shell(s).getConstructorNamespace(),a=this.get("class"),l=0;l<a.length;l++)if(0<=r.indexOf(a[l])){r=(r=(r=r===a[l]?r.substr(r.lastIndexOf(".")+1):r.replace(a[l]+".","")).replace(/\./g," ")).charAt(0).toUpperCase()+r.slice(1);var c=this.get("page")&&this.get("page").name?this.get("page").name:$("title").html(),u=r,h=i;Eggshell.create("C.report.GA").trigger("report custom event",{page:c,section:u,link:h});break}}}})),function(l,t){var e=function(){this.init=function(){void 0===l.digitalData&&(l.digitalData={})},this.setData=function(t,e){function i(t,e){var i,n=t.split("."),s=l.digitalData,o,r;for(i=0;i<n.length;i++){var a=n[i];(o=s)[r=a]?"object"==typeof s[a]&&(s=s[a]):s=s[a]={}}return void 0!==e?o[r]=e:delete o[r],l.digitalData}function n(t){try{t=JSON.parse(t)}catch(t){}return t}t&&(1<arguments.length?i(t,n(e)):l.digitalData=n(t))},this.removeKey=function(t){this.setData(t,void 0)},this.track=function(e,t){if(e){try{e=JSON.parse(e)}catch(t){"string"==typeof e&&(e=[e])}if("undefined"!=typeof _satellite)for(i=0;i<e.length;i++)_satellite.track(e[i])}},this.log=function(t,e){"undefined"!=typeof _satellite&&_satellite.notify(t,e)},this.pushEvent=function(t,e){!e&&Array.isArray(l.digitalData.event)||(l.digitalData.event=[]),l.digitalData.event.push(t),this.track("event")},this.triggerEvent=function(e){Array.isArray(e)||(e=[e]);try{l.cheggAnalyticsUtils.triggerEvent(e)}catch(t){for(i=0,c=e.length;i<c;i++)this.pushEvent(e[i])}},this.init()};t.adobeAnalytics=new e}(window,C),C.resource||(C.resource=function(){var s=function(e,i,n){if(!e||"string"!=typeof e)throw"Invalid language";if(!i||"string"!=typeof i)throw"Invalid country";n||(n=""),this.toString=function(){var t=e.toLowerCase()+"-"+i.toUpperCase();return n&&(t+="-"+n),t}},o=function(){var i={};this.add=function(t,e){if(!t||"string"!=typeof t)throw"Invalid key";if(!e||"string"!=typeof e)throw"Invalid message";i[t]=e},this.remove=function(t){if(!t||"string"!=typeof t)throw"Invalid key";delete i[t]},this.fetch=function(t){if(!t||"string"!=typeof t)throw"Invalid key";return i[t]},this.fetchAll=function(){return i}},r=!1,e=new s("en","US"),a={},t,i,l=function(){return e},c=function(){var t,e,i,n=null;if(1!=arguments.length||"object"!=typeof arguments[0])if(2!=arguments.length||"object"!=typeof arguments[1]){if(2==arguments.length)t=l(),e=arguments[0],i=arguments[1];else{if(3!=arguments.length)throw"Invalid arguments";t=arguments[0],e=arguments[1],i=arguments[2]}if(!t)throw"Invalid locale";if(!e||"string"!=typeof e)throw"Invalid key";if(!i||"string"!=typeof i)throw"Invalid message";a[t.toString()]||(a[t.toString()]=new o),a[t.toString()].add(e,i),r&&console.log("message added",t.toString(),e,i)}else{if(!(t=arguments[0]))throw"Invalid locale";for(var e in arguments[1]){var i=arguments[1][e];c(t,e,i)}}else for(var e in arguments[0]){var i=arguments[0][e];c(e,i)}},n,u;return{Locale:s,setDebug:function(t){r=!!t},setDefaultLocale:function(t){if(!t instanceof s)throw"Invalid locale";e=t,r&&console.log("default locale registered",t)},getDefaultLocale:l,add:c,fetch:function(){var t,e,i=null,n=[];if(1==arguments.length)t=l(),e=arguments[0];else if(2==arguments.length)arguments[0]instanceof s?(t=arguments[0],e=arguments[1]):(t=l(),e=arguments[0],n=arguments[1]);else{if(3!=arguments.length)throw"Invalid arguments";t=arguments[0],e=arguments[1],n=arguments[2]}if(!t)throw"Invalid locale";if(!e||"string"!=typeof e)throw"Invalid key";return a[t.toString()]&&(i=a[t.toString()].fetch(e)),n&&_.each(n,function(t,e){i=i.replace("{"+e+"}",t)},this),r&&console.log("message fetched",t.toString(),e,i),i},toJSON:function(){var t=l();return 1==arguments.length&&(t=arguments[0]),a[t.toString()]?a[t.toString()].fetchAll():{}}}}()),function(t){t=t||{};for(var e=["debug","info","warn","error","assert","clear","dir","dirxml","trace","group","groupCollapsed","groupEnd","time","timeEnd","profile","profileEnd","count","exception","table"],i=0;i<e.length;i++)t[e[i]]=t[e[i]]||function(){};var n=C.utility.getParams();for(var s in n)"profile"==s&&(C("global").profile=1);C("global").profile&&console.profile("Global package profiler")}(window.console),C("support"),C.support.touch="ontouchstart"in document.documentElement,C.support.placeholder=C.utility.attrSupportedByEl("input","placeholder"),function(){var t="rgba(1,1,1,0.5)",e=document.createElement("p"),i;try{e.style.color=t}catch(t){}C.support.rgba=/^rgba/.test(e.style.color),e=null,C.support.util={moved:!1,slideRight:!1,slideLeft:!1,resetTouch:function(){C.support.util.moved=!1,C.support.util.slideRight=!1,C.support.util.slideLeft=!1,C.support.util.startX=0,C.support.util.startY=0,C.support.util.diffX=0,C.support.util.diffY=0,C.support.util.changeX=0,C.support.util.changeY=0},onTouchMove:function(t){var e=t.originalEvent.touches[0];C.support.util.diffX=e.clientX-C.support.util.startX,C.support.util.diffY=e.clientY-C.support.util.startY,C.support.util.changeX=Math.abs(C.support.util.diffX),C.support.util.changeY=Math.abs(C.support.util.diffY),(15<C.support.util.changeX||15<C.support.util.changeY)&&(C.support.util.moved=!0),60<C.support.util.diffX&&C.support.util.changeY<50?C.support.util.slideRight=!0:C.support.util.diffX<-60&&C.support.util.changeY<50?C.support.util.slideLeft=!0:(C.support.util.slideRight=!1,C.support.util.slideLeft=!1)},onTouchStart:function(t){var e=t.originalEvent.touches[0];C.support.util.resetTouch(),C.support.util.startX=e.clientX,C.support.util.startY=e.clientY}},C.support.util.resetTouch(),$("body").on("touchstart",C.support.util.onTouchStart).on("touchmove",C.support.util.onTouchMove)}(),function(){var e={},t,i,n,s,o,r;for(var a in document.body.style)if(o=a.match(/^(webkit|Moz|O|ms)/),t=a,n=o?(s||(s=o[0]?o[0].toLowerCase():null,r=new RegExp("/-"+s+"-/","g")),(i=("-"+a.replace(/([A-Z])/g,function(t){return"-"+t}).toLowerCase()).replace("--","-")).replace("-"+s+"-","")):i=(t=a).replace(/([A-Z])/g,function(t){return"-"+t}).toLowerCase(),!e[n]){if(n in document.body.style&&(t!=n||i!=n))continue;e[n]={css:i,js:t}}$.fn._css=$.fn.css,$.fn.css=function(){if(arguments.length&&"[object Object]"==Object.prototype.toString.call(arguments[0]))for(var t in arguments[0])"[object String]"==Object.prototype.toString.call(arguments[0][t])&&(arguments[0][t]=arguments[0][t].replace(r,"")),e[t]&&e[t].js!=t&&(arguments[0][e[t].js]=arguments[0][t],delete arguments[0][t]);return this._css.apply(this,arguments)}}(),C("dom"),C.dom.$window=$(window),C.dom.$html=$(document.documentElement),C.dom.$header=0<$(".chgg-hdr").length?$(".chgg-hdr"):$(".chg-header"),C.dom.$headerRoot=$(".chg-hdr-root"),C.dom.$content=$(".chg-content"),C.dom.$nav=$(".chg-nav"),C.dom.$body=$(document.body),C.dom.$root=$(".chg-root"),C.dom.$container=$(".chg-container"),C.dom.$navToggle=$(".icn-menu-toggle"),function(t,s){"use strict";var e=t.History=t.History||{},n=t.jQuery;if(void 0!==e.Adapter)throw new Error("History.js Adapter has already been loaded...");e.Adapter={bind:function(t,e,i){n(t).on(e,i)},trigger:function(t,e,i){n(t).trigger(e,i)},extractEventData:function(t,e,i){var n;return e&&e.originalEvent&&e.originalEvent[t]||i&&i[t]||s},onDomLoad:function(t){n(t)}},void 0!==e.init&&e.init()}(window),function(r,i){"use strict";var a=r.console||i,l=r.document,e=r.navigator,t=!1,s=r.setTimeout,o=r.clearTimeout,n=r.setInterval,c=r.clearInterval,u=r.JSON,h=r.alert,d=r.History=r.History||{},g=r.history;if(u.stringify=u.stringify||u.encode,u.parse=u.parse||u.decode,void 0!==d.init)throw new Error("History.js Core has already been loaded...");d.init=function(){return void 0!==d.Adapter&&(void 0!==d.initCore&&d.initCore(),void 0!==d.initHtml4&&d.initHtml4(),!0)},d.initCore=function(){if(void 0!==d.initCore.initialized)return!1;if(d.initCore.initialized=!0,d.options=d.options||{},d.options.hashChangeInterval=d.options.hashChangeInterval||100,d.options.safariPollInterval=d.options.safariPollInterval||500,d.options.doubleCheckInterval=d.options.doubleCheckInterval||500,d.options.storeInterval=d.options.storeInterval||1e3,d.options.busyDelay=d.options.busyDelay||250,d.options.debug=d.options.debug||!1,d.options.initialTitle=d.options.initialTitle||l.title,d.intervalList=[],d.clearAllIntervals=function(){var t,e=d.intervalList;if(null!=e){for(t=0;t<e.length;t++)c(e[t]);d.intervalList=null}},d.debug=function(){d.options.debug&&d.log.apply(d,arguments)},d.log=function(){var t=!(void 0===a||void 0===a.log||void 0===a.log.apply),e=l.getElementById("log"),i,n,s,o,r;for(t?(i=(o=Array.prototype.slice.call(arguments)).shift(),void 0!==a.debug?a.debug.apply(a,[i,o]):a.log.apply(a,[i,o])):i="\n"+arguments[0]+"\n",n=1,s=arguments.length;n<s;++n){if("object"==typeof(r=arguments[n])&&void 0!==u)try{r=u.stringify(r)}catch(t){}i+="\n"+r+"\n"}return e?(e.value+=i+"\n-----\n",e.scrollTop=e.scrollHeight-e.clientHeight):t||h(i),!0},d.getInternetExplorerMajorVersion=function(){var t;return d.getInternetExplorerMajorVersion.cached=void 0!==d.getInternetExplorerMajorVersion.cached?d.getInternetExplorerMajorVersion.cached:function(){for(var t=3,e=l.createElement("div"),i=e.getElementsByTagName("i");(e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e")&&i[0];);return 4<t&&t}()},d.isInternetExplorer=function(){var t;return d.isInternetExplorer.cached=void 0!==d.isInternetExplorer.cached?d.isInternetExplorer.cached:Boolean(d.getInternetExplorerMajorVersion())},d.emulated={pushState:!Boolean(r.history&&r.history.pushState&&r.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent))),hashChange:Boolean(!("onhashchange"in r||"onhashchange"in l)||d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<8)},d.enabled=!d.emulated.pushState,d.bugs={setHash:Boolean(!d.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!d.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<7)},d.isEmptyObject=function(t){for(var e in t)return!1;return!0},d.cloneObject=function(t){var e,i;return i=t?(e=u.stringify(t),u.parse(e)):{}},d.getRootUrl=function(){var t=l.location.protocol+"//"+(l.location.hostname||l.location.host);return l.location.port&&(t+=":"+l.location.port),t+="/"},d.getBaseHref=function(){var t=l.getElementsByTagName("base"),e=null,i="";return 1===t.length&&(i=(e=t[0]).href.replace(/[^\/]+$/,"")),(i=i.replace(/\/+$/,""))&&(i+="/"),i},d.getBaseUrl=function(){var t;return d.getBaseHref()||d.getBasePageUrl()||d.getRootUrl()},d.getPageUrl=function(){var t,e,i;return i=((d.getState(!1,!1)||{}).url||l.location.href.replace(/#.*/,"")).replace(/\/+$/,"").replace(/[^\/]+$/,function(t,e,i){return/\./.test(t)?t:t+"/"})},d.getBasePageUrl=function(){var t;return l.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(t,e,i){return/[^\/]$/.test(t)?"":t}).replace(/\/+$/,"")+"/"},d.getFullUrl=function(t,e){var i=t,n=t.substring(0,1);return e=void 0===e||e,/[a-z]+\:\/\//.test(t)||(i="/"===n?d.getRootUrl()+t.replace(/^\/+/,""):"#"===n?d.getPageUrl().replace(/#.*/,"")+t:"?"===n?d.getPageUrl().replace(/[\?#].*/,"")+t:e?d.getBaseUrl()+t.replace(/^(\.\/)+/,""):d.getBasePageUrl()+t.replace(/^(\.\/)+/,"")),i.replace(/\#$/,"")},d.getShortUrl=function(t){var e=t,i=d.getBaseUrl(),n=d.getRootUrl();return d.emulated.pushState&&(e=e.replace(i,"")),e=e.replace(n,"/"),d.isTraditionalAnchor(e)&&(e="./"+e),e=e.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},d.store={},d.idToState=d.idToState||{},d.stateToId=d.stateToId||{},d.urlToId=d.urlToId||{},d.storedStates=d.storedStates||[],d.savedStates=d.savedStates||[],d.normalizeStore=function(){d.store.idToState=d.store.idToState||{},d.store.urlToId=d.store.urlToId||{},d.store.stateToId=d.store.stateToId||{}},d.getState=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);var i=d.getLastSavedState();return!i&&e&&(i=d.createStateObject()),t&&((i=d.cloneObject(i)).url=i.cleanUrl||i.url),i},d.getIdByState=function(t){var e=d.extractId(t.url),i;if(!e)if(i=d.getStateString(t),void 0!==d.stateToId[i])e=d.stateToId[i];else if(void 0!==d.store.stateToId[i])e=d.store.stateToId[i];else{for(;e=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),void 0!==d.idToState[e]||void 0!==d.store.idToState[e];);d.stateToId[i]=e,d.idToState[e]=t}return e},d.normalizeState=function(t){var e,i;return t&&"object"==typeof t||(t={}),void 0!==t.normalized?t:(t.data&&"object"==typeof t.data||(t.data={}),(e={normalized:!0}).title=t.title||"",e.url=d.getFullUrl(d.unescapeString(t.url||l.location.href.replace(/#.*/,""))),e.hash=d.getShortUrl(e.url),e.data=d.cloneObject(t.data),e.id=d.getIdByState(e),e.cleanUrl=e.url.replace(/\??\&_suid.*/,""),e.url=e.cleanUrl,i=!d.isEmptyObject(e.data),(e.title||i)&&(e.hash=d.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id),e.hashedUrl=d.getFullUrl(e.hash),(d.emulated.pushState||d.bugs.safariPoll)&&d.hasUrlDuplicate(e)&&(e.url=e.hashedUrl),e)},d.createStateObject=function(t,e,i){var n={data:t,title:e,url:i};return n=d.normalizeState(n)},d.getStateById=function(t){var e;return t=String(t),d.idToState[t]||d.store.idToState[t]||i},d.getStateString=function(t){var e,i,n;return i={data:(e=d.normalizeState(t)).data,title:t.title,url:t.url},n=u.stringify(i)},d.getStateId=function(t){var e,i;return i=(e=d.normalizeState(t)).id},d.getHashByState=function(t){var e,i;return i=(e=d.normalizeState(t)).hash},d.extractId=function(t){var e,i,n;return n=(i=/(.*)\&_suid=([0-9]+)$/.exec(t))&&i[1]||t,(e=i?String(i[2]||""):"")||!1},d.isTraditionalAnchor=function(t){var e;return!/[\/\?\.]/.test(t)},d.extractState=function(t,e){var i=null,n,s;return e=e||!1,(n=d.extractId(t))&&(i=d.getStateById(n)),i||(s=d.getFullUrl(t),(n=d.getIdByUrl(s)||!1)&&(i=d.getStateById(n)),i||!e||d.isTraditionalAnchor(t)||(i=d.createStateObject(null,null,s))),i},d.getIdByUrl=function(t){var e;return d.urlToId[t]||d.store.urlToId[t]||i},d.getLastSavedState=function(){return d.savedStates[d.savedStates.length-1]||i},d.getLastStoredState=function(){return d.storedStates[d.storedStates.length-1]||i},d.hasUrlDuplicate=function(t){var e=!1,i;return e=(i=d.extractState(t.url))&&i.id!==t.id},d.storeState=function(t){return d.urlToId[t.url]=t.id,d.storedStates.push(d.cloneObject(t)),t},d.isLastSavedState=function(t){var e=!1,i,n,s;return d.savedStates.length&&(e=(i=t.id)===(s=(n=d.getLastSavedState()).id)),e},d.saveState=function(t){return!d.isLastSavedState(t)&&(d.savedStates.push(d.cloneObject(t)),!0)},d.getStateByIndex=function(t){var e=null;return e=void 0===t?d.savedStates[d.savedStates.length-1]:t<0?d.savedStates[d.savedStates.length+t]:d.savedStates[t]},d.getHash=function(){var t;return d.unescapeHash(l.location.hash)},d.unescapeString=function(t){var e,i;return t},d.unescapeHash=function(t){var e=d.normalizeHash(t);return e=d.unescapeString(e)},d.normalizeHash=function(t){var e;return t.replace(/[^#]*#/,"").replace(/#.*/,"")},d.setHash=function(t,e){var i,n,s;return!1!==e&&d.busy()?(d.pushQueue({scope:d,callback:d.setHash,args:arguments,queue:e}),!1):(i=d.escapeHash(t),d.busy(!0),(n=d.extractState(t,!0))&&!d.emulated.pushState?d.pushState(n.data,n.title,n.url,!1):l.location.hash!==i&&(d.bugs.setHash?(s=d.getPageUrl(),d.pushState(null,null,s+"#"+i,!1)):l.location.hash=i),d)},d.escapeHash=function(t){var e=d.normalizeHash(t);return e=r.escape(e),d.bugs.hashEscape||(e=e.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),e},d.getHashByUrl=function(t){var e=String(t).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return e=d.unescapeHash(e)},d.setTitle=function(t){var e=t.title,i;e||(i=d.getStateByIndex(0))&&i.url===t.url&&(e=i.title||d.options.initialTitle);try{l.getElementsByTagName("title")[0].innerHTML=e.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(t){}return l.title=e,d},d.queues=[],d.busy=function(t){if(void 0!==t?d.busy.flag=t:void 0===d.busy.flag&&(d.busy.flag=!1),!d.busy.flag){o(d.busy.timeout);var n=function(){var t,e,i;if(!d.busy.flag)for(t=d.queues.length-1;0<=t;--t)0!==(e=d.queues[t]).length&&(i=e.shift(),d.fireQueueItem(i),d.busy.timeout=s(n,d.options.busyDelay))};d.busy.timeout=s(n,d.options.busyDelay)}return d.busy.flag},d.busy.flag=!1,d.fireQueueItem=function(t){return t.callback.apply(t.scope||d,t.args||[])},d.pushQueue=function(t){return d.queues[t.queue||0]=d.queues[t.queue||0]||[],d.queues[t.queue||0].push(t),d},d.queue=function(t,e){return"function"==typeof t&&(t={callback:t}),void 0!==e&&(t.queue=e),d.busy()?d.pushQueue(t):d.fireQueueItem(t),d},d.clearQueue=function(){return d.busy.flag=!1,d.queues=[],d},d.stateChanged=!1,d.doubleChecker=!1,d.doubleCheckComplete=function(){return d.stateChanged=!0,d.doubleCheckClear(),d},d.doubleCheckClear=function(){return d.doubleChecker&&(o(d.doubleChecker),d.doubleChecker=!1),d},d.doubleCheck=function(t){return d.stateChanged=!1,d.doubleCheckClear(),d.bugs.ieDoubleCheck&&(d.doubleChecker=s(function(){return d.doubleCheckClear(),d.stateChanged||t(),!0},d.options.doubleCheckInterval)),d},d.safariStatePoll=function(){var t=d.extractState(l.location.href.replace(/#.*/,"")),e;if(!d.isLastSavedState(t))return(e=t)||(e=d.createStateObject()),d.Adapter.trigger(r,"popstate"),d},d.back=function(t){return!1!==t&&d.busy()?(d.pushQueue({scope:d,callback:d.back,args:arguments,queue:t}),!1):(d.busy(!0),d.doubleCheck(function(){d.back(!1)}),g.go(-1),!0)},d.forward=function(t){return!1!==t&&d.busy()?(d.pushQueue({scope:d,callback:d.forward,args:arguments,queue:t}),!1):(d.busy(!0),d.doubleCheck(function(){d.forward(!1)}),g.go(1),!0)},d.go=function(t,e){var i;if(0<t)for(i=1;i<=t;++i)d.forward(e);else{if(!(t<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(i=-1;t<=i;--i)d.back(e)}return d},d.emulated.pushState){var t=function(){};d.pushState=d.pushState||t,d.replaceState=d.replaceState||t}else d.onPopState=function(t,e){var i=!1,n=!1,s,o;return d.doubleCheckComplete(),(n=(i=d.Adapter.extractEventData("state",t,e)||!1)?d.getStateById(i):d.expectedStateId?d.getStateById(d.expectedStateId):d.extractState(l.location.href.replace(/#.*/,"")))||(n=d.createStateObject(null,null,l.location.href.replace(/#.*/,""))),d.expectedStateId=!1,d.isLastSavedState(n)?(d.busy(!1),!1):(d.storeState(n),d.saveState(n),d.setTitle(n),d.Adapter.trigger(r,"statechange"),d.busy(!1),!0)},d.Adapter.bind(r,"popstate",d.onPopState),d.pushState=function(t,e,i,n){if(d.getHashByUrl(i)&&d.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==n&&d.busy())return d.pushQueue({scope:d,callback:d.pushState,args:arguments,queue:n}),!1;d.busy(!0);var s=d.createStateObject(t,e,i);return d.isLastSavedState(s)?d.busy(!1):(d.storeState(s),d.expectedStateId=s.id,g.pushState(s.id,s.title,s.url),d.Adapter.trigger(r,"popstate")),!0},d.replaceState=function(t,e,i,n){if(d.getHashByUrl(i)&&d.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==n&&d.busy())return d.pushQueue({scope:d,callback:d.replaceState,args:arguments,queue:n}),!1;d.busy(!0);var s=d.createStateObject(t,e,i);return d.isLastSavedState(s)?d.busy(!1):(d.storeState(s),d.expectedStateId=s.id,g.replaceState(s.id,s.title,s.url),d.Adapter.trigger(r,"popstate")),!0};d.store={},d.normalizeStore(),d.Adapter.bind(r,"beforeunload",d.clearAllIntervals),d.Adapter.bind(r,"unload",d.clearAllIntervals),d.saveState(d.storeState(d.extractState(l.location.href.replace(/#.*/,""),!0))),d.emulated.pushState||(d.bugs.safariPoll&&d.intervalList.push(n(d.safariStatePoll,d.options.safariPollInterval)),"Apple Computer, Inc."!==e.vendor&&"Mozilla"!==(e.appCodeName||"")||(d.Adapter.bind(r,"hashchange",function(){d.Adapter.trigger(r,"popstate")}),d.getHash()&&d.Adapter.onDomLoad(function(){d.Adapter.trigger(r,"hashchange")})))},d.init()}(window),window.matchMedia=window.matchMedia||function(t,e){var i,n=t.documentElement,s=n.firstElementChild||n.firstChild,o=t.createElement("body"),r=t.createElement("div");return r.id="mq-test-1",r.style.cssText="position:absolute;top:-100em",o.style.background="none",o.appendChild(r),function(t){return r.innerHTML='&shy;<style media="'+t+'"> #mq-test-1 { width: 42px; }</style>',n.insertBefore(o,s),i=42==r.offsetWidth,n.removeChild(o),{matches:i,media:t}}}(document),function(a){a.fn.placeholder=function(r){return this.each(function(){var e=a(this),i,t="placeholder"in document.createElement("input");function n(t){s(a(t.target))}function s(){if(""===e.val()){if("password"===e.attr("type"))try{e.attr("type","text")}catch(t){return!1}e.val(i),e.addClass("ui-placeholder")}}function o(t){e.removeClass("ui-placeholder"),e.val()===i&&e.val("")}i=void 0===r?a(this).attr("placeholder"):r,t?e.attr("placeholder",i):(s(e.blur(n).focus(o).addClass("ui-placeholder")),e.parents("form").submit(function(t){e.val()===i&&e.val("")}))})}}(jQuery),function(t){var o=!1,r=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,a=t.Class=function(){};void 0!==this&&(this.Class=a),a.extend=function(t){var s=this.prototype;o=!0;var e=new this;for(var i in o=!1,t)e[i]="function"==typeof t[i]&&"function"==typeof s[i]&&r.test(t[i])?function(i,n){return function(){var t=this._super;this._super=s[i];var e=n.apply(this,arguments);return this._super=t,e}}(i,t[i]):t[i];var n=function(){!o&&this.init&&this.init.apply(this,arguments)};return((n.prototype=e).constructor=n).extend=a.extend,n}}("undefined"!=typeof global?global:window),C("widget"),C.widget.__base={init:function(){this.instanceNumber=++C.global.instanceCounter,C("widget."+this.instanceNumber),C.widget[this.instanceNumber]._widget=[],this.eventNamespace="widget"+this.instanceNumber,this.construct.apply(this,arguments)},destroy:function(){if(this.destruct(),this.eventNamespace){var t="."+this.eventNamespace;$(window).off(t),$("*").off(t)}for(var e=0;e<C.widget[this.instanceNumber]._widget.length;e++)C.widget[this.instanceNumber]._widget[e].destroy?C.widget[this.instanceNumber]._widget[e].destroy():C.log("Widget "+e+" does not have a destroy method");for(;C.widget[this.instanceNumber]._widget.length;)C.widget[this.instanceNumber]._widget.pop()},addWidget:function(t){return C.widget[this.instanceNumber]._widget.push(t),t},construct:function(t){C.log("Missing widget construct(opts) function!")},destruct:function(){C.log("Missing widget destruct() function!")}},C.widget._base=Class.extend(C.widget.__base),C("widget.backbone"),C.widget.backbone.view=Backbone.View.extend(_.extend(C.widget.__base,{initialize:function(t){this.init(t)}})),C("page"),C.page._base=Class.extend({init:function(){this.arguments=arguments,C.page._widget=C.page._widget||[],this.instanceNumber=++C.global.pageCounter,this.eventNamespace="page"+this.instanceNumber,this.construct.apply(this,arguments)},getData:function(){return this.arguments},destroy:function(){if(this.destruct(),this.eventNamespace){var t="."+this.eventNamespace;$(window).off(t),$("*").off(t)}for(var e=0;e<C.page._widget.length;e++)C.page._widget[e].destroy?C.page._widget[e].destroy():C.log("Widget "+C.page._widget[e].toString()+" does not have a destroy method");for(;C.page._widget.length;)C.page._widget.pop()},addWidget:function(t){return C.page._widget.push(t),t},construct:function(t){C.log("Missing page construct(opts) function!")},destruct:function(){C.log("Missing page destruct() function!")}}),C.Events=_.extend({},Backbone.Events),C.Collection=Backbone.Collection.extend({objName:"C.Collection",destroy:function(){for(this.log("destroy");0<this.length;)this.at(0).destroy(),this.remove(this.at(0));this.trigger("destroy")}}),C.Model=Backbone.Model.extend({objName:"C.Model",destroy:function(){this.trigger("destroy")}}),C.View=Backbone.View.extend({objName:"C.View"}),C.Collection.prototype.log=C.Model.prototype.log=C.View.prototype.log=function(){var t=Array.prototype.slice.call(arguments);t.unshift(this.objName),C.log.apply(this,t)},jQuery.extend(jQuery,{escapeSelector:function(){var t,e=[".","*","+","|","[","]","(",")","/","^","$"],i=new RegExp("("+["#","&","~","=",">","'",":",'"',"!",";",","].join("|")+"|\\"+e.join("|\\")+")","g");return function(t){return t.replace(i,"\\$1")}}()}),$.fn.serializeObject=function(){var t={},e=this.serializeArray();return $.each(e,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},$.safeAjax=function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function n(t){return String(t).replace(/[&<>"'\/]/g,function(t){return e[t]})}function s(t){if("string"==typeof t)return n(t);if("object"!=typeof t)return t;for(var e in t){var i=t[e];t[e]=s(i)}return t}var o=t.success;return t.success=function(t,e,i){t=s(t),o&&o(t,e,i)},$.ajax(t)},$.fn.observe=function(){var t=arguments,i,e,n,s=t[0],o,r=this,a=function(t,e){t=t.split(/\s+/);for(var i=[],n=0;n<t.length;n++)i.push(t[n]+e);return i.join(" ")};if(2==t.length)for(var l in o="string"==typeof(i=t[1]).eventNamespace?"."+i.eventNamespace:"",s)!function(e){r.on(a(e,o),function(t){return s[e].call(i,t)})}(l);else if(3==t.length)if("object"==typeof s)for(var l in n=t[1],o="string"==typeof(i=t[2]).eventNamespace?"."+i.eventNamespace:"",s)!function(e){r.on(a(e,o),n,function(t){return s[e].call(i,t)})}(l);else e=t[1],o="string"==typeof(i=t[2]).eventNamespace?"."+i.eventNamespace:"",this.on(a(s,o),function(t){return e.call(i,t)});else 4==t.length&&(n=t[1],e=t[2],o="string"==typeof(i=t[3]).eventNamespace?"."+i.eventNamespace:"",this.on(a(s,o),n,function(t){return e.call(i,t)}));return this},$.fn.unobserve=function(){var t=arguments,e,i,n=t[0],s,o=this,r=function(t,e){t=t.split(/\s+/);for(var i=[],n=0;n<t.length;n++)i.push(t[n]+e);return i.join(" ")},a,l;if(2==t.length)if(s="string"==typeof(e=t[1]).eventNamespace?"."+e.eventNamespace:"","object"==typeof n)for(var c in n)l=c,o.off(r(l,s));else this.off(r(n,s));else if(3==t.length)if(i=t[1],s="string"==typeof(e=t[2]).eventNamespace?"."+e.eventNamespace:"","object"==typeof n)for(var c in n)a=c,o.off(r(a,s),i);else this.off(r(n,s),i);return this},function(h){C("widget"),C.widget.spinner=C.widget._base.extend({construct:function(t){var e=this;this.options=h.extend({spokes:16,animTime:75,color:"#555",type:"round"},t),this.$set=this.options.canvas.jquery?this.options.canvas:h(this.options.canvas),this.canvases=this.getAndValidateCanvases(this.$set),this.canvases.length&&(this.rotation=2*Math.PI/this.options.spokes,this.rgbColor=this.getRGBColor(this.options.color),this.contexts=this.setupContexts(this.canvases),this.draw())},draw:function(){var t=this;this.translateContexts(this.contexts),this.drawIntervalID=setInterval(function(){t.paintFrame()},this.options.animTime)},clearFrame:function(t){t.ctx.clearRect(t.negHalf,t.negHalf,t.size,t.size)},paintFrame:function(){for(var t=0;t<this.contexts.length;t++){var e=this.contexts[t];if(this.isPresent(e.ctx.canvas)){this.clearFrame(e),e.ctx.rotate(this.rotation);for(var i=0;i<this.options.spokes;i++)e.ctx.rotate(this.rotation),e.ctx.strokeStyle=this.rgbColor+i/this.options.spokes+")",e.ctx.beginPath(),e.ctx.moveTo(0,e.startPos),e.ctx.lineTo(0,e.endPos),e.ctx.stroke()}else this.contexts.splice(t,1),t--}if(!this.contexts.length)for(var e in clearInterval(this.drawIntervalID),this.contexts)this.contexts.hasOwnProperty(e)&&(e=this.contexts[e],this.clearFrame(e),this.translateContext(e,!0))},isPresent:function(t){return!!h(t).closest("body").length},getAndValidateCanvases:function(t){var i=[];return t.each(function(t,e){"CANVAS"===e.nodeName&&i.push(e)}),i},setupContexts:function(t){var e=[];for(var i in t)if(t.hasOwnProperty(i)){i=t[i];var n=h(i);if(n.is(":visible")){var s=n.height(),o=.5*s,r=-1*o,a=Math.floor(1/3*s),l=s*(s<30?.08:.0625),c=Math.floor(.5*s)-l,u=i.getContext("2d");u.lineWidth=l,u.lineCap=this.options.type,e.push({ctx:u,size:s,halfSize:o,negHalf:r,startPos:a,endPos:c,thickness:l})}}return e},translateContext:function(t,e){e?t.ctx.translate(t.negHalf,t.negHalf):t.ctx.translate(t.halfSize,t.halfSize)},translateContexts:function(t,e){for(var i in t)t.hasOwnProperty(i)&&(i=t[i],this.translateContext(i,e))},getRGBColor:function(t){function e(t,e,i){return parseInt(n(t).substring(e,i),16)}function n(t){return"#"==t.charAt(0)?t.substring(1,7):t}return["rgba(",e(t,0,2),",",e(t,2,4),",",e(t,4,6),","].join("")},clearAllCanvases:function(){if(this.contexts)for(var t=0;t<this.contexts.length;t++){var e=this.contexts[t];this.isPresent(e.ctx.canvas)?this.clearFrame(e):(this.contexts.splice(t,1),t--)}},destruct:function(){clearInterval(this.drawIntervalID),this.clearAllCanvases()}})}(jQuery),function(k){C("widget"),C.widget.autoComplete=C.widget._base.extend({construct:function(t){C.log("autocomplete:construct"),this.opts=k.extend({minChar:1,delay:200,paramName:"search_by",ajaxParamName:"search_by",button:".search-submit",dropdownOverride:null,overrideActiveClass:null,topOffset:0,showTypeIcons:!1,showCommentCounts:!1,limitParamsString:"",additionalGetParamsString:"",cssPositioning:"absolute",combineResultSets:!1,callback:null,lastItem:null,lastItemCallback:null,track:null,refreshAfterSchoolChange:!1,urlToNavigateToAfterSchoolChange:null,schoolChangeCallback:null,useSpinner:!1,onTextboxBlur:null,attachToParent:null,overrideSolutionsImage:!1},t),"answers"==this.opts.type&&(this.opts.subType="answers",this.opts.type="instantAnswers"),this.mouseInDropdown=!1,this.$initializationElement=this.opts.el.jquery?this.opts.el:k(this.opts.el),this.$lastItem=this.opts.lastItem?this.opts.lastItem.jquery?this.opts.lastItem:k(this.opts.lastItem):null,this.$initializationElement.length&&(this.$initializationElement.is("input")||this.$initializationElement.is("textarea")?(this.$input=this.$initializationElement,this.$el=this.$input.offsetParent(),this.inputInitialized=!0):(this.$el=this.$initializationElement,this.favorWrapElem=!0,this.$input=this.$el.find("input[name="+this.opts.paramName+"]"),this.inputInitialized=!1),this.activeQuestionsListWidget=null,this.needsQuestionsLists=!1,this.type||(this.type=this.opts.type||"combined"),this.determineQuestionsListNeeded(),this.$parentHeaderSelector=this.$input.closest(".chg-header, .chg-hdr-root"),this.isHeaderChild=this.$parentHeaderSelector&&this.$parentHeaderSelector.length,this.$dialogParentSelector=this.$input.closest(".dialog-widget"),this.isDialogChild=this.$dialogParentSelector&&this.$dialogParentSelector.length,this.opts.attachToParent?this.$appendTarget=this.opts.attachToParent:this.$appendTarget=this.isHeaderChild?C.dom.$headerRoot:C.dom.$root,this.isFixedCss="fixed"===this.opts.cssPositioning.toLowerCase(),this.$input.attr("autocomplete","off"),this.$form=this.$input.parents("form"),this.$button=this.$form.parent().find(this.opts.button),this.buttonRestoreHtml=this.$button.html(),this.liRestoreHtml=null,this.submitButtonSpinner=null,this.url="/_ajax/autocomplete",this.trackId=this.generateTrackId(),this.xhrCounter=0,this.xhr=[],this.canShow=0,this.suggestVal="",this.lastQuery="",this.userForcedSubmission=!1,this.saveClickedHeader=null,this.changeSchoolUrl="/_ajax/user/changeschool",this.createDropdownContainer(),this.doBind(),this.hasRoundedCorners=parseInt(this.$input.css("border-bottom-right-radius"),10))},generateTrackId:function(){var t;return("000000000"+Math.abs(4294967295*Math.random()<<0).toString(16)).slice(-8)},destruct:function(){if(C.log("autocomplete:destruct"),this.$dropdown&&this.opts.dropdownOverride&&this.opts.overrideActiveClass)return this.$dropdown.hasClass(this.opts.overrideActiveClass)||this.$dropdown.addClass(this.opts.overrideActiveClass),void this.$dropdown.remove();this.activeQuestionsListWidget&&this.activeQuestionsListWidget.destroy(),this.submitButtonSpinner&&this.submitButtonSpinner.destroy(),this.$dropdown&&this.$dropdown.length&&this.$dropdown.remove()},determineQuestionsListNeeded:function(){var t=new RegExp("question","i"),e=new RegExp("instantanswers","i"),i=new RegExp("homeworkhelp","i"),n=this.type;(t.test(n)||e.test(n)||i.test(n))&&(this.needsQuestionsLists=!0),"answers"==this.opts.subType&&(this.needsQuestionsLists=!1)},createDropdownContainer:function(){if(this.opts.dropdownOverride&&this.opts.overrideActiveClass)return"string"==typeof this.opts.dropdownOverride&&(this.opts.dropdownOverride=k(this.opts.dropdownOverride)),this.$dropdown=this.opts.dropdownOverride,void this.$dropdown.addClass("chg-autocomplete-container");this.$dropdown=k('<div class="chg-autocomplete-container" id="autocomplete-'+this.instanceNumber+'"></div>').appendTo(this.$appendTarget).hide().css({position:this.opts.cssPositioning,zIndex:-1,width:this.opts.width})},doBind:function(){var e=this;this.$input.observe({"focus.autocomplete":this.onTextboxFocus,"blur.autocomplete":this.opts.onTextboxBlur||this.onTextboxBlur,"keydown.autocomplete":this.onKeyDown,"keyup.autocomplete":this.onKeyUp},this),this.$input.observe("paste",function(){var t=arguments;setTimeout(function(){e.onKeyUp.apply(e,t)},0)},this),this.$dropdown.observe({mouseover:this.onMouseOverSelection,mousedown:this.onSelectionClick,mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave},this),this.$button.observe("click",this.onButtonClick,this),k(window).observe("resize",this.hideDropdown,this)},getParsedUrl:function(){var t="",e="",i="",n="";return this.opts.additionalGetParamsString.length&&(t=(n="&"==this.opts.additionalGetParamsString.substring(1)?"":"&")+this.opts.additionalGetParamsString),this.opts.limitParamsString.length&&(e=(n="&"==this.opts.limitParamsString.substring(1)?"":"&")+this.opts.limitParamsString),this.opts.combineResultSets&&(i="&combine_results="+this.opts.combineResultsString),this.url+"?"+this.opts.ajaxParamName+"="+encodeURIComponent(this.$input.val())+"&type="+this.type+t+e+i+"&trackid="+this.trackId},fireAjax:function(){clearTimeout(this.ajaxTimeout);var t=this;this.ajaxTimeout=setTimeout(function(){t.callAjax()},this.opts.delay)},callAjax:function(){if(this.canShow){if(this.opts.useSpinner&&this.$button.length&&this.buttonRestoreHtml&&!this.submitButtonSpinner){this.$button.html('<canvas class="loading" width="15" height="15"><img src="/s/_global/images/ajax-loader.gif"></canvas>');var t=this.$button.find("canvas.loading");this.submitButtonSpinner=new C.widget.spinner({canvas:t,color:"#000000"})}this.xhr.push(k.ajax({url:this.getParsedUrl(),dataType:"json",context:this,success:this.onAjaxSuccess,error:this.onAjaxError}))}},onAjaxSuccess:function(t,e,i){this.canShow&&this.isResponseInOrder(i)&&this.onAjaxResponse(t)},onAjaxError:function(t,e,i){},isResponseInOrder:function(t){var e;for(e=0;e<this.xhr.length&&this.xhr[e]!==t;e++);return e>=this.xhrCounter&&(this.xhrCounter=e,!0)},onAjaxResponse:function(t){var e;this.buildAutocompleteDropdown(t)?(this.$button.length&&this.submitButtonSpinner&&(this.$button.html(this.buttonRestoreHtml),this.submitButtonSpinner=null),this.showDropdown(),k("body").trigger("autocomplete:success",{data:t})):k("body").trigger("autocomplete:noResults")},showDropdown:function(){if(this.canShow&&!this.userForcedSubmission){if(this.opts.dropdownOverride&&this.opts.overrideActiveClass)return this.$dropdown&&!this.$dropdown.hasClass(this.opts.overrideActiveClass)&&this.$dropdown.addClass(this.opts.overrideActiveClass),void this.$dropdown.find("p").css({visibility:"hidden"}).each(function(){var t=this,e=k(this),i=e.text(),n=e.find("span").text(),s,o="",r,a;t.scrollHeight<=t.offsetHeight?e.css({visibility:"visible"}):(s=i.split(/\s+/),r=0,a=setInterval(function(){return s[r]?(o+=s[r]+" ",e.text(o),t.scrollHeight>t.offsetHeight?(s=(s=s.slice(0,r-1)).join(" ")+"...",n.length&&($regex=new RegExp("("+n+")"),s=s.replace($regex,'<span class="chg-suggest-term">$1</span>')),e.html(s),clearInterval(a),void e.css({visibility:"visible"})):void r++):(clearInterval(a),void e.css({visibility:"visible"}))},0))});var t=this.opts.width||this.$input.outerWidth()-2,e=this.$input.offset(),i=e.left,n=this.favorWrapElem?this.$initializationElement:this.$input,s=this.isFixedCss?n.position().top:n.offset().top,o=n.outerHeight(!0),r=e.left,a=o+this.opts.topOffset,l=[0],c;if(this.$input.parents().each(function(t,e){l.push(+k(e).css("zIndex")||0)}),l=C.utility.max(l)+1,"fixed"===this.opts.cssPositioning||this.isHeaderChild)this.isDialogChild&&(a+=n.position().top+parseInt(this.$dialogParentSelector.css("top"),10));else a+=this.$input.scrollTop()+e.top;this.$dropdown.css({position:this.opts.cssPositioning,zIndex:l,width:t+"px",left:r+"px",top:a+"px"}).show(),this.opts.attachToParent&&this.$dropdown.css({position:"relative",left:"0px",top:"0px"}),this.hasRoundedCorners&&this.$input.css({"border-radius":"5px 5px 0 0"}),this.userForcedSubmission=!1}},hideDropdown:function(){var t=this;this.opts.dropdownOverride&&this.opts.overrideActiveClass?this.$dropdown.hasClass(this.opts.overrideActiveClass)&&this.$dropdown.removeClass(this.opts.overrideActiveClass):setTimeout(function(){t.hasRoundedCorners&&t.$input.css({"border-radius":"5px"}),t.$dropdown.hide()},300)},onTextboxFocus:function(t){this.$input.val().length&&this.$dropdown.html().length&&(this.canShow=1,this.showDropdown())},onTextboxBlur:function(t){this.mouseInDropdown||this.$input.is(":focus")||(this.canShow=0,this.hideDropdown())},onMouseEnter:function(){this.mouseInDropdown||(this.mouseInDropdown=!0)},onMouseLeave:function(){this.mouseInDropdown&&(this.mouseInDropdown=!1,this.onTextboxBlur())},onKeyUp:function(t){if(13==t.keyCode)return this.userForcedSubmission=!0,void this.hideDropdown();var e=k.trim(this.$input.val());if(this.lastQuery!=e){var i;if((this.lastQuery=e)==String(this.$input.attr("textvalue"))||""===e||e.length<this.opts.minChar)return this.$button.length&&this.submitButtonSpinner&&(this.$button.html(this.buttonRestoreHtml),this.submitButtonSpinner=null),this.canShow=0,void this.hideDropdown();this.canShow=1,this.suggestVal="",this.fireAjax(),this.userForcedSubmission=!1}},onKeyDown:function(t){40==t.keyCode?(this.doNextSelection(t),t.preventDefault()):38==t.keyCode?(this.doPrevSelection(t),t.preventDefault()):27==t.keyCode?this.$input.blur():13==t.keyCode&&this.onSubmit(t)},onMouseOverSelection:function(t){var e=this.getTargetedLi(t),i=t.currentTarget;e.hasClass("disabled")||(e.length&&(k(i).find("li").removeClass("suggest-selected"),e.addClass("suggest-selected")),this.changeSelection(e))},getTargetedLi:function(t){return k(t.target).closest("li")},doNextSelection:function(t){var e=this.$dropdown.find("li"),i=e.index(this.$dropdown.find("li.suggest-selected")),n;if(e.removeClass("suggest-selected"),(n=-1==i||i>=e.length-1?e.eq(0).addClass("suggest-selected"):e.eq(i+1).addClass("suggest-selected")).hasClass("disabled"))return this.doNextSelection(t),!1;this.changeSelection(n)},doPrevSelection:function(t){var e=this.$dropdown.find("li"),i=e.index(this.$dropdown.find("li.suggest-selected")),n;if(e.removeClass("suggest-selected"),(n=-1==i||0===i?e.eq(e.length-1).addClass("suggest-selected"):e.eq(i-1).addClass("suggest-selected")).hasClass("disabled"))return this.doPrevSelection(t),!1;this.changeSelection(n)},onButtonClick:function(){var t=k.trim(this.$input.val());return t!=this.$input.attr("textvalue")&&""!==t&&this.$form.submit(),!1},changeSelection:function(t){this.$curLi=t;var e=this.$curLi.find(".autocomplete-hdr");e.length?this.saveClickedHeader=e.text():this.saveClickedHeader=null,this.suggestVal=this.saveClickedHeader},onSubmit:function(t){if(!this.$curLi){if(this.opts.track){var e=this.opts.track.split("=");this.$form.append('<input type="hidden" name="'+e[0]+'" value="'+e[1]+'" />')}return this.opts.callback&&this.opts.callback(t),!0}if(this.$curLi.hasClass("disabled"))return t.preventDefault(),!1;if(this.suggestVal.length){t.preventDefault(),this.hideDropdown();var i=this.$curLi.find(".autocomplete-hdr");if(i.length&&(this.saveClickedHeader=i.text()),this.opts.callback&&this.$curLi)return this.opts.callback(t,this.$curLi,this.$initializationElement),!1;if(this.$curLi.hasClass("school-change"))return this.changeUserSchool(t,this.$curLi),!1;var n=this.$curLi.attr("data-url"),s=this.$curLi.attr("data-ii");return null!=s&&(n=-1==n.indexOf("?")?n+"?ii="+s:n+"&ii="+s,this.opts.track&&(n+="&"+this.opts.track)),top.location.href=n,!1}return!0},getDisabledItems:function(t){this.opts||(this.opts={}),this.opts.disabledItems&&"object"==typeof this.opts.disabledItems||(this.opts.disabledItems={});var e=[];return this.opts.disabledItems[t]&&"object"==typeof this.opts.disabledItems[t]&&_.each(this.opts.disabledItems[t],function(t){e.push(k.trim(t))}),e},convertItemsToArray:function(t){return t?"object"!=typeof t?[t]:t:[]},setDisabledItems:function(t,e){var i=this.getDisabledItems(t);return t&&"string"==typeof t&&(this.opts.disabledItems[t]=this.convertItemsToArray(e)),i.toString()!=this.getDisabledItems(t).toString()&&(this.hideDropdown(),this.$dropdown.html("")),this},addDisabledItems:function(t,e){var i=_.union(this.getDisabledItems(t),this.convertItemsToArray(e));return this.setDisabledItems(t,i)},removeDisabledItems:function(t,e){var i=_.difference(this.getDisabledItems(t),this.convertItemsToArray(e));return this.setDisabledItems(t,i)},checkItemIsDisabled:function(t){if(!t||"object"!=typeof t||!_.size(t))return!1;if(t.hasOwnProperty("disabled")&&1==t.disabled)return!0;var i=!1,n=this;return _.each(t,function(t,e){if(-1<_.indexOf(n.getDisabledItems(e),t))return!(i=!0)}),i},buildAutocompleteSectionItem:function(t,e){var i=[],n=e,s='<span class="chg-suggest-term">$1</span>',o=!!t.title&&0<=t.title.toLowerCase().indexOf("question"),r=!o||t.replaceIsSafe,a=o&&r?k.trim(t.replaceTerm):k.trim(this.$input.val()),l=new RegExp("("+this.RegExpQuote(a)+")","i"),c=k("<div/>").html(t.title).text(),u=!(void 0===t.hasTBS||!t.hasTBS)&&t.hasTBS,h='<li data-ii="'+n+'" ',d=this.checkItemIsDisabled(t.attributes)?"disabled ":"";if(t.listClass&&(d+=" "+t.listClass+" "),d&&(h+='class="'+k.trim(d)+'" '),i.push(h),t.attributes)for(var g in t.attributes)i.push(g+'="'+t.attributes[g]+'" ');if(i.push(">"),t.img){if(t.img.url){i.push('<img src="'+t.img.url+'"');var p=t.img.alt?t.img.alt:"chegg image";i.push(' alt="'+p+'"'),t.img.width&&i.push(' width="'+t.img.width+'"'),t.img.height&&i.push(' height="'+t.img.height+'"'),t.img.onError&&i.push('this.onerror=null; onError="'+t.img.onError+'"'),i.push(" />")}i.push("<div>")}if(t.typeicon&&this.opts.showTypeIcons&&("count"===t.typeicon.type&&t.countDisplay?i.push('<span class="icn-count-22 '+t.typeicon.iconclass+'">'+t.countDisplay+"</span>"):i.push('<span class="autocomplete-type-icon '+t.typeicon.iconclass+'">'+t.typeicon.type+"</span>")),void 0!==t.starRating&&t.starRating&&i.push('<div class="autocomplete-star-rating"><span class="star-'+t.starRating+'-sm">'+t.starRating+" Stars</span></div>"),u&&t.solutionsUrl&&!this.opts.overrideSolutionsImage&&i.push('<a class = "autocomplete-hasTBS" href ='+t.solutionsUrl+"></a>"),t.title){var f=r?c.replace(l,s):t.title;i.push('<p class="autocomplete-hdr">'+f+"</p>")}if(t.subtitle){var m=r?t.subtitle.replace(l,s):t.subtitle;i.push('<p class="autocomplete-subtitle">'+m+"</p>")}if(t.author){var v=t.author.replace(l,s);i.push('<p class="autocomplete-author">'+v+"</p>")}if(t.isbnText){var b=t.isbnText.replace(l,s);b=b.replace("&amp;nbsp;"," &nbsp; "),t.editionNo&&0!=t.editionNo&&(b="Edition: "+t.editionNo+" "+b),i.push('<p class="autocomplete-isbn">'+b+"</p>")}if(t.coursename){var y=t.coursename.replace(l,s);i.push('<p class="autocomplete-course">'+y+"</p>")}if(this.showCommentCounts&&0<t.commentCount&&i.push('<span class="comment-count">'+t.commentCount+"</span>"),t.button){var C=t.button.id?' id="'+t.button.id+'"':"",w=t.button.btnclass?' class="'+t.button.btnclass+'"':"btn-primary-mini",x=t.button.text?t.button.text:"go";i.push("<button"+C+w+">"+x+"</button>")}return t.img&&i.push("</div>"),i.push("</li>"),i.join("")},buildAutocompleteDropdown:function(t){var e="object"==typeof t?t:jQuery.parseJSON(t);if(e){var i=this.opts.type.replace("|","_"),n,s=k('<div id="'+i+'_autocomplete"></div>'),o=1;if(e){for(var r in e)if(e[r].title){var a='<p class="automplete-sec-hdr">'+e[r].title+"</p>";s.append(k(a));var l=k("<ul></ul>");for(var c in this.needsQuestionsLists&&l.addClass("questions-list"),e[r].items){var u=this.buildAutocompleteSectionItem(e[r].items[c],o),h=k(u);h.data("itemDetail",e[r].items[c]),l.append(h),o++}this.$lastItem&&(this.$lastItem.addClass("last-item"),l.append(this.$lastItem)),s.append(l)}if(this.$lastItem&&0==s.find("ul").length){this.$lastItem.addClass("last-item");var d=k("<ul></ul>");d.append(this.$lastItem),s.append(d)}return this.$dropdown.html(s).find("li:last-child").css({borderBottom:0}),""!=s.html()}}},wireQuestionsList:function(t){this.activeQuestionsListWidget&&this.activeQuestionsListWidget.destroy();var e=this.$dropdown.find(".questions-list");e.length&&(this.activeQuestionsListWidget=new C.widget.questionsList({el:e,removeCourseButton:!0,disableAnswering:!0}));var i=t||null;i&&this.activeQuestionsListWidget&&this.activeQuestionsListWidget.getAjaxQuestion(i)},RegExpQuote:function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},onSelectionClick:function(t){if(k(t.target).hasClass("autocomplete-hasTBS"))this.hideDropdown();else if(!k(t.target).hasClass("automplete-sec-hdr")&&1===t.which){var e=this.getTargetedLi(t);if(!e.hasClass("disabled")){if(this.$curLi=e,this.hideDropdown(),this.$curLi.hasClass("last-item"))return this.opts.lastItemCallback&&this.opts.lastItemCallback(t,this.$curLi,this.$initializationElement),!1;if(!this.opts.callback){var i=this.$curLi.find(".autocomplete-hdr");i.length&&(this.saveClickedHeader=i.text(),this.updateInputVal()),this.liRestoreHtml=this.$curLi.html(),this.$curLi.html('<canvas class="loading" width="20" height="20"><img src="/s/_global/images/ajax-loader.gif"></canvas>');var n=this.$curLi.find("canvas.loading");if(new C.widget.spinner({canvas:n,color:"#000000"}),this.$curLi.hasClass("school-change"))return this.changeUserSchool(t,this.$curLi),!1;var s=this.$curLi.attr("data-url"),o=this.$curLi.attr("data-ii");return null!=o&&(s=-1==s.indexOf("?")?s+"?ii="+o:s+"&ii="+o,this.opts.track&&(s+="&"+this.opts.track)),this.liRestoreHtml&&(this.$curLi.html(this.liRestoreHtml),this.liRestoreHtml=null),top.location.href=s,!1}this.opts.callback(t,this.$curLi,this.$initializationElement)}}},changeType:function(t,e){var i=e||{},n=this.opts;"string"!=typeof t&&JSON.stringify(t),this.type=t,this.opts=k.extend({type:t},n,i),this.$dropdown&&(this.hideDropdown(),this.$dropdown.html("")),this.determineQuestionsListNeeded()},setPlaceholder:function(t){this.$input.attr("placeholder",t)},changeUserSchool:function(t,e){var i=e.jQuery?e:k(e),n=i.attr("data-schoolid");if(this.updateInputVal(),this.liRestoreHtml&&(this.$curLi.html(this.liRestoreHtml),this.liRestoreHtml=null),this.opts.schoolChangeCallback)return this.opts.schoolChangeCallback(t,i),!1;this.submitUserSchool(n)},submitUserSchool:function(t){var e={gid:t},i=this;this.addAPITokenTo(e);var n=this.opts.refreshAfterSchoolChange,s=this.opts.urlToNavigateToAfterSchoolChange;k.ajax({type:"POST",dataType:"json",url:this.changeSchoolUrl,data:e,success:function(t){s?C.utility.navigate(s):(n&&(k(".chg-content > div").css({opacity:.5}),top.location.reload()),i.opts.schoolChangeSuccessCallback&&i.opts.schoolChangeSuccessCallback(t))},error:function(){return!1}})},updateInputVal:function(){this.saveClickedHeader&&(this.$input.off(".autocomplete"),this.$input.val(this.saveClickedHeader),this.$input.blur(),this.$input.observe({"focus.autocomplete":this.onTextboxFocus,"blur.autocomplete":this.onTextboxBlur,"keydown.autocomplete":this.onKeyDown,"keyup.autocomplete":this.onKeyUp},this),this.saveClickedHeader=null)},addAPITokenTo:function(t){t.token=C.global.csrfToken}})}(jQuery),function(v){C.widget.autoCompleteHeader=C.widget.autoComplete.extend({construct:function(t){C.log("autocomplete:construct"),this.GAclient=Eggshell.create("C.report.GA"),this.opts=v.extend({minChar:1,delay:200,paramName:"search_by",ajaxParamName:"search_by",button:".search-magnify-btn",dropdownOverride:null,overrideActiveClass:null,topOffset:0,showTypeIcons:!1,showCommentCounts:!1,limitParamsString:"",additionalGetParamsString:"",cssPositioning:"absolute",combineResultSets:!1,callback:null,lastItem:null,lastItemCallback:null,track:null,refreshAfterSchoolChange:!1,urlToNavigateToAfterSchoolChange:null,schoolChangeCallback:null,useSpinner:!1,inHeader:!1,psycicResults:"#autosuggest-psycic",autoSuggestResults:"#autosuggest-results",container:"#autosuggest-results-container",thumbWidth:70,thumbHeight:85,thumbLetterBox:!0,showResultsFlag:!1,slideDown:!0},t),this.mouseInDropdown=!1,this.$initializationElement=this.opts.el.jquery?this.opts.el:v(this.opts.el),this.$lastItem=this.opts.lastItem?this.opts.lastItem.jquery?this.opts.lastItem:v(this.opts.lastItem):null,this.$initializationElement.length&&(this.$el=this.$initializationElement,this.favorWrapElem=!0,this.$input=this.$el.find("input[name="+this.opts.paramName+"]"),this.inputInitialized=!1,this.type||(this.type=this.opts.type||"combined"),this.$parentHeaderSelector=this.$input.closest(".chg-header, .chg-hdr-root"),this.isHeaderChild=this.$parentHeaderSelector&&this.$parentHeaderSelector.length,this.$dialogParentSelector=this.$input.closest(".dialog-widget"),this.isDialogChild=this.$dialogParentSelector&&this.$dialogParentSelector.length,this.$appendTarget=this.isHeaderChild?C.dom.$headerRoot:C.dom.$root,this.isFixedCss="fixed"===this.opts.cssPositioning.toLowerCase(),this.$input.attr("autocomplete","off"),this.$form=this.$input.parents("form"),this.$button=this.$form.parent().find(this.opts.button),this.buttonRestoreHtml=this.$button.html(),this.liRestoreHtml=null,this.submitButtonSpinner=null,this.url="/_ajax/autocomplete",this.trackId=this.generateTrackId(),this.xhrCounter=0,this.xhr=[],this.canShow=0,this.suggestVal="",this.lastQuery="",this.userForcedSubmission=!1,this.saveClickedHeader=null,this.changeSchoolUrl="/_ajax/user/changeschool",this.getSchoolUrl="/_ajax/school/info",this.gid=C.utility.getCookie("gid"),this.schoolInfo={},this.evaluateSchoolData(this.gid),this.createDropdownContainer(),this.doBind(),v("#header_autocomplete").prop("disabled",!1).blur(),v("#header_autocomplete_close").removeClass("icn-disabled"),v(".chg-header input#header_autocomplete").keyup(function(t){13==t.keyCode&&(0<v("li.suggest-selected").length?C.logger.doSessionLog({src:"header"}):C.logger.doSessionLog({src:"header",action:"enter"}))}),v(".chg-header #header_autocomplete_submit").click(function(t){C.logger.doSessionLog({src:"header",action:"button"})}))},createDropdownContainer:function(){if(this.opts.dropdownOverride&&this.opts.overrideActiveClass)return"string"==typeof this.opts.dropdownOverride&&(this.opts.dropdownOverride=v(this.opts.dropdownOverride)),this.$dropdown=this.opts.dropdownOverride,void(this.$psycic=this.opts.psycicResults);this.$dropdown=v('<div class="chg-autocomplete-container" id="autocomplete-'+this.instanceNumber+'"></div>').appendTo(this.$appendTarget).hide().css({position:this.opts.cssPositioning,zIndex:-1,width:this.opts.width})},doBind:function(){this.$input.observe({"focus.autocomplete":this.onTextboxFocus,"blur.autocomplete":this.onTextboxBlur,"keydown.autocomplete":this.onKeyDown,"keyup.autocomplete":this.onKeyUp},this),this.$dropdown.observe({mouseover:this.onMouseOverSelection,mousedown:this.onSelectionClick,mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave},this),v(this.opts.psycicResults).observe({mousedown:this.onSelectionClick,mouseover:this.onMouseOverSelection},this),this.$button.observe("click",this.onButtonClick,this),v(".chg-container").observe({mousedown:this.hideAS},this),v(".chg-header").observe({mousedown:this.hideAS},this),v("#header_autocomplete_close").observe({click:this.hideAS},this),v(window).observe("resize",this.hideDropdown,this)},getParsedUrl:function(){var t="",e="",i="",n="";return this.opts.additionalGetParamsString.length&&(t=(n="&"==this.opts.additionalGetParamsString.substring(1)?"":"&")+this.opts.additionalGetParamsString),this.opts.limitParamsString.length&&(e=(n="&"==this.opts.limitParamsString.substring(1)?"":"&")+this.opts.limitParamsString),this.opts.combineResultSets&&(i="&combine_results="+this.opts.combineResultsString),this.url+"?"+this.opts.ajaxParamName+"="+encodeURIComponent(this.$input.val())+"&type="+this.type+t+e+i+"&trackid="+this.trackId},onTextboxFocus:function(t){this.$input.val().length&&this.$dropdown.html().length&&(this.canShow=1),this.animateContainerOpen()},onTextboxBlur:function(t){this.mouseInDropdown||(this.$input.is(":focus")||(this.canShow=0,this.hideDropdown(),this.$input.val()||this.clearSearchInput()),this.opts.showResultsFlag=!1)},onButtonClick:function(){var t=v.trim(this.$input.val());return t!=this.$input.attr("textvalue")&&""!==t&&this.$form.submit(),!1},callAjax:function(){if(this.canShow){if(this.opts.useSpinner&&this.$button.length&&this.buttonRestoreHtml&&!this.submitButtonSpinner){this.$button.html('<canvas class="loading" width="15" height="15"><img src="/s/_global/images/ajax-loader.gif"></canvas>');var t=this.$button.find("canvas.loading");this.submitButtonSpinner=new C.widget.spinner({canvas:t,color:"#FFFFFF"})}this.xhr.push(v.ajax({url:this.getParsedUrl(),dataType:"json",context:this,success:this.onAjaxSuccess,error:this.onAjaxError}))}},onAjaxResponse:function(t){var e;this.buildAutocompleteDropdown(t)?this.$button.length&&this.submitButtonSpinner&&(this.$button.html(this.buttonRestoreHtml),this.submitButtonSpinner=null):v("body").trigger("autocomplete:noResults")},onKeyUp:function(t){if(13==t.keyCode){var e=v("#autosuggest-psycic li.autosuggest-result-psycic.suggest-selected a");return 0<e.length&&(e.removeClass("suggest-selected"),this.GAclient.trigger("report custom event",{page:"Header",section:"Psycic search",link:e.attr("data-reportlink")})),this.userForcedSubmission=!0,void this.hideDropdown()}var i=v.trim(this.$input.val());if(this.lastQuery!=i){var n;if((this.lastQuery=i)==String(this.$input.attr("textvalue"))||""===i||i.length<this.opts.minChar)return this.$button.length&&this.submitButtonSpinner&&(this.$button.html(this.buttonRestoreHtml),this.submitButtonSpinner=null),this.canShow=0,v("#autosuggest-results").hide().removeClass("active"),v(this.opts.psycicResults).show().css("height","auto").addClass("active"),void v(this.opts.psycicResults).find("li").removeClass("suggest-selected");this.canShow=1,this.suggestVal="",this.fireAjax(),this.userForcedSubmission=!1,v(this.opts.psycicResults).hide(),v(this.opts.psycicResults).find("li").removeClass("suggest-selected"),this.onTextboxFocus()}},animateContainerOpen:function(){C.global.pageObject.schoolId&&(this.responseId=C.global.pageObject.schoolId),this.canShow?(v(this.opts.autoSuggestResults).removeAttr("style").addClass("active"),v(this.opts.autoSuggestResults).show(),this.showDropdown()):(this.GAclient.trigger("report custom event",{page:"Header",section:"Psycic search",link:"Show"}),this.updatePsycicMarkup(),v(this.opts.psycicResults).removeAttr("style").addClass("active"),v(this.opts.psycicResults).show(),v(".icn-x").show(),this.opts.showResultsFlag=!0),1==this.opts.slideDown?v(this.opts.container).slideDown(300):v(this.opts.container).css("display","block"),this.resizeTitleContainer()},clearSearchInput:function(){v("#header_autocomplete").val(""),v(".icn-x").hide(),v("#header_autocomplete").focusout()},onMouseEnter:function(){this.mouseInDropdown||(this.mouseInDropdown=!0)},onMouseOverSelection:function(t){var e=this.getTargetedLi(t),i=t.currentTarget;e.length&&(v(i).find("li").removeClass("suggest-selected"),e.addClass("suggest-selected")),this.changeSelection(e)},showDropdown:function(){if(this.canShow&&!this.userForcedSubmission)if(this.opts.dropdownOverride&&this.opts.overrideActiveClass)this.$dropdown&&!this.$dropdown.hasClass(this.opts.overrideActiveClass)&&this.$dropdown.addClass(this.opts.overrideActiveClass);else{var t=this.opts.width||this.$input.outerWidth(),e=this.$input.offset(),i=e.left,n=this.favorWrapElem?this.$initializationElement:this.$input,s=this.isFixedCss?n.position().top:n.offset().top,o=n.outerHeight(!0),r=e.left,a=o+this.opts.topOffset,l=[0],c;if(this.$input.parents().each(function(t,e){l.push(+v(e).css("zIndex")||0)}),l=C.utility.max(l)+1,"fixed"===this.opts.cssPositioning||this.isHeaderChild)this.isDialogChild&&(a+=n.position().top+parseInt(this.$dialogParentSelector.css("top"),10));else a+=this.$input.scrollTop()+e.top;this.$dropdown.css({position:this.opts.cssPositioning,zIndex:l,width:t+"px",left:r+"px",top:a+"px"}).show(),this.userForcedSubmission=!1}},hideDropdown:function(){var t=this;v("#autosuggest-results-container").hide(),t.$dropdown.hide(),v("#header_autocomplete").focusout()},hideAS:function(t){var e=t.target,i=document.getElementById("autosuggest-results-container"),n=v.contains(i,e),s=e==document.getElementById("header_autocomplete"),o=this;v(i).find("li").removeClass("suggest-selected"),0==v(e).hasClass("icn-magnify")&&(n||s||(v(i).hide(),v(this.opts.autoSuggestResults).hide(),v("#header_autocomplete").blur().val("")),this.canShow=0,this.opts.showResultsFlag=!1)},toOrdinal:function(t){var e=t%10;return 1==e&&11!=t?t+"st":2==e&&12!=t?t+"nd":3==e&&13!=t?t+"rd":t+"th"},buildAutocompleteSectionItem:function(t,e){var i=[],n=e,s='<span class="chg-suggest-term">$1</span>',o=!!t.title&&0<=t.title.toLowerCase().indexOf("question"),r=!o||t.replaceIsSafe,a=o&&r?v.trim(t.replaceTerm):v.trim(this.$input.val()),l=new RegExp("("+this.RegExpQuote(a)+")","i"),c=v("<div/>").html(t.title).text(),u=!(void 0===t.hasTBS||!t.hasTBS)&&t.hasTBS,h=t.typeicon&&"course"==t.typeicon.type,d=t.itemType?t.itemType:"book";if(t.title){var g=r?c.replace(l,s):t.title;t.title=g}if(t.isbnText){var p=t.isbnText.replace(l,s);p=p.replace("&amp;nbsp;"," &nbsp; "),t.editionNo&&0!=t.editionNo&&(p=this.toOrdinal(t.editionNo)+" Edition - "+p),"ebook"==d&&(p=(p=p.replace("ISBN","eISBN")).replace("ISBN13","eISBN13")),t.isbnText=p}if(t.img&&t.img.url){var f=t.img.alt?t.img.alt:"chegg image";t.img.alt=f}if("object"==typeof t.itemPromo&&(t.itemPromo.hasTBS||t.itemPromo.hasInstantAccess||t.itemPromo.hasEbook)){var m=t.itemPromo;t.hasItemPromo=!0,t.hasTBS=!!m.hasTBS&&m.hasTBS,t.hasInstantAccess=!!m.hasInstantAccess&&m.hasInstantAccess,t.hasEbook=!!m.hasEbook&&m.hasEbook,t.hasEbook&&t.hasTBS?t.availableEbookText='<span class="skip-available">eTextbook</span>':t.availableEbookText='<span class="emphasis">Available:</span> eTextbook'}else t.hasItemPromo=!1;switch(t.courseClassName=courseClassName=h?" autosuggest-result-course":" ",t.iiCount=n,d){case"ebook":var m=template.ebook({item:t});break;case"course":var m=template.course({item:t});break;case"dac":var m=template.dac({item:t});break;case"book":default:var m=template.book({item:t})}return i.push(m),i.join("")},onKeyDown:function(t){40==t.keyCode?(this.doNextSelection(t),t.preventDefault()):38==t.keyCode?(this.doPrevSelection(t),t.preventDefault()):27==t.keyCode?(this.$input.val(""),this.$input.blur(),this.hideDropdown()):13==t.keyCode&&this.onSubmit(t)},doNextSelection:function(t){var e=this.$dropdown.hasClass("active")?this.$dropdown:this.$psycic,i=v(e).find("li.autosuggest-result"),n=i.index(v(e).find("li.suggest-selected")),s;i.removeClass("suggest-selected"),s=-1==n||n>=i.length-1?i.eq(0).addClass("suggest-selected"):i.eq(n+1).addClass("suggest-selected"),this.changeSelection(s)},doPrevSelection:function(t){var e=this.$dropdown.hasClass("active")?this.$dropdown:this.$psycic,i=v(e).find("li.autosuggest-result"),n=i.index(v(e).find("li.suggest-selected")),s;i.removeClass("suggest-selected"),s=-1==n||0===n?i.eq(i.length-1).addClass("suggest-selected"):i.eq(n-1).addClass("suggest-selected"),this.changeSelection(s)},evaluateSchoolData:function(t){return savedId=C.utility.getLocal("schoolId"),savedName=C.utility.getLocal("schoolName"),!!t&&(t&&savedId&&savedName&&t==savedId?(this.schoolInfo={schoolName:savedName,schoolId:savedId},!0):void this.getSchool(t))},updatePsycicMarkup:function(){v("#autosuggest-psycic").html(template.psycic({schoolInfo:this.schoolInfo}))},getSchool:function(t){var e={school:t},i=this;v.ajax({type:"GET",dataType:"json",url:this.getSchoolUrl,data:e,success:function(t){var e=t.schoolInfo;return C.utility.setLocal("schoolId",e.schoolId),C.utility.setLocal("schoolName",e.nickname?e.nickname:e.longName),i.schoolInfo={schoolName:e.nickname?e.nickname:e.longName,schoolId:e.schoolId},i.updatePsycicMarkup(),!0},error:function(){return!1}})},onSelectionClick:function(t){if(v(t.target).hasClass("autocomplete-show-more"))return this.hideAS(t.target),void C.utility.navigate(t.target.href);if(v(t.target).parents().hasClass("autosuggest-result-psycic")){var e=null!=v(t.target).parents("a").attr("href")?v(t.target).parents("a").attr("href"):v(t.target).attr("href");return this.GAclient.trigger("report custom event",{page:"Header",section:"Psycic search",link:v(t.target).parents("a").attr("data-reportlink")}),void C.utility.navigate(e)}if(!v(t.target).parents().hasClass("autosuggest-no-results")&&!v(t.target).hasClass("autocomplete-hasTBS")&&1===t.which){if(this.$curLi=this.getTargetedLi(t),this.hideDropdown(),this.$curLi.hasClass("last-item"))return this.opts.lastItemCallback&&this.opts.lastItemCallback(t,this.$curLi,this.$initializationElement),!1;if(this.$curLi.hasClass("question-get")&&!this.$curLi.hasClass("no-modal")&&"answers"!=this.opts.subType){var i=this.$curLi.attr("data-qid");return this.wireQuestionsList(i),!1}if(!this.opts.callback){var n=this.$curLi.find(".autocomplete-hdr");n.length&&(this.saveClickedHeader=n.text(),this.updateInputVal()),this.liRestoreHtml=this.$curLi.html(),this.$curLi.html('<canvas class="loading" width="20" height="20"><img src="/s/_global/images/ajax-loader-white.gif"></canvas>');var s=this.$curLi.find("canvas.loading");if(new C.widget.spinner({canvas:s,color:"#000000"}),this.$curLi.hasClass("school-change"))return this.changeUserSchool(t,this.$curLi),!1;var e=this.$curLi.attr("data-url"),o=this.$curLi.attr("data-ii");return null!=o&&(e=-1==e.indexOf("?")?e+"?ii="+o:e+"&ii="+o,this.opts.track&&(e+="&"+this.opts.track)),this.liRestoreHtml&&(this.$curLi.html(this.liRestoreHtml),this.liRestoreHtml=null),C.logger.doSessionLog({src:"header"}),C.utility.navigate(e),!1}this.opts.callback(t,this.$curLi,this.$initializationElement)}},resizeTitleContainer:function(){var t=v(".autosuggest-result-data").width();t=parseInt(t)-30,v(".autosuggest-result-title").css("width",t)},onSubmit:function(t){if(!this.$curLi){if(this.opts.track){var e=this.opts.track.split("=");this.$form.append('<input type="hidden" name="'+e[0]+'" value="'+e[1]+'" />')}return!0}var i=this.$curLi.find(".autocomplete-hdr"),n=this.$input.val();if(this.suggestVal&&this.suggestVal.length||""!=n){if(t.preventDefault(),this.hideDropdown(),i.length&&(this.saveClickedHeader=i.text()),this.opts.callback&&this.$curLi)return this.opts.callback(t,this.$curLi,this.$initializationElement),!1;if(this.$curLi.hasClass("school-change"))return this.changeUserSchool(t,this.$curLi),!1;var s=this.$curLi.attr("data-url"),o=this.$curLi.attr("data-ii");if(null!=o){var r=v(".autosuggest-result"),a=!1;if(v.each(r,function(){v(this).hasClass("suggest-selected")&&(a=!0)}),!a)return s="/search/"+n+"/books",C.utility.navigate(s),!1;s=-1==s.indexOf("?")?s+"?ii="+o:s+"&ii="+o,this.opts.track&&(s+="&"+this.opts.track)}else s="/search/"+n+"/books";return C.utility.navigate(s),!1}var s=this.$curLi.find("a").attr("href");return C.utility.navigate(s),!1},buildAutocompleteDropdown:function(t){var e="object"==typeof t?t:jQuery.parseJSON(t);if(e){var i=this.opts.type.replace("|","_"),n,s=v('<div id="'+i+'_autocomplete"></div>'),o=1;if(null==e[0].items[0])return this.$dropdown.html(s),v(this.opts.psycicResults).hide().removeClass("active"),v(this.opts.autoSuggestResults).show().addClass("active"),s.append(template.noresults()),!0;if(e){for(var r in e)if(e[r].title){var a=v("<ul></ul>");for(var l in this.needsQuestionsLists&&a.addClass("questions-list"),e[r].items){var c=this.buildAutocompleteSectionItem(e[r].items[l],o),u=v(c);a.append(u),o++}s.append(a)}return this.$dropdown.html(s),v(this.opts.psycicResults).hide().removeClass("active"),v(this.opts.autoSuggestResults).show().addClass("active"),""==s.html()?!1:(this.schoolInfo.query=this.$input.val(),s.append(template.showall({schoolInfo:this.schoolInfo})),this.resizeTitleContainer(),!0)}}}})}(jQuery);var template={};template.book=_.template('<li class="autosuggest-result" data-ii="<%= item.iiCount %>" data-url="<%= item.attributes["data-url"] %>"><a href="<%= item.attributes["data-url"] %>"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><div class="autosuggest-result-meta"><% if(_.isEqual(item.hasItemPromo,true)){ %><span class="autosuggest-icon-meta"></span><div class="autosuggest-results-meta-info"><% if(_.isEqual(item.hasTBS,true)){ %><span class="autosuggest-results-meta-info-item"><span class="emphasis">Available:</span> Step-by-step Solutions</span><% } %><% if(_.isEqual(item.hasEbook,true)){ %><span class="autosuggest-results-meta-info-item"><%= item.availableEbookText %><% } %><% if(_.isEqual(item.hasInstantAccess,true)){ %><span class="autosuggest-results-meta-info-item"><span class="emphasis">Includes:</span> Free 7-day eTextbook Access</span><% } %></div><% } %></div><div class="autosuggest-result-data"><span class="img-wrapper"><img src="<%= item.img.url %>" alt="<%= item.imgAlt %>"></span><div class="autosuggest-result-bookinfo-sizer"><div class="autosuggest-result-bookinfo"><span class="autosuggest-result-title autocomplete-hdr"><%= item.title %></span><span class="autosuggest-result-author"><%= item.author %></span><span class="autosuggest-result-info"><%= item.isbnText %></span></div></div></div></span></span></span></a></li>'),template.ebook=_.template('<li class="autosuggest-result" data-ii="<%= item.iiCount %>" data-url="<%= item.attributes["data-url"] %>"><a href="<%= item.attributes["data-url"] %>"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><div class="autosuggest-result-meta"><% if(_.isEqual(item.hasItemPromo,true)){ %><span class="autosuggest-icon-meta"></span><div class="autosuggest-results-meta-info"><% if(_.isEqual(item.hasTBS,true)){ %><span class="autosuggest-results-meta-info-item"><span class="emphasis">Available:</span> Step-by-step Solutions</span><% } %><% if(_.isEqual(item.hasInstantAccess,true)){ %><span class="autosuggest-results-meta-info-item"><span class="emphasis">Includes:</span> Free 7-day eTextbook Access</span><% } %></div><% } %></div><div class="autosuggest-result-data"><span class="autosuggest-icon autosuggest-icon-etextbook-sml"></span><span class="img-wrapper"><img src="<%= item.img.url %>" alt="<%= item.imgAlt %>"></span><div class="autosuggest-result-bookinfo-sizer"><div class="autosuggest-result-bookinfo"><span class="autosuggest-result-title autocomplete-hdr"><%= item.title %></span><span class="autosuggest-result-author"><%= item.author %></span><span class="autosuggest-result-info"><%= item.isbnText %></span></div></div></div></span></span></span></a></li>'),template.dac=_.template('<li class="autosuggest-result" data-ii="<%= item.iiCount %>" data-url="<%= item.attributes["data-url"] %>"><a href="<%= item.attributes["data-url"] %>"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><div class="autosuggest-result-meta"><% if(_.isEqual(item.hasItemPromo,true)){ %><span class="autosuggest-icon-meta"></span><div class="autosuggest-results-meta-info"><% if(_.isEqual(item.hasTBS,true)){ %><span class="autosuggest-results-meta-info-item"><span class="emphasis">Available:</span> Step-by-step Solutions</span><% } %><% if(_.isEqual(item.hasEbook,true)){ %><span class="autosuggest-results-meta-info-item"><%= item.availableEbookText %><% } %><% if(_.isEqual(item.hasInstantAccess,true)){ %><span class="autosuggest-results-meta-info-item"><span class="emphasis">Includes:</span> Free 7-day eTextbook Access</span><% } %></div><% } %></div><div class="autosuggest-result-data"><span class="autosuggest-icon autosuggest-icon-etextbook-sml"></span><span class="img-wrapper icon-dac"></span><div class="autosuggest-result-bookinfo-sizer"><div class="autosuggest-result-bookinfo"><span class="autosuggest-result-title autocomplete-hdr"><%= item.title %></span><span class="autosuggest-result-author"><%= item.author %></span><span class="autosuggest-result-info"><%= item.isbnText %></span></div></div></div></span></span></span></a></li>'),template.course=_.template('<li class="autosuggest-result autosuggest-result-course" data-ii="<%= item.iiCount %>" data-url="<%= item.attributes["data-url"] %>"><a href="<%= item.attributes["data-url"] %>"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><div class="autosuggest-result-data"><span class="autosuggest-icon autosuggest-icon-course"></span><div class="autosuggest-result-courseinfo"><span class="autosuggest-result-title autocomplete-hdr"><%= item.title %><span class="small"> at <%= item.attributes["data-schoolName"] %></span></span><span class="autosuggest-result-info"><%= item.subtitle %></span></div></div></span></span></span></a></li>'),template.psycic=_.template('<ul><li class="autosuggest-result autosuggest-result-psycic" data-url="topbooks"><a data-reportLink="Top textbooks" href="/psearch/top-textbooks<% if(_.isNumber(schoolInfo.schoolId)){ %>?schoolId=<%= schoolInfo.schoolId %><% } %>"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><span class="autosuggest-icon autosuggest-icon-textbook"></span>Top Textbooks<% if(!_.isEmpty(schoolInfo.schoolName)){ %> at <%= schoolInfo.schoolName %><% } %></span></span></span></a></li><li class="autosuggest-result autosuggest-result-psycic" data-url="topebooks"><a data-reportLink="Top eTextbooks" href="/psearch/top-etextbooks<% if(_.isNumber(schoolInfo.schoolId)){ %>?schoolId=<%= schoolInfo.schoolId %><% } %>"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><span class="autosuggest-icon autosuggest-icon-etextbook"></span>Top eTextbooks<% if(!_.isEmpty(schoolInfo.schoolName)){ %> at <%= schoolInfo.schoolName %><% } %></span></span></span></a></li><li class="autosuggest-result autosuggest-result-psycic" data-url="topsolutions"><a data-reportLink="Top textbook solutions" href="/psearch/top-textbooksolutions<% if(_.isNumber(schoolInfo.schoolId)){ %>?schoolId=<%= schoolInfo.schoolId %><% } %>"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><span class="autosuggest-icon autosuggest-icon-solution"></span>Top Textbook Solutions<% if(!_.isEmpty(schoolInfo.schoolName)){ %> at <%= schoolInfo.schoolName %><% } %></span></span></span></a></li><li class="autosuggest-result autosuggest-result-psycic" data-url="sell-textbooks"><a data-reportLink="Sell textbooks" href="/sell-textbooks" class="psychic-sell-textbooks"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><span class="autosuggest-icon autosuggest-icon-selltextbooks"></span>Sell your books</span></span></span></a></li></ul>'),template.noresults=_.template('<ul class="autosuggest-no-results"><li class="autosuggest-result autosuggest-result-psycic"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><div class="autosuggest-result-data"><span class="img-wrapper"></span><div class="autosuggest-result-bookinfo-sizer"><div class="autosuggest-result-bookinfo">No Search Results Were Found.</div></div></div></span></span></span></li></ul>'),template.showall=_.template('<div class="autosuggest-morelinks"><ul><li><a href="/search/<% if(!_.isEmpty(schoolInfo.query)){ %><%= schoolInfo.query %><% } %>/books" class="autocomplete-show-more">Search For Books <span>&raquo;</span></a></li><li><a href="/search/<% if(!_.isEmpty(schoolInfo.query)){ %><%= schoolInfo.query %><% } %>/books#p=1&eBook=1" class="autocomplete-show-more">Search For eBooks <span>&raquo;</span></a></li><% if(!_.isEmpty(schoolInfo.schoolName) && _.isNumber(schoolInfo.schoolId)){ %><li><a href="/search/<% if(!_.isEmpty(schoolInfo.query)){ %><%= schoolInfo.query %><% } %>/courses/<%= schoolInfo.schoolName %>#p=1" class="autocomplete-show-more">Search For Courses <span>&raquo;</span></a></li><% } %></ul></div>'),function(o){C("widget"),C.widget.floatingMenu=C.widget._base.extend({construct:function(t){this.opts=o.extend({contentArea:C.dom.$content,fixedClass:null,lastFixTopOffset:0},t),this.elem=t.el.jquery?t.el:o(t.el),this.marginTop=t.marginTop,this.cssPosition=this.elem.css("position"),this.cssTop=this.elem.css("top"),this.cssWidth=this.elem.width(),this.setDiv=o("<div></div>"),this.elem.before(this.setDiv),C.dom.$window.observe("scroll",this.doScroll,this),C.dom.$window.observe("resize",this.doScroll,this),this.doScroll()},doScroll:function(t){var e,i;if(this.setDiv.offset().top-this.marginTop<=o(window).scrollTop()){this.elem.css({visibility:"hidden",position:"fixed",top:this.marginTop,"min-width":this.cssWidth}),this.opts.fixedClass&&this.elem.addClass(this.opts.fixedClass);var n=this.getContentBottom(),s=this.getElemBottom();this.opts.lastFixTopOffset&&s>=this.opts.lastFixTopOffset?this.elem.css({position:this.cssPosition,top:this.cssTop,"min-width":this.cssWidth}):n<=s&&this.elem.css("top",this.marginTop-(s-n)),this.elem.css("visibility","visible")}else this.opts.fixedClass&&this.elem.removeClass(this.opts.fixedClass),this.elem.css({position:this.cssPosition,top:this.cssTop,"min-width":this.cssWidth})},getContentBottom:function(){var t=this.opts.contentArea;return 0===t.length?0:t.offset().top+t.outerHeight()},getElemBottom:function(){return 0===this.elem.length?0:this.elem.offset().top+this.elem.outerHeight()+parseFloat(this.elem.css("margin-bottom").replace("px",""))},destruct:function(){this.setDiv.remove()}})}(jQuery),C("widget"),C.widget.dialog=C.widget._base.extend({construct:function(t){this.opts=$.extend({top:"50",type:"string",content:"",overlay:!0,background:"#000",opacity:.4,overlayClose:!0,resizeClose:!1,successCallback:null,errorCallback:null,showPaging:!1,pageRightCallback:null,pageLeftCallback:null,contentChangeCallback:null,fixed:!0,afterHideCallback:null,afterHideCallbackContext:null,destroyOnClose:!1,noAutoScroll:!1},t),this.$root=C.dom.$root,this.$window=C.dom.$window,this.$root.length&&this.$window.length&&(this.closeDialog=".chg-dialog-close",this.isHidden=!0,this.$body=C.dom.$body||null,this.isResizing=!1,this.overlayZIndex=0,this.createOverlay(),this.createDialog(),this.createPagingButtons(),this.doBind(),this.handlingScroll=!1,this.lastScrollTop=null,this.opts.content.length&&("ajax"==this.opts.type?this.doAjax():"string"==this.opts.type&&this.doString()))},createOverlay:function(){this.overlayZIndex=C.utility.getMaxIndex()+1,this.opts.overlay&&(this.$overlay=$('<div style="position:fixed;top:0;left:0;z-index:-1;" id="overlay-'+this.eventNamespace+'"></div>').appendTo(this.$root).css({background:this.opts.background,opacity:this.opts.opacity}).hide())},createDialog:function(){var t=this.opts.fixed?"fixed":"absolute";this.$dialog=$('<div id="dialog-'+this.eventNamespace+'" class="dialog-widget"></div>').appendTo(this.$root).css({position:t,zIndex:-1,top:"-9999px",left:"-9999px"})},styleDropdown:function(t){t=t||"select",this.$dialog.find(t).chosen({disable_search_threshold:8})},createPagingButtons:function(){this.opts.showPaging&&(this.$pageLeft=this.$pageLeft||$('<div class="dialog-pg-lt-wrap"><button class="dialog-pg-lt" type="button"> </button></div>'),this.$pageRight=this.$pageRight||$('<div class="dialog-pg-rt-wrap"><button class="dialog-pg-rt" type="button"> </button></div>'))},positionPagingButtons:function(){var t;if(this.$dialog&&this.opts.showPaging&&(this.$dialog.find(".dialog-pg-lt-wrap").length||(this.$dialog.append(this.$pageLeft),this.$dialog.append(this.$pageRight)),this.$pageLeft&&this.$pageRight))if(this.opts.fixed){var e,i,n=($(document).width()-this.$dialog.width())/2,s,o=n-50,r=n+ +this.$dialog.outerWidth();this.$pageLeft.css({left:o+"px"}),this.$pageRight.css({left:r+"px"})}else{var a=$(".dialog-pg-lt-wrap"),l=$(".dialog-pg-rt-wrap");a.css({position:"absolute",top:"100px"}),l.css({position:"absolute",top:"100px"}),this.$pageLeft.css({left:"-50px"}),this.$pageRight.css({right:"-50px"})}},showOverLay:function(t){if(this.$overlay){var e=$(document),i=e.width(),n=e.height();this.$overlay.css({width:i+"px",height:n+"px"}).show(),this.isHidden=!1,t&&this.$overlay.css({zIndex:this.overlayZIndex})}},showDialog:function(){var t=$(document).width(),e=this.overlayZIndex+1,i=this.getDialogTopPositionVal(),n=this;this.$dialog.css({top:i+"px",left:(t-n.$dialog.width())/2+"px",zIndex:e}),this.opts.fixed&&this.setMaxDialogContentHeight(),this.$dialog.show(),this.showOverLay(1),this.isHidden=!1},applySizeChangeAfterHide:function(){var t=$(document),e=t.width(),i=t.height(),n;this.$overlay.css({width:e+"px",height:i+"px"});var n=this.overlayZIndex+1,s=this.getDialogTopPositionVal();this.$dialog.css({zIndex:n});var o=this;this.$dialog.css({top:s+"px",left:(e-o.$dialog.width())/2+"px"}),this.opts.fixed&&this.setMaxDialogContentHeight(),this.positionPagingButtons()},getDialogTopPositionVal:function(){var t=parseInt(this.opts.top,10);return this.opts.fixed||(t+=parseInt(C.dom.$window.scrollTop(),10)),t},handleResize:function(){if(this.$dialog&&!this.isResizing){if(this.isResizing=!0,this.opts.resizeClose)return this.hideDialog(),this.hideOverlay(),void this.applySizeChangeAfterHide();!this.$overlay&&this.opts.overlay&&this.createOverlay(),this.$dialog||this.createDialog(),this.isHidden?this.applySizeChangeAfterHide():this.showDialog(),this.positionPagingButtons(),this.isResizing=!1}},setMaxDialogContentHeight:function(){if(this.$dialog){var t=this.$dialog.find(".dialog-hdr"),e=this.$dialog.find(".dialog-ftr"),i=this.$dialog.find(".dialog-content"),n=+t.outerHeight(),s=+e.outerHeight(),o=$(window).height()-2*+this.opts.top-n-s,r=this.opts.noAutoScroll?"":"auto";i.css({"max-height":o+"px","overflow-y":r})}},doBind:function(){this.$dialog.observe("click",this.closeDialog,this.fireClose,this),this.opts.overlayClose&&this.$overlay.observe("click",this.hide,this),this.$window.observe("resize",this.handleResize,this),this.$window.observe("scroll",this.pagerButtonsHandleScroll,this),this.opts.showPaging&&(this.$pageLeft.observe("click",this.handlePageLeft,this),this.$pageRight.observe("click",this.handlePageRight,this),this.$body&&this.$body.observe("keyup",this.pagingKeyUp,this),C.support.touch&&this.$dialog.observe("touchend",function(t){this.isHidden||(C.support.util.slideLeft?(this.handlePageRight(),t.preventDefault(),t.stopPropagation()):C.support.util.slideRight&&(this.handlePageLeft(),t.preventDefault(),t.stopPropagation()))},this))},pagerButtonsHandleScroll:function(){!this.opts.showPaging||this.handlingScroll||this.opts.fixed||(this.handlingScroll=!0,setTimeout($.proxy(function(){var t=$(".dialog-pg-lt-wrap"),e=$(".dialog-pg-rt-wrap"),i=parseInt(t.css("top")),n=parseInt(this.$dialog.css("top"),10),s=C.dom.$body.scrollTop()-n,o=this.$dialog.outerHeight(),r=o-n-100,a;if(o<200)this.handlingScroll=!1;else{r<(a=this.lastScrollTop&&s<this.lastScrollTop?i-s:i+s)&&(a=r),(a<100||C.dom.$body.scrollTop()<n)&&(a=100),this.lastScrollTop=a,t.animate({top:a+"px"},250),e.animate({top:a+"px"},250);var l=this;setTimeout(function(){l.handlingScroll=!1},300)}},this),1e3))},pagingKeyUp:function(t){if(!this.isHidden&&this.$dialog){var e=$(":focus"),i;if(!this.$dialog.find(".mceIframeContainer").length&&!e.is("textarea, input")){var n=t.which;return 39===n&&this.handlePageRight(),37===n&&this.handlePageLeft(),!1}}},handlePageRight:function(){this.opts.pageRightCallback()},handlePageLeft:function(){this.opts.pageLeftCallback()},disablePaging:function(){this.disablePageLeft(),this.disablePageRight()},disablePageLeft:function(){this.$pageLeft&&(this.$pageLeft.find(".dialog-pg-lt").attr("disabled","disabled"),this.$pageLeft.off("click"))},disablePageRight:function(){this.$pageRight&&(this.$pageLeft.find(".dialog-pg-rt").attr("disabled","disabled"),this.$pageRight.off("click"))},show:function(){if(this.opts.overlay&&(this.$overlay||this.createOverlay(),this.$overlay.show()),this.$dialog||this.createDialog(),!this.opts.fixed){var t=this.getDialogTopPositionVal(),e=this;this.$dialog.css({top:t+"px"})}this.$dialog.show(),this.isHidden=!1},fireClose:function(t){t&&t.preventDefault(),this.opts.destroyOnClose?this.destroy():(this.hide(),C.dom.$body.trigger("hideModerator"))},hide:function(){this.hideOverlay(),this.hideDialog(),this.opts.afterHideCallback&&(this.opts.afterHideCallbackContext?this.opts.afterHideCallback.call(this.opts.afterHideCallbackContext):this.opts.afterHideCallback())},hideOverlay:function(){this.$overlay.hide()},getHiddenValue:function(){return this.isHidden},hideDialog:function(){this.$dialog.hide(),this.isHidden=!0},remove:function(){this.$dialog&&this.$dialog.remove(),this.$overlay&&this.$overlay.remove()},doAjax:function(){this.$dialog.css({"min-width":"600px"}),this.showLoader(),$.ajax({url:this.opts.content,context:this,success:this.onAjaxSuccess,error:this.onAjaxError})},showLoader:function(){this.populateDialog('<canvas class="chg-dialog-spinner" width="40" height="40"><div class="chg-dialog-spinner-fallback"></div></canvas>'),this.showDialog(),new C.widget.spinner({canvas:".chg-dialog-spinner",color:"#ffffff",spokes:15,thickness:3})},onAjaxSuccess:function(t){this.showLoader(),this.populateDialog(t),this.opts.successCallback&&this.opts.successCallback()},populateDialog:function(t){this.$dialog&&("string"==typeof t?this.$dialog.html(t):(this.$dialog.empty(),this.$dialog.append(t)),this.opts.showPaging&&this.positionPagingButtons(),this.setMaxDialogContentHeight(),this.onDialogContentChange())},doString:function(){this.populateDialog(this.opts.content),this.showDialog()},onAjaxError:function(){this.opts.errorCallback&&this.opts.errorCallback()},onDialogContentChange:function(){"function"==typeof this.opts.onContentChange&&this.opts.contentChangeCallback()},destruct:function(){C.log("dialog:destruct"),this.$overlay.remove(),this.$dialog.remove()}}),C("widget"),C.widget.popup=C.widget._base.extend({construct:function(t){var e={color:"#fff",borderRadius:"5px",background:"rgba(0,0,0,0.8)",shadow:"rgba(0,0,0,0.25)",borderColor:"transparent"};t&&t.opacity&&"number"==typeof t.opacity&&t.opacity<=1&&(e.background="rgba(0,0,0,"+t.opacity+")"),t&&t.template&&("gray"==t.template?e={color:"#333",borderRadius:"5px",background:"rgba(230,230,230,1)",shadow:"rgba(0,0,0,0.25)",borderColor:"transparent"}:"white"==t.template?e={color:"#000",borderRadius:"5px",background:"#fff",shadow:"rgba(0,0,0,0.25)",borderColor:"transparent"}:"header"==t.template?e={color:"#555",borderRadius:"0",background:"white",shadow:"rgba(0,0,0,0.25)",borderColor:"#EB7100"}:"headerGray"==t.template&&(e={color:"#555",borderRadius:"0",background:"#f5f5f5",shadow:"rgba(0,0,0,0.25)",borderColor:"#EB7100"})),this.opts=$.extend({className:"popup-widget",padding:"15px",side:"right",width:"auto",height:"auto",margin:5,overhang:15,pointerEdgePadding:15,pointerSize:10,content:"attr",attr:"title",trigger:"hover",template:null,url:"",method:"get",autoCenter:!1,showDelay:0,hideTimeout:500,resizeClose:!1,needFlush:!0,centerContent:!1,animation:!1},e,t),C.support.rgba||(this.opts.color=C.utility.rgba2rgb(this.opts.color),this.opts.background=C.utility.rgba2rgb(this.opts.background),this.opts.shadow=C.utility.rgba2rgb(this.opts.shadow)),this.delayTimer=null,this.hideTimer=null,this.isShowed=!1,this.$el=t.el.jquery?t.el:$(t.el),this.$parentHeaderSelector=this.$el.closest(".chg-header, .chg-hdr-root"),this.isHeaderChild=this.$parentHeaderSelector&&this.$parentHeaderSelector.length,this.$appendTarget=this.isHeaderChild?C.dom.$headerRoot:C.dom.$content,this.createPopup(),this.doBind(),this.opts.needFlush||this.$container.html(this.opts.content),this.opts.centerContent&&this.$container.css("text-align","center")},setContent:function(t){this.$container.html(t)},destruct:function(){clearTimeout(this.delayTimer),clearTimeout(this.hideTimer),this.$container.length&&this.$container.remove()},createPopup:function(){this.$container=this.$container||$('<div id="popup-'+this.instanceNumber+'"><div></div></div>').appendTo(this.$appendTarget).children().css({position:"absolute","border-radius":this.opts.borderRadius,"background-color":this.opts.background,padding:this.opts.padding,color:this.opts.color,width:this.opts.width,"z-index":-1,visibility:"hidden",border:"1px solid "+this.opts.borderColor});var t={top:0,right:1,bottom:2,left:3};if("transparent"==this.opts.borderColor){var e;(e=["transparent","transparent","transparent","transparent"])[t[this.opts.side]]=this.opts.background;var i=[this.opts.pointerSize-1,this.opts.pointerSize-1,this.opts.pointerSize-1,this.opts.pointerSize-1];i[t[this.opts.side]]=this.opts.pointerSize;var n={width:0,height:0,position:"absolute",borderColor:e.join(" "),borderStyle:"solid",borderWidth:i.join("px ")+"px"};this.$pointer=$("<div></div>").css(n),this.$innerPointer=$("<div></div>")}else{var e;(e=["transparent","transparent","transparent","transparent"])[t[this.opts.side]]=this.opts.borderColor;var n={width:0,height:0,position:"absolute",borderColor:e.join(" "),borderStyle:"solid",borderWidth:this.opts.pointerSize};this.$pointer=$("<div></div>").css(n),(e=["transparent","transparent","transparent","transparent"])[t[this.opts.side]]=this.opts.background,n={width:0,height:0,position:"absolute",top:2-this.opts.pointerSize,left:1-this.opts.pointerSize,borderColor:e.join(" "),borderStyle:"solid",borderWidth:this.opts.pointerSize-1},this.$innerPointer=$("<div></div>").css(n)}},doBind:function(){"hover"==this.opts.trigger?(this.$el.observe({mouseover:this.toggleContainer,mouseout:this.hidePopup},this),this.$container.observe({mouseover:this.holdContainer,mouseout:this.hidePopup},this)):"click"==this.opts.trigger&&(C.dom.$body.observe({click:this.toggleContainer},this.opts.el,this),this.outsideClickEventHandler||(this.outsideClickEventHandler=$("a,div,span,html").on("click",$.proxy(function(){var t=!1,e=!1;$(".popup-widget").hover(function(){t=!0},function(){t=!1}),$(".popup-widget").find("a").hover(function(){e=!0},function(){e=!1}),t&&!e||!this.isShowed||this.hidePopup(),$(".popup-widget").find("a").off("mouseenter mouseleave"),$(".popup-widget").off("mouseenter mouseleave")},this)))),this.opts.resizeClose&&C.dom.$window.observe("resize",this.hidePopup,this)},holdContainer:function(){clearTimeout(this.hideTimer)},toggleContainer:function(t){if(clearTimeout(this.hideTimer),this.isShowed)this.hidePopup();else{var e=this.opts.el.jquery?this.opts.el:$(this.opts.el),i=this.opts.getData?this.opts.getData.call(this,e):this.getData(e),n=this;i&&i.length&&(this.delayTimer=setTimeout(function(){n.showPopup(e,i)},this.opts.showDelay))}},hidePopup:function(){clearTimeout(this.delayTimer),clearTimeout(this.hideTimer);var t=this;this.hideTimer=setTimeout(function(){t.opts.animation?t.$container.show().fadeOut(function(){t.$container.css({zIndex:-1,visibility:"hidden"})}):t.$container.css({zIndex:-1,visibility:"hidden"})},this.opts.hideTimeout),this.isShowed=!1,$(this.opts.el).removeClass("pop-active")},getData:function(e){var i=this;return"attr"==this.opts.content?"title"==this.opts.attr?(this.title||(this.title=e.attr(this.opts.attr),e.removeAttr(this.opts.attr)),this.title):e.attr(this.opts.attr):"ajax"!=this.opts.content?this.opts.content:void $.ajax({url:this.opts.url,method:this.opts.method,success:function(t){i.showPopup(e,t)}})},positionPopup:function(t){var e=t.position(),i,n,s,o,r,a;this.isHeaderChild&&(e=t.position()),"top"==this.opts.side?o=this.opts.autoCenter?(i=t.outerWidth(),n=t.outerHeight(),r=this.$container.outerWidth(),a=this.$container.outerHeight(),s={top:e.top-a-this.opts.pointerSize-this.opts.margin,left:e.left+i/2-r/2,"box-shadow":"2px -2px 2px "+this.opts.shadow},{bottom:-2*this.opts.pointerSize,left:r/2-this.opts.pointerSize}):(s={top:e.top-this.$container.outerHeight()-this.opts.pointerSize-this.opts.margin,left:e.left-this.opts.overhang,"box-shadow":"2px -2px 2px "+this.opts.shadow},{bottom:-2*this.opts.pointerSize,left:this.opts.pointerEdgePadding}):"left"==this.opts.side?o=this.opts.autoCenter?(i=t.outerWidth(),n=t.outerHeight(),r=this.$container.outerWidth(),a=this.$container.outerHeight(),s={top:e.top+n/2-a/2,left:e.left-r-this.opts.pointerSize-this.opts.margin},{right:-2*this.opts.pointerSize,top:a/2-this.opts.pointerSize}):(s={top:e.top-this.opts.overhang,left:e.left-this.$container.outerWidth()-this.opts.pointerSize-this.opts.margin},{right:-2*this.opts.pointerSize,top:this.opts.pointerEdgePadding}):"right"==this.opts.side?o=this.opts.autoCenter?(i=t.outerWidth(),n=t.outerHeight(),r=this.$container.outerWidth(),a=this.$container.outerHeight(),s={top:e.top+n/2-a/2,left:e.left+i+this.opts.pointerSize+this.opts.margin},{left:-2*this.opts.pointerSize,top:a/2-this.opts.pointerSize}):(s={top:e.top-this.opts.overhang,left:e.left+t.outerWidth()+this.opts.pointerSize+this.opts.margin},{left:-2*this.opts.pointerSize,top:this.opts.pointerEdgePadding}):"bottom"==this.opts.side&&(o=this.opts.autoCenter?(i=t.outerWidth(),n=t.outerHeight(),r=this.$container.outerWidth(),a=this.$container.outerHeight(),s={top:e.top+n+this.opts.pointerSize+this.opts.margin,left:e.left+i/2-r/2,"box-shadow":"2px 2px 2px "+this.opts.shadow},{top:-2*this.opts.pointerSize,left:r/2-this.opts.pointerSize}):(s={top:e.top+t.outerHeight()+this.opts.pointerSize+this.opts.margin,left:e.left-this.opts.overhang,"box-shadow":"0 2px 2px "+this.opts.shadow},{top:-2*this.opts.pointerSize,left:this.opts.pointerEdgePadding})),this.$container.css(s),this.$pointer.css(o),this.$container.addClass(this.opts.className)},showPopup:function(t,e){e&&e.length&&(this.opts.needFlush&&this.$container.html(e),this.opts.positionCallback?this.opts.positionCallback.call(this,t):this.positionPopup(t),this.opts.afterInsertCallback&&this.opts.afterInsertCallback.call(this,t,this.$container),this.$container.append(this.$pointer.append(this.$innerPointer)).css({zIndex:this.opts.zIndex||C.utility.getMaxIndex()+1,visibility:"visible"}),this.opts.animation&&this.$container.hide().fadeIn(),this.isShowed=!0,$(this.opts.el).addClass("pop-active"))},fadeIn:function(){}}),C("ever"),C.ever.kv={},C.ever.set=function(t,e){void 0!==e&&"undefined"!==e&&(e=$.trim(e),C.ever.setWindow(t,e),C.ever.setLocal(t,e),C.ever.setCookie(t,e),C.ever.kv[t]=e)},C.ever.get=function(t){var e;return e=(e=(e=(e=e||C.ever.getWindow(t))||C.ever.getLocal(t))||C.ever.getCookie(t))||C.ever.kv[t],C.ever.set(t,e),$.trim(e)},C.ever.setCookie=function(t,e){var i=C.global&&C.global.cookieDomain?";domain="+C.global.cookieDomain:"";document.cookie=t+"=; expires=Mon, 20 Sep 2010 00:00:00 UTC; path=/"+i,document.cookie=t+"="+e+"; expires=Tue, 31 Dec 2050 00:00:00 UTC; path=/"+i},C.ever.getCookie=function(t){return C.ever.getFromSerializedString(document.cookie,";",t,1)},C.ever.setWindow=function(t,e){window.name=C.ever.getSetIntoSerializedStringResult(window.name,"&",t,e,1)},C.ever.getWindow=function(t){if(window.name)return C.ever.getFromSerializedString(window.name,"&",t,1)},C.ever.setLocal=function(t,e){window.localStorage&&window.localStorage.setItem&&localStorage.setItem(t,e)},C.ever.getLocal=function(t){if(window.localStorage&&window.localStorage.getItem)return localStorage.getItem(t)},C.ever.getSetIntoSerializedStringResult=function(t,e,i,n,s){if(i+="=",!t.length)return i+(s?escape(n):n);var o=0;t=t.split(e);for(var r=0;r<t.length;r++)0===t[r].indexOf(i)&&(t[r]=i+(s?escape(n):n),o=1);return o||t.push(i+(s?escape(n):n)),t.join(e)},C.ever.getFromSerializedString=function(t,e,i,n){t=t.split(e),i+="=";for(var s=0;s<t.length;s++)if(0===$.trim(t[s]).indexOf(i))return $.trim(n?unescape(t[s].replace(i,"")):t[s].replace(i,""))},C.dom.$window.on("beforeunload",function(){for(var t in C.ever.kv)C.ever.set(t,C.ever.kv[t])}),C("widget"),C.widget.dropmenu=C.widget._base.extend({construct:function(t){this.opts=$.extend({trigger:".drop-menu-trigger",header:""},t),this.setupDropdownMenu(),this.doBaseBind()},destruct:function(){C.dom.$body.unobserve("mousedown."+this.instanceNumber,this),C.dom.$window.unobserve("resize."+this.instanceNumber,this),this.$widget.remove()},setupDropdownMenu:function(){this.$widget=$('<div class="drop-menu-widget"><div class="drop-menu-close"></div><div class="drop-menu-tab"><span>'+this.opts.header+'</span> <b></b></div><div class="drop-menu-content"></div></div>').hide().appendTo(document.body),this.$close=this.$widget.find(".drop-menu-close"),this.$tabText=this.$widget.find(".drop-menu-tab span"),this.$content=this.$widget.find(".drop-menu-content"),this.setContentAndBind&&this.setContentAndBind()},show:function(t,e){this.$widget.css({top:e,left:t-10}).show()},hide:function(){this.$widget.hide()},doBaseBind:function(){C.dom.$body.observe("mousedown."+this.instanceNumber,this.opts.trigger,this.onClickTrigger,this),C.dom.$window.observe("resize."+this.instanceNumber,this.onScrollOrResize,this),this.$close.observe("click",this.hide,this)},onScrollOrResize:function(){var t=this;clearTimeout(this.hideTimer),this.hideTimer=setTimeout(function(){t.hide()},0)},onClickTrigger:function(t){var e=$(t.currentTarget),i=e.offset();this.$curTrigger=e,this.show(i.left,i.top,e),t.preventDefault(),t.stopPropagation(),this.reset&&this.reset(e)}}),C("widget"),C.widget.moderator=C.widget.dropmenu.extend({construct:function(t){this.opts=$.extend({trigger:".abuse-flag",header:"Report abuse",maxDescLength:300},t),this.isMod=$(".content-moderation-view").length,this.setupDropdownMenu(),this.doBaseBind(),this.doBind(),this.reset()},reset:function(t){this.$textarea.val(""),this.$content.find("input:selected").prop("checked",!1),this.onTextboxKeyup(),this.$button.prop("disabled",!1),this.$reportForm.show(),this.$reportNotice.hide(),this.qid="",this.aid="",this.cid="",this.rid="",this.arid="",t&&t.length&&(this.aid=t.attr("data-answerid")||"",this.qid=t.attr("data-questionid")||"",this.cid=t.attr("data-commentid")||"",this.rid=t.attr("data-ratingid")||"",this.arid=t.attr("data-appratingid")||"")},setContentAndBind:function(){this.$content.html(this.getContent()),this.$textarea=this.$content.find("textarea"),this.$button=this.$content.find("button"),this.$wordsLeft=this.$content.find(".words-left"),this.$form=this.$content.find("form"),this.$reportForm=this.$content.find(".report-form"),this.$reportNotice=this.$content.find(".report-notice")},getContent:function(){var t=this.isMod?"Remove content":"Report Abuse";return'<form onsubmit="return false"><div class="report-reason"><div class="report-form">'+this.getReasons()+'<div class="words-left"></div><textarea name="description" placeholder="Leave a comment (optional)" maxlength="'+this.opts.maxDescLength+'"></textarea><div class="moderator-button"><button class="btn-secondary-dk-mini">'+t+'</button></div></div><div class="report-notice"></div></div></form>'},getReasons:function(){var t,e;return function(t){var e="",i="checked",n=0;for(var s in t)"All"!=s&&(e+='<li><input type="radio" '+i+' name="reason" id="reason-'+n+'" value="'+s+'" /><label class="form-radio" for="reason-'+n+'"></label> <label for="reason-'+n+'">'+t[s]+"</label></li>",n++,i="");return"<ul>"+e+"</ul>"}({Adult_Or_Inappropriate:"Adult/Inappropriate",Harassment:"Harassment",Spam:"Spam",Solicitation:"Solicitation",Threats_Or_Violence:"Threats/Violence",Other:"Other"})},wordsLeft:function(){return this.opts.maxDescLength-this.$textarea.val().length},doBind:function(){this.$button.observe("click",this.onClickSubmit,this),this.$textarea.observe("keyup",this.onTextboxKeyup,this)},onScrollOrResize:function(){var t=this;clearTimeout(this.hideTimer),this.hideTimer=setTimeout(function(){t.hide()},100)},onClickSubmit:function(){var t=this.$widget.find(":checked"),e;if(t.length){if(this.$button.attr("disabled","disabled"),$.ajax({url:"/_ajax/hwh/moderate/?token="+C.global.csrfToken+"&aid="+this.aid+"&qid="+this.qid+"&cid="+this.cid+"&rid="+this.rid+"&arid="+this.arid+"&reason="+t.val()+"&comment="+encodeURIComponent($.trim(this.$textarea.val())),success:$.proxy(function(){this.$reportForm.hide(),this.$reportNotice.html('<div class="msg-info-dk-sm"><div class="msg-icon"><div class="msg-text">Success</div></div></div>').show()},this),error:$.proxy(function(){this.$reportForm.hide(),this.$reportNotice.html('<div class="msg-info-dk-sm"><div class="msg-icon"><div class="msg-text">We encountered an error. Please try again</div></div></div>').show()},this)}),this.isMod){var i=(e=this.$curTrigger.parents(".question, li").find(".content-moderation").first()).attr("data-type"),n=e.attr("data-id"),s=e.attr("data-extra-id"),o={id:n,type:i,token:C.global.csrfToken};s&&(o.id_extra=s),$.ajax({type:"post",dataType:"json",url:"/_ajax/hwh/delete",data:o,context:this,success:function(){}})}}else alert("Please select a reason")},onTextboxKeyup:function(){this.$wordsLeft.html(this.wordsLeft()+" left")}}),C("utility"),C.utility.profiler=function(){var n=0<document.location.hostname.indexOf("cheggnet")||null!=C.utility.getCookie("logging"),s;return{show:function(){if(n){$(".api-profiler").remove();var t='<div class="api-profiler"><div class="api-profiler-hotspots" onclick="C.utility.profiler.toggleHotspots()">hotspots<br/>OFF</div><div class="api-profiler-timings"><span title="DOM Loading">'+((C.global.domLoading-C.global.navigationStart)/1e3).toFixed(2)+'s</span><br/><span title="DOM Interactive">'+((C.global.domInteractive-C.global.navigationStart)/1e3).toFixed(2)+'s</span><br/></div><div class="api-profiler-more" style="display: none; background-color: white;" onclick="C.utility.profiler.showStack()"></div></div>';$(t).prependTo(".chgg-hdr");var i=function(){if(null!==C.global.domComplete){var t=C.global.domComplete-C.global.navigationStart,e='<span title="Total Load Time">'+(t/1e3).toFixed(2)+"s</span><br/>";$(e).appendTo(".api-profiler-timings"),0<t&&t<2e3?$(".api-profiler-timings").css("background-color","#ddffdd"):0==t||4500<t?$(".api-profiler-timings").css("background-color","#ffdddd"):$(".api-profiler-timings").css("background-color","#ffffdd")}else s=setTimeout(i,300)};i();var e=function(){$.ajax({url:"/_ajax/ajaxApiStack?countOnly=1",type:"post",success:function(t){var e="";if(t){var i=C.utility.access("experiment.automation",t);automationTxt=i?"Automation":"Normal",$(".api-profiler-more").show().html(t.fail+"/"+(t.fail+t.success)+"<br/>"+automationTxt).css("color",0<t.fail?"#cc0000":"")}}})};e(),setInterval(e,6e4)}},reset:function(){n&&(clearTimeout(s),C.global.navigationStart=null,C.global.domLoading=null,C.global.domInteractive=null,C.global.domComplete=null,$(".api-profiler").html('<div class="api-profiler-timings">loading...</div>'))},showStack:function(){n&&(console.log("Fetching API calls caused by this page load in the last 10 minutes..."),$.ajax({url:"/_ajax/ajaxApiStack",type:"post",success:function(t){console.log(t),C.dom.$window.trigger("apiStackShown",[t])}}))},toggleHotspots:function(){if(n)return $('.api-profiler-hotspots:contains("ON")').length?($(".api-profiler-hotspots").html("hotspots<br/>OFF"),$(".chg-tracking-label").remove(),$(".chg-tracking-section").removeClass("chg-tracking-section"),void $(".chg-tracking-entity").removeClass("chg-tracking-entity")):void $(".api-profiler-hotspots").html("hotspots<br/>ON")}}}(),C("logger"),C.logger=function(){var r=function(e,t,i){if(null!==e){var n="http:"===window.location.protocol?C.global.cheggSiteUrl:C.global.cheggSiteSecureUrl;$.ajax({url:n+"_ajax/log",type:"GET",data:{type:e.type,value:JSON.stringify(e),options:i},complete:function(){"function"==typeof t&&t()},error:function(t){C.log(e.type+" log failed with error: "+JSON.stringify(t))}})}};return{doEventLog:function(t,e){t.parent_page_url=window.location.href,t.parent_page_timestamp=C.logger.loadTime,t.page_track_id=C.logger.pageTrackId,t.referrer_url=window.location.href,t.destination_url=window.location.href,t.type="event",r(t,e)},doSessionLog:function(t,e,i,n){if(t.page_track_id=C.logger.pageTrackId,t.destination_url=window.location.href,t.referrer_url=C.logger.referrer_url,t.type="session",n){var s=!1,o=function(){s||(s=!0,e())};setTimeout(o,n),r(t,o,i)}else r(t,e,i)}}}(),Eggshell.define("C.common.log",{inputs:["event log","session log"],outputs:["log success","log error"]},Backbone.View.extend({initialize:function(){Eggshell.find(this).on("event log",this.doEventLog),Eggshell.find(this).on("session log",this.doSessionLog)},doEventLog:function(t,e){var i,n,s;null!==(s=C&&C.logger?(i=C.logger.pageTrackId,C.logger.loadTime):(i=mChegg.global.pageTrackId,null))&&(e.parent_page_timestamp=s),e.event_uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i;return("x"==t?e:3&e|8).toString(16)}),e.parent_page_url=window.location.href,e.page_track_id=i,e.destination_url=window.location.href,e.referrer_url=window.location.href,e.type="event",this.doLog(e)},doSessionLog:function(t,e){var i,n;n=C&&C.logger?(i=C.logger.pageTrackId,C.logger.referrer_url):(i=mChegg.global.pageTrackId,document.referrer),e.page_track_id=i,e.destination_url=window.location.href,e.referrer_url=n,e.type="session",this.doLog(e)},doLog:function(t){$.ajax({url:"/_ajax/log",type:"GET",context:this,data:{type:t.type,value:JSON.stringify(t)},success:function(){Eggshell.find(this).trigger("log success")},error:function(t){Eggshell.find(this).trigger("log error",t)}})}})),C("logs.events"),C.logs.events.common={getOnlyEventName:function(t){return{event_name:t}}},Eggshell.define("C.common.navigation",{inputs:["expand navigation bar","collapse navigation bar","render","refresh left nav","hide group","set left nav type"],outputs:[],singleton:!0,newNode:!1},function(){var t=Backbone.Model.extend({load:function(){$.ajax({url:"/_ajax/navigation",type:"post",dataType:"json",data:{},context:this,success:$.proxy(function(t){this.polishResults(t),this.set("originalResult",t),this.trigger("loaded")},this),error:function(){this.trigger("error")}})},polishResults:function(t){var i=[],n={};$.each(t,function(t,e){void 0!==e.group&&null==e.subGroup&&(i.push(e),e.group in n||(n[e.group]=[]))}),$.each(t,function(t,e){void 0!==e.group&&null!=e.subGroup&&n[e.group].push(e)}),this.set("groups",i),this.set("subGroups",n)},getSubgroup:function(t){var e=this.get("subGroups");return t in e?e[t]:{}}}),e;return Backbone.View.extend({navigationBarCollapsedWidth:50,navigationBarExpandedWidth:210,mainTemplate:_.template('<div class="leftnav"></div>'),linkTemplate:_.template('<%if(link) {%><a href ="<%- link %>" class="<%-classes%>"><% if(newIndicator) { %>\t<span class="global-nav-list-new">NEW</span><% } %><%=text%></a><%} else {%><div class="<%-classes%>"><%=text%></div><%}%>'),initialize:function(){this.model=new t,this.setListeners(),this.load()},setListeners:function(){this.model.on("loaded",this.render,this),this.model.on("errored",this.renderError,this),Eggshell.find(this).on("render",this.load,this).on("expand navigation bar",this.expandNavigationBar,this).on("collapse navigation bar",this.collapseNavigationBar,this).on("refresh left nav",this.load,this)},openOverlayLeftNav:function(){var t=C.utility.getMaxIndex()+1;$(".chg-global-nav").css({width:this.navigationBarExpandedWidth+"px","z-index":t+1,"box-shadow":"1px 0px 2px #767676",overflow:"hidden"}),$(".chg-global-nav-home").css({opacity:0,visibility:"hidden"}),$(".chg-global-nav-list").css({visibility:"visible",opacity:1}),$(".chg-global-screen-blocker").css({"z-index":t,opacity:.6})},closeOverlayLeftNav:function(){$(".chg-global-nav").css({width:this.navigationBarCollapsedWidth+"px","box-shadow":"none"}),$(".chg-global-nav-home").css({opacity:1,visibility:"visible"}),$(".chg-global-nav-list").css({visibility:"hidden",opacity:0}),$(".chg-global-screen-blocker").css({"z-index":-1,opacity:0})},expandNavigationBar:function(){this.closeOverlayLeftNav(),$(".chg-body").removeClass("chegg-content-nav-collapsed").addClass("chegg-content-nav-expanded"),$(".chg-global-nav").css({width:this.navigationBarExpandedWidth+"px"}),this.$el.find(".chg-global-nav-home").css({opacity:0,visibility:"hidden"}),this.$el.find(".chg-global-nav-list").css({visibility:"visible",opacity:1}),$(".chg-global-content").css("margin-left","210px"),$(".chg-global-nav").off("mouseover").off("mouseleave")},collapseNavigationBar:function(){$(".chg-global-content").css("margin-left","50px"),$(".chg-body").hasClass("chegg-content-nav-collapsed")?this.closeOverlayLeftNav():($(".chg-body").removeClass("chegg-content-nav-expanded").addClass("chegg-content-nav-collapsed"),$(".chg-global-nav").css({width:this.navigationBarCollapsedWidth+"px"}),this.$el.find(".chg-global-nav-home").css({opacity:1,visibility:"visible"}),this.$el.find(".chg-global-nav-list").css({visibility:"hidden",opacity:0})),$(".chg-global-nav").hasClass("chg-global-nav-autosliding")&&($(".chg-global-nav").on("mouseover",$.proxy(function(){$(".chg-body").hasClass("chegg-content-nav-collapsed")&&this.openOverlayLeftNav()},this)),$(".chg-global-nav").on("mouseleave",$.proxy(function(){$(".chg-body").hasClass("chegg-content-nav-collapsed")&&this.closeOverlayLeftNav()},this)))},load:function(){this.model.load()},render:function(){$(".chg-global-nav").append(this.$el),this.$el.html(this.mainTemplate()),this.renderLeftNav()},renderLeftNav:function(){var t=this.model.get("groups");this.$el.find(".leftnav").append('<a class="chg-global-nav-home" href="/">Home</a>'),this.$el.find(".leftnav").append('<div class="chg-global-nav-list"></div>'),this.$el.find(".chg-global-nav-home").css({opacity:0,visibility:"hidden"}),$.each(t,$.proxy(function(t,e){this.renderGroup(e)},this))},renderGroup:function(s){var o=$('<div class="'+s.group.replace(" ","-")+'-item"></div>'),t=this.model.getSubgroup(s.group),r=" chg-global-nav-list-item",e=!!s.link&&s.link,i=s.classes?s.classes:"";o.append(this.linkTemplate({link:e,classes:i+" chg-global-nav-list-section",text:s.group,newIndicator:s.newIndicator})),0<t.length&&(o.append('<div class="'+s.group.replace(" ","-")+'-subgroup-items"></div>'),$.each(t,$.proxy(function(t,e){var i=e.link?e.link:"#",n=e.classes?e.classes+r:r;o.find("."+s.group.replace(" ","-")+"-subgroup-items").append(this.linkTemplate({link:i,classes:n,text:e.subGroup,newIndicator:e.newIndicator}))},this))),this.$el.find(".chg-global-nav-list").append(o)}})}()),Eggshell.define("C.global.nav",{inputs:["expand navigation bar","collapse navigation bar","enable fixed header","disable fixed header"],outputs:["returned fixed header content node"],singleton:!0,newNode:!1},function(){var t=C.View.extend({navigationBarCollapsedWidth:50,navigationBarExpandedWidth:210,initialize:function(){this.setNavigationBarTopOffset(0),this.fixPosition(!0),this.collapseNavigationBar(),$(".chg-global-nav a").on("click",function(t){$(".chg-global-nav").off("mouseover"),$(".chg-global-nav").off("mouseleave")}),$(".chg-global-nav a").on("touchstart",function(t){$(".chg-global-nav").off("mouseover"),$(".chg-global-nav").off("mouseleave")}),$(".chg-global-nav a.track-nav-solutions").click(function(t){t.preventDefault(),t.stopPropagation();var e=$(".glass-container .tbs-tab");0!==e.length?e.trigger("click"):Eggshell.create("C.common.tbspopup").trigger("show tbs popup")}).attr("data-noajax","data-noajax").attr("data-noredirect","data-noredirect"),$(".chg-global-nav a.track-nav-qna").click(function(t){t.preventDefault(),t.stopPropagation();var e=$(".glass-container .qna-tab");0!==e.length?e.trigger("click"):C.utility.navigate($(t.target).attr("href"))}).attr("data-noajax","data-noajax").attr("data-noredirect","data-noredirect"),$(".chg-global-nav a.track-nav-live-tutors").click(function(t){t.preventDefault(),t.stopPropagation();var e=$(".glass-container .tutors-tab");0!==e.length?e.trigger("click"):C.global.instaEdu&&C.utility.navigate("/tutors/online-now/Chegg-GPA")}).attr("data-noajax","data-noajax").attr("data-noredirect","data-noredirect")},isNavigationBar:function(){return!$(".chg-body").hasClass("no-nav")&&0!==$(".chg-global-nav-list").length},slideOutNavigationBar:function(){var t=C.utility.getMaxIndex()+1;$(".chg-global-nav").css({width:this.navigationBarExpandedWidth+"px","z-index":t+1,"box-shadow":"1px 0px 2px #767676",overflow:"hidden"}),$(".chg-global-nav-home").css({opacity:0,visibility:"hidden"}),$(".chg-global-nav-list").css({visibility:"visible",opacity:1}),$(".chg-global-screen-blocker").css({"z-index":t,opacity:.6})},slideBackNavigationBar:function(){$(".chg-global-nav").css({width:this.navigationBarCollapsedWidth+"px","box-shadow":"none"}),$(".chg-global-nav-home").css({opacity:1,visibility:"visible"}),$(".chg-global-nav-list").css({visibility:"hidden",opacity:0}),$(".chg-global-screen-blocker").css({"z-index":-1,opacity:0})},expandNavigationBar:function(){this.isNavigationBar()&&(this.slideBackNavigationBar(),$(".chg-body").removeClass("chegg-content-nav-collapsed").addClass("chegg-content-nav-expanded"),$(".chg-global-nav").css({width:this.navigationBarExpandedWidth+"px"}),$(".chg-global-nav-home").css({opacity:0,visibility:"hidden"}),$(".chg-global-nav-list").css({visibility:"visible",opacity:1}),$(".chg-global-content").css("margin-left","210px"),$(".chg-global-nav").off("mouseover").off("mouseleave"))},collapseNavigationBar:function(){this.isNavigationBar()&&(0==$(".center-content").length&&$(".chg-global-content").css("margin-left","50px"),$(".chg-body").hasClass("chegg-content-nav-collapsed")?this.slideBackNavigationBar():($(".chg-body").removeClass("chegg-content-nav-expanded").addClass("chegg-content-nav-collapsed"),$(".chg-global-nav").css({width:this.navigationBarCollapsedWidth+"px"}),$(".chg-global-nav-home").css({opacity:1,visibility:"visible"}),$(".chg-global-nav-list").css({visibility:"hidden",opacity:0})),$(".chg-global-nav").hasClass("chg-global-nav-autosliding")&&($(".chg-global-nav").on("mouseover",$.proxy(function(){$(".chg-body").hasClass("chegg-content-nav-collapsed")&&this.slideOutNavigationBar()},this)),$(".chg-global-nav").on("mouseleave",$.proxy(function(){$(".chg-body").hasClass("chegg-content-nav-collapsed")&&this.slideBackNavigationBar()},this))))},setNavigationBarTopOffset:function(t){$(".chg-global-nav-home").css({top:87+t+"px"}),$(".chg-global-nav-list").css({top:90+t+"px"})},fixPosition:function(t){t?$(".chg-global-nav, .chg-global-nav-home, .chg-global-nav-list").css({position:"fixed"}):$(".chg-global-nav, .chg-global-nav-home, .chg-global-nav-list").css({position:"absolute"})}}),e=C.View.extend({height:100,initialize:function(){this.$globalHeader=$(".chg-header"),this.$fixedHeader=$("<div></div>"),this.scrollDetector=Eggshell.create("C.Eggshell.window.scroll.tracker"),this.fixedHeaderVisibleCallback=this.options.fixedHeaderVisibleCallback,this.render(),Eggshell.immuneToDestroyAll(this.scrollDetector)},render:function(){this.$fixedHeader.addClass("chg-fixed-header").css({height:"0px","z-index":C.utility.getMaxIndex()}).insertAfter($(".chg-header"))},fadeInFixedHeader:function(){this.$fixedHeader.css({height:this.height+"px",position:"fixed",top:"0px"}),this.fixedHeaderVisibleCallback&&"function"==typeof this.fixedHeaderVisibleCallback&&this.fixedHeaderVisibleCallback(this.height)},fadeOutFixedHeader:function(){this.$fixedHeader.css({height:"0px",position:"absolute",top:"50px"}),this.fixedHeaderVisibleCallback&&"function"==typeof this.fixedHeaderVisibleCallback&&this.fixedHeaderVisibleCallback(0)},handleFixedHeaderScrolledEvent:function(){50<=$("body").scrollTop()?this.fadeInFixedHeader():this.fadeOutFixedHeader()},enableFixedHeader:function(t){t?(this.$globalHeader.css({position:"absolute"}),this.scrollDetector.on("scrolled",this.handleFixedHeaderScrolledEvent,this),50<=$("body").scrollTop()&&this.fadeInFixedHeader()):(this.$globalHeader.css({position:"fixed"}),this.fadeOutFixedHeader(),this.scrollDetector.off("scrolled",this.handleFixedHeaderScrolledEvent,this))}});if(0<$(".chg-nav-v2").length){this.navigationBar=Eggshell.create("C.common.navigation"),Eggshell.immuneToDestroyAll(this.navigationBar);var i=Eggshell.find(this);Eggshell.connect(i,"expand navigation bar",this.navigationBar,"expand navigation bar").connect(i,"collapse navigation bar",this.navigationBar,"collapse navigation bar")}else this.navigationBar=new t,this.header=new e({fixedHeaderVisibleCallback:$.proxy(function(t){0==t?(this.navigationBar.setNavigationBarTopOffset(0),this.navigationBar.fixPosition(!1)):(this.navigationBar.setNavigationBarTopOffset(t-50),this.navigationBar.fixPosition(!0))},this)}),Eggshell.find(this).on("expand navigation bar",this.navigationBar.expandNavigationBar,this.navigationBar).on("collapse navigation bar",this.navigationBar.collapseNavigationBar,this.navigationBar).on("enable fixed header",function(){this.header.enableFixedHeader(!0),this.navigationBar.fixPosition(!1)}).on("disable fixed header",function(){this.header.enableFixedHeader(!1),this.navigationBar.fixPosition(!0)})}),Eggshell.immuneToDestroyAll(Eggshell.create("C.global.nav")),C("logs.events"),C.logs.events.my={onLoad:function(t){return{event_name:"on_load_person_overview",school_id:t.schoolId,question_for_me_ids:t.questions_for_me_ids.join("+"),qa_ids:t.qa_ids.join("+"),notes_ids:t.notes_ids.join("+")}}};try{var CRITEO=function(){var t="0.5.2",e,r,i=!1,n=!1,p={home:{eventType:"sendEvent",params:"v=2&pt1=0&pt2=1"},product:{eventType:"sendEvent",params:"v=2&pt1=2"},list:{eventType:"sendEvent",params:"v=2&pt1=3"},basket:{eventType:"transaction",params:"v=2&s=0"},confirmation:{eventType:"transaction",params:"v=2&s=1"},search:{eventType:"sendEvent",params:"v=2&pt1=4"}};function s(){return e[0]}function o(){return e[1]}function a(){var t="";return void 0!==e[2]&&""!=e[2]&&"."!=(t=e[2]).charAt(t.length-1)&&(t+="."),t}function l(){var t=e[3].charAt(0);return void 0!==t&&1==t}function c(){var t=e[3].charAt(1);return void 0!==t&&1==t}function u(){var t=e[3].charAt(2);return!n&&void 0!==t&&1==t}function h(){return e[4]}function f(){return e[5]}function d(){return("https:"==document.location.protocol?"https:":"http:")+"//dis."+a()+"criteo.com/dis/dis.aspx"}function g(t){return("https:"==document.location.protocol?"https://sslwidget.":"http://widget.")+"criteo.com/"+o()+"/display.js?resptype="+t+"&"+v()}function m(t,e){switch(t){case"sendEvent":return e[0];case"transaction":return e[1]}}function v(){for(var t="",e=r&&r.length||0,i=h(),n=1,s=0;s<e;s++)for(var o=0;o<i.length;o++)1<n&&(t+="&"),t+=b(r[s],n,i[o]),n++;return t}function b(t,e,i){var n=p[t.pageType];if(n){var s=f(),o="",r="";for(name in s)if(t.hasOwnProperty(name)){var a=s[name][0],l=s[name][1],c=s[name][2],u="";if(u="function"==typeof t[name]?t[name]():t[name])switch(l){case 0:r+="&"+a+"="+u;break;case 1:var h;"string"==typeof u?h=u.split(t.delimiter):"[object Array]"===Object.prototype.toString.apply(u)&&(h=u);var d=h.length;void 0!==c&&c<d&&(d=c);for(var g=1;g<=d;g++)r+="&"+a+g+"="+h[g-1];break;case 2:o+="&"+a+"="+encodeURIComponent(u)}}return"t"+e+"="+n.eventType+"&p"+e+"="+encodeURIComponent(n.params+"&wi="+m(n.eventType,i)+r)+o}}function y(){var t=d()+"?p="+s()+"&cb="+Math.floor(99999999999*Math.random());try{t+="&ref="+encodeURIComponent(document.referrer)}catch(t){}try{t+="&sc_r="+encodeURIComponent(screen.width+"x"+screen.height)}catch(t){}try{t+="&sc_d="+encodeURIComponent(screen.colorDepth)}catch(t){}return t.substring(0,2e3)}function C(){var t=d()+"?p="+s();t+="&"+v(),t+="&cb="+Math.floor(99999999999*Math.random());try{t+="&ref="+encodeURIComponent(document.referrer)}catch(t){}try{t+="&sc_r="+encodeURIComponent(screen.width+"x"+screen.height)}catch(t){}try{t+="&sc_d="+encodeURIComponent(screen.colorDepth)}catch(t){}return t.substring(0,2e3)}function w(t){if(window.addEventListener)window.addEventListener("load",t,!1);else if(window.attachEvent)window.attachEvent("onload",t);else{var e=window.onload;window.onload=function(){e&&void 0===e.fired&&(e.fired=!0,e()),t()}}}function x(){var t=[];if(l()){if(document.createElement){var e=document.createElement("iframe");e&&(e.width="1px",e.height="1px",e.style.display="none",e.src=C()),t.push(e)}}else{var i=document.createElement("img");i&&(i.width="1px",i.height="1px",i.style.display="none",i.src=g("gif"));var n=document.createElement("iframe");n&&(n.width="1px",n.height="1px",n.style.display="none",n.src=y(),i.onload=function(){$(n)}),t.push(i)}return t}function k(){for(var t=x(),e=0;e<t.length;e++)$(t[e])}function $(t){var e;if(u())e=document.getElementById("cto_mg_div");else{if(!(e=document.getElementsByTagName("body"))||0==e.length)return;e=e[0]}null!=e&&e.appendChild&&e.appendChild(t)}function E(){u()&&document.write("<div id='cto_mg_div' style='display:none;'></div>")}function S(){c()?w(function(){k()}):k()}return{Load:function(t){"undefined"==typeof CRITEO_CONF||i||(i=!0,n=t,e=CRITEO_CONF[1],r=CRITEO_CONF[0],E(),S())}}}()}catch(t){}CRITEO.Load(!0),C("logs.events"),C.logs.events.qa={onLoadMyQuestions:function(t){var e=[],i=t.questions_for_me;for(var n in i)e.push(i[n].id);return{event_name:"on_load_my_questions",questions_for_me_ids:e.join("+")}},onLoadTextbooksQA:function(t){var e=[];for(var i in t.questions)e.push(t.questions[i].id);return{event_name:"on_load_textbooks_questions",question_ids:e.join("+"),book_id:t.book_id}},onQuestionClick:function(t,e,i){return{event_name:"on_click_question",pcscrumb:i,qid:t}},onClickAnswer:function(t,e){return{event_name:"on_submit_answer",qid:t}},onSubmitQuestion:function(t,e){var i=t.response;return{event_name:"on_submit_ask_question",question_id:i.id,is_anonymous:i.anonymous,course_id:null!==i.questionCourse?i.questionCourse.id:null}},onClickSeeAllQA:function(){return C.logs.events.common.getOnlyEventName("on_click_see_all_qa")},onClickQuestionsTab:function(t,e,i){var n=[],s="";for(var o in"asked"==e?s="on_click_asked_questions":"answered"==e&&(s="on_click_answered_questions"),t)null!==t[o]&&n.push(t[o].id);return{event_name:s,ids:n.join("+")}},onClickHWHSubscribe:function(t,e){var i=t.subscription_type,n;return{event_name:"on_click_hwh_subscribe",id:void 0===e?null:e}},onClickInstantQuestion:function(t){return{event_name:"on_click_instant_question",question_id:t}}},C("logs.events"),C.logs.events.books={onClickSeeAllBooks:function(){return C.logs.events.common.getOnlyEventName("on_click_see_all_books")},onClickAddBooks:function(){return C.logs.events.common.getOnlyEventName("on_click_add_books")},onLoadCoursesBooks:function(t){return{event_name:"on_load_courses_books",required_isbns:t.required.join("+"),recommended_isbns:t.recommended.join("+")}},onToggleCheckBoxForCart:function(t){var e=$(t).is(":checked"),i=$(t).attr("id").split("include")[1];return e?{event_name:"on_check_book_for_add_to_cart",isbn:i}:{event_name:"on_uncheck_book_for_add_to_cart",isbn:i}},onClickAddToCart:function(t){return{event_name:"on_add_to_cart",isbns:t.isbns.join("+"),list_price:t.list_price,total_price:t.total_price}},onLoadPersonBooks:function(t){var e=t.userBooks,i=t.orderedBooks,n=[],s=[];if(null!=e)for(var o in e)if(e[o].no)for(var r in e[o].no)n.push(e[o].no[r]);if(null!=i)for(var o in i)i[o]&&s.push(i[o].ean);return{event_name:"on_load_person_books",books_for_me_ids:n.join("+"),books_i_have_ids:s.join("+")}}},C("logs.events"),C.logs.events.notes={onClickSeeAllNotes:function(){return C.logs.events.common.getOnlyEventName("on_click_see_all_notes")}},C("logs.events"),C.logs.events.course=function(){var e=function(t){return{event_name:t,schPrefix:this.schPrefix,schoolId:this.schoolId,subjCode:this.subjCode,subject:this.subject,term:this.term,year:this.year}};return{onLoadCoursesCourse:function(t){return{event_name:"on_load_courses_course",question_ids:t.questionIds.join("+"),review_ids:t.reviewIds.join("+"),is_planned:t.statusInfo.is_planned?1:0,is_rated:t.statusInfo.is_rated?1:0,current_term:t.studentInfo.term,student_count:t.studentInfo.count}},onClickIAmInThisCourse:function(t){return e.call(t,"on_click_i_am_in_this_course")},onClickRateThisCourse:function(t){return e.call(t,"on_click_rate_this_course")},onClickSeeAllInfoReviews:function(){return C.logs.events.common.getOnlyEventName("on_click_see_all_info_reviews")},onClickSeeAllStudents:function(){return C.logs.events.common.getOnlyEventName("on_click_see_all_students")},onClickWriteReview:function(){return C.logs.events.common.getOnlyEventName("on_click_write_a_review")},onSubmitRateCourse:function(t){return{event_name:"on_submit_rate_course",school:t.school,subject:t.subject,code:t.code,rating:t.currentRating,grade:t.currentGrade,year:t.currentYear,term:t.currentTerm}},onLoadCoursesQuestions:function(t){return{event_name:"on_load_courses_questions",school_id:t.course.schoolId,course_number:t.course.catalogNumber,subject_code:t.course.subjectCode,year:t.course.academicYear}}}}(),C("logs.events"),C.logs.events.schedule={onLoadSuccess:function(t){var e=[];for(var i in t.courses){var n={term:t.courses[i].academicTerm,year:t.courses[i].academicYear,catalogNumber:t.courses[i].catalogNumber,subjectCode:t.courses[i].subjectCode,schoolId:t.courses[i].schoolId};e.push(n)}return{event_name:"on_load_person_schedule",course_info:JSON.stringify(e)}},onClickAddCourse:function(t){return{event_name:"on_click_add_course",catalog_number:t.code,school_id:t.school,subject:t.subject,term:t.term,year:t.year}}},C("logs.events"),C.logs.events.home=function(){var e=function(t){var e=[];if(null!==t)for(var i in t){var n=i,s=[];for(var o in t[i].books)s.push(t[i].books[o].isbn);e.push({info:n,isbns:s.join("+")})}return e};return{onLoad:function(t){return{event_name:"on_load_home",courses_info:JSON.stringify(e(t.courses)),school_name:t.user_info.school,school_id:t.user_info.schoolId,term:t.user_info.term,year:t.user_info.year}},onSubmitAddRemoveCourse:function(t,e){return{event_name:"add"==e?"on_submit_add_course":"on_submit_remove_course",subject:t.subject,code:t.code,term:t.term,year:t.year,school:t.school}},OnHoverCourseItem:function(t,e){var i={event_name:"info"==e?"on_hover_course_info":"on_hover_course_book",year:t.year,term:t.term,code:t.code,subject:t.subject};return"book"==e?$.extend(i,{isbn:t.isbn}):i},onClickInfoLink:function(t,e){return{event_name:e,id:t}},onClickSeeMoreCourses:function(t){return{event_name:"on_click_see_course_info",school:t.school,subject:t.subject,code:t.code}}}}(),C("logs.events"),C.logs.events.solution={onLoadBookSolutions:function(t){return{event_name:"on_load_books_solution",isbn:t.isbn,problem_id:t.vmJson.problemId,solution_id:t.vmJson.solutionId}},onClickHWHSubscribe:function(t,e){return{event_name:"on_click_HWH_subscribe",isbn:t,solution_id:e}}},C("tou"),C.tou.model=C.Model.extend({objName:"C.tou.model",initialize:function(){},fetch:function(){var t="/_ajax/tou";$.ajax({context:this,type:"post",dataType:"json",url:t,success:function(t){this.set({version:t.version}),this.trigger("fetch:success")}})},submit:function(){var t="/_ajax/tou/accept",e={token:C.global.csrfToken};$.ajax({context:this,type:"post",dataType:"json",url:t,data:e,success:function(t){this.trigger("submit:success")}})}}),C.tou.view=C.View.extend({objName:"C.tou.view",events:{},initialize:function(){this.model.on("destroy",this.destroy,this),this.model.on("submit:success",this.destroy,this),this.model.on("fetch:success",this.render,this)},render:function(){if(0<$("div.dialog-widget").length&&0<$("div.tou").length)return C.log("tou found"),!0;var t=this.model.toJSON().version;return this.termsDialog=Eggshell.create("C.common.dialog"),this.termsDialog.trigger("set headline","Terms of Use and Privacy Policy").trigger("hide sub headline").trigger("hide icon").trigger("hide close button",!0).trigger("disable screen blocker click").trigger("enable default control").trigger("set primary button","I accept").trigger("set secondary button","I do not accept").trigger("set content html",'<div class="placeholder-content">'+t+"</div>").on("primary button clicked",$.proxy(function(){this.model.submit()},this)).on("secondary button clicked",$.proxy(function(){this.termsDialog.trigger("hide"),this.destroy(),this.onClickLogout()},this)),this.showDialog(),this},destroy:function(){this.remove(),this.termsDialog.trigger("hide")},showDialog:function(){this.termsDialog.trigger("show")},onClickLogout:function(t){t&&t.preventDefault();var e="/signout?token="+C.global.csrfToken;window.location.href=e}}),Eggshell.define("C.common.beacon",{inputs:["enable","disable","send beacon request"],outputs:[],singleton:!0},C.Model.extend({enabled:!0,queue:[],locked:!1,initialize:function(){Eggshell.find(this).on("send beacon request",this.add,this).on("enabled",this.enable).on("disable",this.disable)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},fire:function(){if(!0!==this.locked&&0!==this.queue.length){this.locked=!0;var t=this.queue.shift();if(1!=C.global.beacon)return this.locked=!1,void this.fire();$.cjax({context:this,url:"/_ajax/odin",dataType:"json",type:"POST",cache:!1,data:{url:"/v1/stream-event",method:"POST",token:C.global.csrfToken,payload:JSON.stringify({impressionId:t.impressionId,eventTargetId:t.eventTargetId,eventType:t.eventType,tracker:C.utility.dataLogger()})},always:function(){this.locked=!1,this.fire()}})}},add:function(t,e){if(null==e)throw"Empty payload";if(!e.impressionId)throw"Empty impression id";if(!e.eventTargetId)throw"Empty event target id";if(!e.eventType)throw"Empty event type";this.queue.push($.extend({},e)),this.fire()}})),Eggshell.define("C.Eggshell.tabs",{inputs:["build tabs"],outputs:["tab switch"],newNode:!1},Backbone.View.extend({counter:0,firstel:0,loadFlag:!1,initialize:function(t){this.loadFlag=!0,this.options=$.extend({activeTabIsLink:!1,useAlwaysHash:!1,needHashTag:!0},t),Eggshell.find(this).on("build tabs",this.buildTabs).on("view tab",this.activateTab)},events:{"click .tab-nav":"switchTab"},generateUniqueId:function(){var t;return this.$el.attr("id")+"-"+this.counter++},activateTab:function(t,e){this.$(".tab-nav[data-anchor="+e+"]").click()},switchTab:function(t){var e=$(t.target);if(void 0===$(t.target).attr("data-anchor")&&void 0!==$(t.target).parents(".tab-nav").attr("data-anchor")&&(e=$(t.target).parents(".tab-nav")),e.hasClass("selected")&&!this.options.activeTabIsLink)return!1;this.loadFlag=!1,this.$(".tab-nav").removeClass("selected"),this.$(".tab-content").removeClass("selected");var i=e.attr("id");return e.addClass("selected"),this.$("#"+i+"-content").addClass("selected"),this.options.needHashTag&&(i!=this.firstel||this.options.useAlwaysHash?window.location.hash=e.attr("data-anchor"):window.location.hash=""),this.Eggshell.trigger("tab switch",{type:e.attr("data-anchor"),id:i}),!0},buildTabs:function(){for(var t="",e=this.$(".tab-nav"),i=this.$(".tab-content"),n=0;n<e.length;n++){var s=$(e.get(n)),o=$(i.get(n)),r=this.generateUniqueId();s.attr("id",r),o.attr("id",r+"-content");var a=s.attr("data-anchor");void 0!==a&&!1!==a||s.attr("data-anchor",r+"-anchor"),window.location.hash=="#"+s.attr("data-anchor")&&(t=s)}this.firstel=$(e.get(0)).attr("id"),""==t?this.loadFlag||$(e.get(0)).click():$(t).click()}})),Eggshell.define("C.Eggshell.window.resize.tracker",{inputs:{"trigger resize":{payload:null}},outputs:["resize"],singleton:!0},function(){this.resize=function(){var t=$(window).width(),e=$(window).height();this.viewportWidth&&this.viewportHeight&&this.viewportWidth==t&&this.viewportHeight==e||(this.viewportWidth=t,this.viewportHeight=e,this.Eggshell.trigger("resize",{width:t,height:e}))},$(window).on("resize",$.proxy(function(t){this.resize()},this)),Eggshell.find(this).on("trigger resize",function(){this.resize()},this)}),Eggshell.define("C.Eggshell.loading.inline",{inputs:["show","hide","fade in","fade out"],outputs:["faded in","faded out"]},Backbone.View.extend({initialize:function(){this.Eggshell.input("show",$.proxy(function(){this.$el.show()},this)),this.Eggshell.input("hide",$.proxy(function(){this.$el.hide()},this)),this.Eggshell.input("fade in",$.proxy(function(t,e){this.$el.fadeIn(300,$.proxy(function(){this.Eggshell.output("faded in",e)},this))},this)),this.Eggshell.input("fade out",$.proxy(function(t,e){this.$el.fadeOut(300,$.proxy(function(){this.Eggshell.output("faded out",e)},this))},this))},render:function(){return this.setupInputs(),$.el}})),C.resource.add("C.Eggshell.dialog.close.title","Close"),Eggshell.define("C.Eggshell.dialog",{inputs:["set id","set headline","allow child overflow","set sub headline","set icon","set icon size","set content html","set content component","get content area","destroy content","set control","get control area","show","hide","show headline","hide headline","show sub headline","hide sub headline","show icon","hide icon","enable default control","show control","set primary button","set secondary button","set link","show primary button","hide primary button","disable primary button","enable primary button","show secondary button","hide secondary button","disable secondary button","enable secondary button","show link","hide link","hide control","enable screen blocker click","disable screen blocker click","disable default padding"],outputs:["content component created","content area","control component created","control area","shown","hidden","headline clicked","sub headline clicked","icon clicked","close button clicked","screen blocker clicked","primary button clicked","secondary button clicked","link clicked","content clicked"]},C.View.extend({componentNS:null,controlNS:null,template:_.template('<div class="dialog"><div class="header"><div class="close" title="<%- closeTitle %>"></div><div class="icon"></div><h3 class="headline"></h3><p class="subHeadline"></p></div><div class="content"></div><div class="control disabled"></div></div><div class="screenBlocker"></div>'),initialize:function(t){console.log("This component will be deprecated.  Instead use C.commom.dialog"),this.render(),this.setuplistens(),this.Eggshell.on("destroy",this.destroy)},destroy:function(){this.hide(),this.destroyContent(),this.destroyControl()},render:function(){this.$el.empty(),this.$el.html(this.template({closeTitle:C.resource.fetch("C.Eggshell.dialog.close.title")})),this.$el.hide(),this.$(".screenBlocker").css("z-index",C.utility.getMaxIndex()),this.$(".dialog").css("z-index",C.utility.getMaxIndex()+1)},events:{"click .close":"closeOnClick","click .screenBlocker":"screenBlockerOnClick","click .headline":"headlineOnClick","click .subHeadline":"subHeadlineOnClick","click .icon":"iconOnClick","click .content":"contentOnClick"},setuplistens:function(){this.Eggshell.on("set id",function(t,e){if(!e&&"id"!=typeof e)throw"Invalid id";this.$(".dialog").attr("id",e)}).on("set headline",function(t,e){if(!e&&"string"!=typeof e)throw"Invalid headline";this.$(".headline").html(e)}).on("allow child overflow",function(){this.$(".dialog").addClass("overflowed")}).on("set sub headline",function(t,e){if(!e&&"string"!=typeof e)throw"Invalid sub headline";this.$(".subHeadline").html(e)}).on("set icon",function(t,e){if(!e&&"string"!=typeof e)throw"Invalid icon class name";this.$(".icon").addClass(e)}).on("set icon size",function(t,e){if(!e||"string"!=typeof e||"small"!==e&&"large"!==e)throw"Invalid icon size";this.$(".icon").removeClass("small").removeClass("large"),this.$(".icon").addClass(e)}).on("set content html",function(t,e){if(!e&&"string"!=typeof e)throw"Invalid content html";this.destroyContent(),this.$(".content").html(e)}).on("set content component",function(t,e){if(!e&&"string"!=typeof e)throw"Invalid content component constructor";this.destroyContent(),this.componentNS=Eggshell.create(e,$.extend({},this.$(".content"))),this.Eggshell.trigger("content component created",this.componentNS)}).on("get content area",function(t,e){this.Eggshell.trigger("content area",$.extend({},this.$(".content")))}).on("destroy content",function(t,e){this.destroyContent()}).on("set control",function(t,e){if(!e&&"string"!=typeof e)throw"Invalid control constructor";this.destroyControl(),this.controlNS=Eggshell.create(e,{el:$.extend({},this.$(".control"))}),this.$(".control").show().removeClass("disabled"),this.Eggshell.trigger("control component created",this.controlNS)}).on("get control area",function(t,e){this.Eggshell.trigger("control area",$.extend({},this.$(".control")))}).on("show",function(){this.show()}).on("hide",function(){this.hide()}).on("show headline",function(t,e){this.$(".headline").show()}).on("hide headline",function(t,e){this.$(".headline").hide()}).on("show sub headline",function(t,e){this.$(".subHeadline").show()}).on("hide sub headline",function(t,e){this.$(".subHeadline").hide()}).on("show icon",function(t,e){this.$(".icon").show()}).on("hide icon",function(t,e){this.$(".icon").hide()}).on("show control",function(t,e){this.$(".control").show().removeClass("disabled")}).on("hide control",function(t,e){this.$(".control").hide().addClass("disabled")}).on("disable screen blocker click",function(t,e){this.screenBlockerClickEnabled=!1}).on("enable screen blocker click",function(t,e){this.screenBlockerClickEnabled=!0}).on("disable default padding",function(t,e){this.$(".dialog").addClass("no-padding")}).on("enable default control",function(t,e){if(!e&&"boolean"!=typeof e)throw"Invalid control enable flag";this.$(".control").show().removeClass("disabled"),this.destroyControl(),this.controlNS=Eggshell.create("C.Eggshell.dialog.control.standard",{el:$.extend({},this.$(".control"))}),Eggshell.connect(this.Eggshell.getNamespace(),"set primary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"set secondary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"set link",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"show primary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"hide primary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"disable primary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"enable primary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"show secondary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"hide secondary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"disable secondary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"enable secondary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"set text below button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"show text below button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"hide text below button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"show link",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"hide link",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"enable screen blocker",this.controlNS),Eggshell.connect(this.controlNS,"primary button clicked",this.Eggshell.getNamespace()),Eggshell.connect(this.controlNS,"secondary button clicked",this.Eggshell.getNamespace()),Eggshell.connect(this.controlNS,"link clicked",this.Eggshell.getNamespace()),this.controlNS.trigger("show")});var t=Eggshell.create("C.Eggshell.window.resize.tracker");Eggshell.on(t,"resize",$.proxy(this.resize,this))},resize:function(){var t=this.$(".dialog").height(),e=$(window).height(),i=parseInt(e-2*this.$(".dialog").css("top").replace("px","")),n=this.$(".header").height(),s=this.$(".control").height(),o;n&&(i-=n),s&&(i-=s,i-=parseInt(this.$(".control").css("margin-top").replace("px")));this.$(".control").css("margin-top")&&(i-=parseInt(this.$(".control").css("margin-top").replace("px")));var r=this.$(".dialog").css("padding");r||(r=this.$(".dialog").css("padding-top")),r&&(i-=2*parseInt(r.replace("px"))),i<=0&&(i=0),this.$(".content").css("max-height",i)},show:function(){this.resizable=!0,this.lockViewport(),this.$el.show(),this.$(".dialog").show(),this.resize(),this.Eggshell.trigger("shown"),this.resize()},hide:function(t){this.resizable=!1,this.$(".dialog").hide(),this.unlockViewport(),this.$el.hide(),this.Eggshell.trigger("hidden")},lockViewport:function(){$("html, body").css({overflow:"hidden"})},unlockViewport:function(){$("html, body").css({overflow:"visible"})},destroyContent:function(){this.componentNS&&Eggshell.destroy(this.componentNS),this.$(".content").html("")},destroyControl:function(){this.controlNS&&Eggshell.destroy(this.controlNS),this.$(".control").html("")},closeOnClick:function(t){t.preventDefault(),t.stopPropagation(),this.Eggshell.trigger("close button clicked"),this.hide()},screenBlockerOnClick:function(){!1!==this.screenBlockerClickEnabled&&(this.Eggshell.trigger("screen blocker clicked"),this.hide())},headlineOnClick:function(){this.Eggshell.trigger("headline clicked")},subHeadlineOnClick:function(){this.Eggshell.trigger("sub headline clicked")},iconOnClick:function(){this.Eggshell.trigger("icon clicked")},contentOnClick:function(t){this.Eggshell.trigger("content clicked",t)}})),Eggshell.define("C.Eggshell.dialog.control.standard",{inputs:["set primary button","set secondary button","set link","set link url","set hint","set text below button","show primary button","hide primary button","enable primary button","disable primary button","focus on primary button","show secondary button","hide secondary button","enable secondary button","disable secondary button","show link","hide link","show hint","hide hint","show text below button","hide text below button"],outputs:["primary button clicked","secondary button clicked","link clicked"]},Backbone.View.extend({template:_.template('<span class="control-standard-hint"></span><button class="secondary btn-lg btn-primary-outline"></button><div class="main-button">   <button class="primary btn-lg btn-primary"></button>   <div class="text-below-button"></div></div><a></a>'),initialize:function(){this.bindEvents(),this.render()},render:function(){this.$el.empty(),this.$el.html(this.template()),Eggshell.find(this).trigger("hide secondary button"),Eggshell.find(this).trigger("hide hint"),Eggshell.find(this).trigger("hide text below button")},events:{"click .primary":"clickPrimary","click .secondary":"clickSecondary","click a":"linkOnClick"},bindEvents:function(){var i=Eggshell.find(this).on("set primary button",function(t,e){if("string"!=typeof e||!$.trim(e))throw"Invalid primary button text";this.$(".primary").html(e).attr("title",e),i.trigger("show primary button")}).on("set secondary button",function(t,e){if("string"!=typeof e||!$.trim(e))throw"Invalid secondary button text";this.$(".secondary").html(e).attr("title",e),i.trigger("show secondary button")}).on("set link",function(t,e){if("string"!=typeof e||!$.trim(e))throw"Invalid link text";this.$("a").html(e).attr("title",e)}).on("set link url",function(t,e){if("string"!=typeof e||!$.trim(e))throw"Invalid link url";this.$("a").attr("href",e),i.trigger("show link")}).on("set text below button",function(t,e){if(!e&&"string"!=typeof e)throw"Invalid text type";this.$(".text-below-button").html(e),i.trigger("show text below button")}).on("set hint",function(t,e){if(!e&&"string"!=typeof e)throw"Invalid text type";this.$(".control-standard-hint").html(e),i.trigger("show hint")}).on("show primary button",function(){this.$(".primary").show()}).on("hide primary button",function(){this.$(".primary").hide()}).on("enable primary button",function(){this.$(".primary").prop("disabled",!1)}).on("disable primary button",function(){this.$(".primary").attr("disabled","disabled")}).on("focus on primary button",function(){this.$(".primary").focus()}).on("show secondary button",function(){this.$(".secondary").show()}).on("hide secondary button",function(){this.$(".secondary").hide()}).on("enable secondary button",function(){this.$(".secondary").prop("disabled",!1)}).on("disable secondary button",function(){this.$(".secondary").attr("disabled","disabled")}).on("show link",function(){this.$("a").show()}).on("hide link",function(){this.$("a").hide()}).on("show text below button",function(t,e){this.$(".text-below-button").show()}).on("hide text below button",function(t,e){this.$(".text-below-button").hide()}).on("show hint",function(t,e){this.$(".control-standard-hint").show()}).on("hide hint",function(t,e){this.$(".control-standard-hint").hide()})},clickPrimary:function(t){this.Eggshell.trigger("primary button clicked")},clickSecondary:function(t){this.Eggshell.trigger("secondary button clicked")},linkOnClick:function(){this.Eggshell.trigger("link clicked")}})),C.resource.add("C.Eggshell.viewfullsite.button.text","View mobile site &raquo;"),Eggshell.define("C.eggshell.viewfullsite.button",{inputs:["show","hide","view mobile site button clicked"],outputs:[]},C.View.extend({events:{"click .view-full-site-button":"viewMobileSiteButtonClicked"},initialize:function(){this.Eggshell.listen("show",function(t,e){this.$el.show()},this),this.Eggshell.listen("hide",function(t,e){this.$el.hide()},this),this.Eggshell.listen("view mobile site button clicked",function(t,e){var i=""+window.location;C.utility.setCookie("NO_MDT",0,-1e3),-1<i.indexOf("no_mobile=1")?window.location=i.replace(/(\?|&)no_mobile=1&?/,function(t,e){return"?"==e?"?":""}):C.utility.refresh()},this),this.render()},viewMobileSiteButtonTemplate:_.template('<div class="view-full-site-button"><span><%= text %></span></div>'),render:function(){this.$el.html(this.viewMobileSiteButtonTemplate({text:C.resource.fetch("C.Eggshell.viewfullsite.button.text")}))},viewMobileSiteButtonClicked:function(){this.Eggshell.trigger("view mobile site button clicked")}})),Eggshell.define("C.common.marker",{inputs:["show marker"],outputs:[],newNode:!1},function(t){var e=t.id,i=t.component,n=t.component;if(null!=n&&"string"==typeof n?i=$("#"+C.factory.createSafeCssName(n)):null!=n&&"object"==typeof n&&"function"==typeof n.getNamespace&&(i=$("#"+C.factory.createSafeCssName(n.getNamespace()))),!e)throw"Invalid automation marker ID";if(!i||!i.jquery)throw'Automation marker "'+e+'" error: invalid node';if(0==i.length)throw'Automation marker "'+e+'" error: node is no longer available';if(1<i.length)throw'Automation marker "'+e+'" error: cannot mark more than one node';this.showMarker=function(){i.addClass("C-test-"+C.factory.createSafeCssName(e))},Eggshell.find(this).on("show marker",this.showMarker),this.showMarker()}),C("global").profile&&console.profileEnd(),function(h){Eggshell.define("C.common.avatar",{inputs:["set avatar id","update avatar image url","update avatar image url with matching id","set size","set shape","set border","set avatar link url"],outputs:["rendered"]},function(t){this.id=null,this.$el=t.el,this.$el.addClass("medium"),this.$el.append(h("<img>")),this.$el.hide(),this.setSize=function(t,e){this.$el.removeClass("xsmall small medium large xlarge").addClass(e),this.resizeImage()},this.setShape=function(t,e){this.$el.removeClass("circle square").addClass(e)},this.enableBorder=function(t,e){e?this.$el.addClass("border"):this.$el.removeClass("border")},this.setUserId=function(t,e){this.id=e},this.resizeImage=function(){var t=h("img",this.$el);0<t.naturalWidth()&&0<t.naturalHeight()?this.onLoadImage():t.on("load",h.proxy(this.onLoadImage,this))},this.onLoadImage=function(){var t=h("img",this.$el),e=t.naturalWidth(),i=t.naturalHeight(),n=this.$el.width(),s=this.$el.height();if(i<e){var o=s*e/i,r=o/s*100,a=(o-s)/2;t.css({position:"relative","max-width":"none",width:r.toFixed(0)+"%",left:"-"+a.toFixed(1)+"px"})}else if(e<i){var l=n*i/e,c=l/n*100,u=(l-n)/2;t.css({position:"relative","max-height":"none",height:c.toFixed(0)+"%",top:"-"+u.toFixed(1)+"px"})}},this.updateImageUrl=function(t,e){var i=e;this.resizeImage(),h("img",this.$el).attr("src",i),this.$el.show()},this.updateImageUrlWithMatchingId=function(t,e){var i=e.id,n=e.image;i?i==this.id&&this.updateImageUrl(null,n):this.updateImageUrl(null,n)},this.setLinkUrl=function(t,e){var i=h("img",this.$el);i.remove(),h("<a></a>").attr("href",e).append(i).appendTo(this.$el)},Eggshell.find(this).on("set avatar id",this.setUserId).on("set size",this.setSize).on("set shape",this.setShape).on("set border",this.enableBorder).on("set avatar link url",this.setLinkUrl).on("update avatar image url",this.updateImageUrl).on("update avatar image url with matching id",this.updateImageUrlWithMatchingId)})}(window.Zepto||window.jQuery),function(t){function e(t){var e=new Image;return e.src=t,e}function i(){return console.warn("naturalWidth: no image have been passed"),0}if("naturalWidth"in new Image)return t.fn.naturalWidth=function(){return this.length?this[0].naturalWidth:i()},t.fn.naturalHeight=function(){return this.length?this[0].naturalHeight:i()};t.fn.naturalWidth=function(){return this.length?e(this[0].src).width:i()},t.fn.naturalHeight=function(){return this.length?e(this[0].src).height:i()}}(window.Zepto||window.jQuery),C.resource.add("C.common.autosuggest.placeholder","Begin your search"),C.resource.add("C.common.autosuggest.close","Close"),C.resource.add("C.common.autosuggest.submit","Submit"),C.resource.add("C.common.autosuggest.sellyourbooks","Sell your books"),C.resource.add("C.common.autosuggest.at","at "),C.resource.add("C.common.autosuggest.toptextbooks","Top Textbooks "),C.resource.add("C.common.autosuggest.topetextbooks","Top eTextbooks "),C.resource.add("C.common.autosuggest.topsolutions","Top Textbook Solutions "),C.resource.add("C.common.autosuggest.searchtextbooks","Search For Books"),C.resource.add("C.common.autosuggest.searchebooks","Search For eBooks"),C.resource.add("C.common.autosuggest.noresultsfound","No results found for"),C.resource.add("C.common.autosuggest.didyoumean","Did you mean"),C.resource.add("C.common.autosuggest.globalsearchheader","Search for a book or course"),Eggshell.define("C.common.autosuggestContextualContent",{inputs:["set contextual content","get contextual content"],outputs:["return contextual content"]},function(){var t=C.Model.extend({initialize:function(){this.set("searchTerm",null)}}),e;return C.View.extend({model:new t,template:_.template('<ul class="contextualContent"><li><a href="/search/<%- search %>/books" class="autocomplete-show-more"><%- text.searchtextbooks %><span></span></a></li><li><a href="/search/<%- search %>/books#p=1&amp;eBook=1" class="autocomplete-show-more"><%- text.searchebooks %><span></span></a></li></ul>'),initialize:function(){this.registerListeners(),this.on("render",this.render())},events:{"click a":"getLink",keypress:"onKeyDown"},render:function(){var t={searchtextbooks:C.resource.fetch("C.common.autosuggest.searchtextbooks"),searchebooks:C.resource.fetch("C.common.autosuggest.searchebooks")};this.$el.html(this.template({text:t,search:this.model.get("searchTerm")}))},registerListeners:function(){this.Eggshell.listen("get contextual content",function(t,e){this.render()}),this.Eggshell.listen("set contextual content",function(t,e){this.model.set("searchTerm",e)})},getLink:function(t){t.preventDefault(),t.stopPropagation(),C.utility.navigate(t.currentTarget.href)},onKeyDown:function(){}})}()),Eggshell.defineInterface("C.common.autosuggest.interface",{inputs:["render","set sohp autosuggest","set full width","set result type","force prefetch pre-results data","set min chars","set first result","set last result","set no results override","set contextual content","set callback","set placeholder text","set value","set render as form","set input field class","set submit button class","set submit button text","set tracking","enable global session tracking","suppress result meta","suppress icons","set max majors","set max schools","delegate mouse over selection event","set disabled items","add disabled items","remove disabled items","disable ajax loader","focus on search input","hide results","inline submit button","disable input field","enable input field"],outputs:["rendered","rendered results","rendered contextual content","rendered no results","search input focused","search input blurred","clicked result","autosuggest clicked","callback fired","autosuggest form submitted"]}),Eggshell.define("C.common.autosuggest",{interface:"C.common.autosuggest.interface"},function(){var t=Backbone.Model.extend({initialize:function(){this.set("minChars",3),this.set("placeholderText",C.resource.fetch("C.common.autosuggest.placeholder")),this.set("submitButtonText",C.resource.fetch("C.common.autosuggest.submit")),this.set("firstResult",null),this.set("lastResult",null),this.set("contextualContent",null),this.set("fullWidth",!1),this.set("lastQuery",null),this.set("renderAsForm",!1),this.set("submitButtonClass","btn-flat-sm"),this.set("inputFieldClass","form-input-sm"),this.set("delay",200),this.set("results",null),this.set("globalSessionTracking",!1),this.set("track",null),this.set("selectedResult",null),this.set("callback",null),this.set("resultContainerHeight",0),this.set("loadingIndicatorVisible",!1),this.set("suppressMeta",!1),this.set("maxMajors",null),this.set("maxSchools",null),this.set("suppressIcons",!1),this.set("disableAjaxLoader",!1),this.set("sohpAutosuggest",!1),this.set("hideResultsOnReload",!1),this.set("disabledItems",[]),this.set("maxResultsBlockHeight",!1)},preGetResults:function(t){clearTimeout(this.ajaxTimeout);var e=this;this.ajaxTimeout=setTimeout(function(){e.getResults(t)},this.delay)},getResults:function(t){this.trigger("showLoadingIndicator"),$.ajax({url:C.global.cheggSiteSecureUrl+"_ajax/autocomplete"+t,dataType:"json",context:this,xhrFields:{withCredentials:!0},success:function(t){t&&t[0]?(this.set("results",$.extend({},t[0].items)),this.trigger("processSuccessResponse")):(this.set("results",null),this.trigger("processErrorResponse")),this.trigger("hideLoadingIndicator")},error:function(t){this.set("results",null),this.trigger("processErrorResponse"),this.trigger("hideLoadingIndicator")}})}}),a=Backbone.View.extend({initialize:function(){this.render()},render:function(){this.hightLightText(this.model.attributes);var t=this.model.attributes.itemType;switch(t){case"book":case"dac":case"ebook":var e=this.model.attributes.subtitle?c_common_result_3_lines(this.model.attributes):c_common_result_2_lines(this.model.attributes);break;case"course":var e=c_common_result_course(this.model.attributes);break;case"major":var e=c_common_result_major(this.model.attributes);break;case"careerInterest":var e=c_common_result_careerInterest(this.model.attributes);break;case"academicInterest":var e=c_common_result_academicInterest(this.model.attributes);break;case"school":case"allschools":case"highschools":var e=c_common_result_school(this.model.attributes);break;case"lastItemLink":var e=c_common_result_last_link(this.model.attributes);break;default:var e=this.model.attributes.subtitle?c_common_result_3_lines(this.model.attributes):c_common_result_2_lines(this.model.attributes)}var i=this.options.fullWidth?c_common_result_container_full({attributes:this.model.attributes,result:e}):c_common_result_container({attributes:this.model.attributes,result:e});this.$el.attr("data-url",this.model.attributes["data-url"]),this.$el.attr("data-ii",this.model.attributes["data-ii"]),1==this.options.suppressIcon&&this.$el.addClass("suppress-icon"),"lastItemLink"==this.model.attributes.itemType&&this.$el.addClass("last-item-link"),this.$el.html(i),"book"!=t&&"dac"!=t&&"ebook"!=t||Eggshell.create("C.common.bookcover",{el:this.$el.find(".book-cover-container")}).trigger("set book image",this.model.attributes.img.url).trigger("turn off shadow").trigger("set book alt",this.model.attributes.img.alt)},events:{mousedown:"doClick"},doClick:function(t){if($(t.target).closest("li").hasClass("autosuggest-disabled-item"))return t.preventDefault(),t.stopPropagation(),!1;this.options.eggshell.trigger("autosuggest form submitted"),this.options.callback&&(t.preventDefault(),t.stopPropagation(),this.options.eggshell.trigger("callback fired",this.model),this.options.eggshell.trigger("autosuggest clicked",this.model.toJSON()))},hightLightText:function(){var t='<span class="chg-suggest-term">$1</span>',e=this.options.val,i=new RegExp("("+this.regExpQuote(e)+")","i"),n=$("<div/>").html(this.model.get("header")).text();if(this.model.get("header")){var s=n.replace(i,t);this.model.set("header",s)}if(this.model.get("subHeader")){var o=this.model.get("subHeader").replace(i,t);this.model.set("subHeader",o)}if(this.model.get("detail")){var r=this.model.get("detail").replace(i,t);this.model.set("detail",r)}},regExpQuote:function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}}),r=Backbone.Model.extend({initialize:function(){this.bulletSeperatorHTML="&nbsp;&bull;&nbsp;",this.on("change",this.transformData())},defaults:{header:null,subHeader:!1,detail:null,img:{alt:null,url:null},itemType:null,school:null,"data-url":null,"data-ii":null},transformData:function(){switch(this.get("itemType")){case"book":var t=this.get("title")+(this.get("editionNo")?' <span class="this-header-small">('+this.toOrdinal(this.get("editionNo"))+" Edition)</span>":""),e=$.extend({},this.get("itemPromo"));this.set("header",t),this.set("subHeader",!!this.get("subtitle")&&this.get("subtitle")),this.set("detail",this.get("author")+this.bulletSeperatorHTML+this.buildISBNText(this)),this.set("img",this.get("img")),this.set("itemType",this.get("itemType")),this.set("school",null),this.set("meta",this.buildBookPromoContent(e)),this.set("data-url",this.get("attributes")["data-url"]);break;case"ebook":var t=this.get("title")+(this.get("editionNo")?' <span class="this-header-small">('+this.toOrdinal(this.get("editionNo"))+" Edition)</span>":""),e;(e=$.extend({},this.get("itemPromo"))).isEbook=!0,this.set("header",t),this.set("subHeader",!!this.get("subtitle")&&this.get("subtitle")),this.set("detail",this.get("author")+this.bulletSeperatorHTML+this.buildISBNText(this)),this.set("img",this.get("img")),this.set("itemType",this.get("itemType")),this.set("school",null),this.set("meta",this.buildBookPromoContent(e)),this.set("data-url",this.get("attributes")["data-url"]);break;case"dac":var t=this.get("title")+(this.get("editionNo")?' <span class="this-header-small">('+this.toOrdinal(this.get("editionNo"))+" Edition)</span>":""),e=$.extend({},this.get("itemPromo"));this.set("header",t),this.set("subHeader",!!this.get("subtitle")&&this.get("subtitle")),this.set("detail",this.get("author")+this.bulletSeperatorHTML+this.buildISBNText(this)),this.set("img",this.get("img")),this.set("itemType",this.get("itemType")),this.set("school",null),this.set("meta",this.buildBookPromoContent(e)),this.set("data-url",this.get("attributes")["data-url"]);break;case"course":this.set("header",this.get("title")),this.set("subHeader",this.get("subtitle")),this.set("itemType",this.get("itemType")),this.set("school",this.get("attributes")["data-schoolName"]),this.set("data-url",this.get("attributes")["data-url"]);break;case"major":this.set("header",this.get("title")),this.set("data-url",this.get("attributes")["data-id"]),this.set("itemType",this.get("itemType"));break;case"careerInterest":this.set("header",this.get("title")),this.set("data-url",this.attributes["data-id"]),this.set("itemType",this.get("itemType"));break;case"academicInterest":this.set("header",this.get("title")),this.set("data-url",this.get("attributes")["data-id"]),this.set("itemType",this.get("itemType"));break;case"school":this.set("header",this.get("title")),this.set("data-url",this.get("attributes")["data-schoolId"]),this.set("itemType",this.get("itemType"));break;case"lastItemLink":this.set("header",this.get("title")),this.set("data-schoolId",this.get("attributes")["data-schoolId"])}},toOrdinal:function(t){var e=t%10;return 1==e&&11!=t?t+"st":2==e&&12!=t?t+"nd":3==e&&13!=t?t+"rd":t+"th"},buildISBNText:function(t){var e=t.get("isbnText");return e=e.replace("&amp;nbsp;",this.bulletSeperatorHTML),"ebook"==t.get("itemType")&&(e=(e=e.replace("ISBN","eISBN")).replace("ISBN13","eISBN13")),e},buildBookPromoContent:function(t){if("object"==typeof t&&(t.hasTBS||t.isEbook||t.hasInstantAccess||t.hasEbook)){var e="",i=!!t.hasTBS&&t.hasTBS,n=!!t.hasInstantAccess&&t.hasInstantAccess,s=!!t.hasEbook&&t.hasEbook,o=!!t.isEbook&&t.isEbook;return!0!==s&&!0!==i&&!0!==o&&!0!==n||(n&&(e+='<span class="results-meta-item">',e+='<span class="results-meta-icon results-meta-icon-instant"></span> <span class="results-meta-label">Free 7-day eTextbook Access</span></span>'),s&&(e+='<span class="results-meta-item">',e+='<span class="results-meta-icon results-meta-icon-ebook"></span> <span class="results-meta-label"><strong>eTextbook</strong> available</span></span>'),i&&(e+='<span class="results-meta-item">',e+='<span class="results-meta-icon results-meta-icon-tbs"></span> <span class="results-meta-label"><strong>Guided Solutions</strong> available</span></span>'),o&&(e+='<span class="results-meta-item">',e+='<span class="results-meta-icon results-meta-icon-ebook"></span> <span class="results-meta-label"><strong>eTextbook</strong></span></span>')),e}}}),l=Backbone.Collection.extend({model:r}),e,i;return Backbone.View.extend({model:new t,tmpl_field:_.template('<input name="autosuggest-input" class="autosuggest-input-field <%- text.inputFieldClass %>" type="text" placeholder="<%- text.placeholder %>" autocomplete="off" aria-label="search"/><span class="loadingIndicator"></span><div class="autosuggest-results-container"><ul class="autosuggest-results-list"></ul><div class="autosuggest-contextual-content"></div></div>'),tmpl_form:_.template('<form class="chg-search-form" action="/search" onsubmit="return false"><a data-type="button" class="autosuggest-search-btn search-magnify-btn  <%- text.submitButtonClass %>" href="#"><%= text.submit %></a><a class="autosuggest-search-cancel search-magnify-btn-close autosuggest-search-cancel-<%- text.inputFieldClass %>" href="#"><span class="icon-x"><%- text.close %></span></a><input name="autosuggest-input" class="autosuggest-input-field <%- text.inputFieldClass %>" type="text" placeholder="<%- text.placeholder %>" autocomplete="off" aria-label="search" /></form><div class="autosuggest-results-container"><ul class="autosuggest-results-list"></ul><div class="autosuggest-contextual-content"></div></div>'),initialize:function(){this.model=new t,this.model.on("processSuccessResponse",this.processSuccessResponse,this),this.model.on("processErrorResponse",this.processErrorResponse,this),this.model.on("showLoadingIndicator",this.showLoadingIndicator,this),this.model.on("hideLoadingIndicator",this.hideLoadingIndicator,this),this.registerListeners(),this.trackId=this.generateTrackId(),this.mouseInDropdown=!1},events:{"keyup .autosuggest-input-field":"onKeyUp","keydown .autosuggest-input-field":"onKeyDown","keydown .autosuggest-results-container":"onKeyDown","focus .autosuggest-input-field":"onTextboxFocus","blur .autosuggest-input-field":"onTextboxBlur","click .autosuggest-search-cancel":"resetSearch","click .autosuggest-search-btn":"clickSubmit","click li":"onSelectionClick","mouseenter .autosuggest-results-container":"onMouseEnter","mouseleave .autosuggest-results-container":"onMouseLeave"},mouseOverEvent:{"mouseover li":"onMouseOverSelection"},registerListeners:function(){this.Eggshell.listen("render",function(t,e){this.render()}),this.Eggshell.listen("set result type",function(t,e){this.model.set("resultType",e)}),this.Eggshell.listen("set min chars",function(t,e){e&&e===parseInt(e)&&this.model.set("minChars",e)}),this.Eggshell.listen("set first result",function(t,e){e&&this.model.set("firstResult",e)}),this.Eggshell.listen("set last result",function(t,e){e&&this.model.set("lastResult",e)}),this.Eggshell.listen("set full width",function(t,e){this.model.set("fullWidth",!0),this.$el.addClass("fullWidth")}),this.Eggshell.listen("set render as form",function(t,e){this.model.set("renderAsForm",!0),this.$el.addClass("form-display")}),this.Eggshell.listen("set tracking",function(t,e){e&&this.model.set("track",e)}),this.Eggshell.listen("enable global session tracking",function(t,e){this.model.set("globalSessionTracking",!0)}),this.Eggshell.listen("set callback",function(t,e){this.model.set("callback",!0)}),this.Eggshell.listen("set contextual content",function(t,e){e&&this.model.set("contextualContent",!0)}),this.Eggshell.listen("suppress result meta",function(t,e){this.model.set("suppressMeta",!0)}),this.Eggshell.listen("suppress icons",function(t,e){e&&"boolean"==typeof e&&this.model.set("suppressIcons",e)}),this.Eggshell.listen("set placeholder text",function(t,e){this.model.set("placeholderText",e),this.text=$.extend(this.text,{placeholder:this.model.get("placeholderText")})}),this.Eggshell.listen("set submit button text",function(t,e){this.model.set("submitButtonText",e)}),this.Eggshell.listen("set value",function(t,e){"string"==typeof e&&this.$inputField.val(e)}),this.Eggshell.listen("set input field class",function(t,e){e&&"string"==typeof e&&this.model.set("inputFieldClass",e)}),this.Eggshell.listen("set submit button class",function(t,e){e&&"string"==typeof e&&this.model.set("submitButtonClass",e)}),this.Eggshell.listen("set max majors",function(t,e){e&&"number"==typeof e&&this.model.set("maxMajors",e)}),this.Eggshell.listen("set max schools",function(t,e){e&&"number"==typeof e&&this.model.set("maxSchools",e)}),this.Eggshell.listen("disable ajax spinner",function(t,e){e&&"boolean"==typeof e&&this.model.set("disableAjaxLoader",e)}),this.Eggshell.listen("set sohp autosuggest",function(t,e){e&&"boolean"==typeof e&&this.model.set("sohpAutosuggest",e)}),this.Eggshell.listen("delegate mouse over selection event",function(t,e){this.delegateEvents(e?_.extend(this.events,this.mouseOverEvent):this.events)}),this.Eggshell.listen("set disabled items",function(t,e){this.setDisabledItems(e)}),this.Eggshell.listen("add disabled items",function(t,e){this.addDisabledItems(e)}),this.Eggshell.listen("remove disabled items",function(t,e){this.removeDisabledItems(e)}),this.Eggshell.listen("hide results",function(t){this.hideResults()}),this.Eggshell.listen("inline submit button",function(t){this.inlineSubmitButton()}),this.Eggshell.listen("set max results block height",function(t,e){this.model.set("maxResultsBlockHeight",e)}),Eggshell.find(this).on("focus on search input",function(){this.$inputField&&this.$inputField.focus()})},render:function(){var t=this.model.get("fullWidth"),e=this.model.get("renderAsForm"),i=this.model.get("sohpAutosuggest");if(this.submitButton='<span class="icn-magnify">'+this.model.get("submitButtonText")+"</span>",this.text={placeholder:this.model.get("placeholderText"),close:C.resource.fetch("C.common.autosuggest.close"),submit:this.submitButton,submitButtonClass:this.model.get("submitButtonClass"),inputFieldClass:this.model.get("inputFieldClass")},1==e?this.$el.html(this.tmpl_form({text:this.text})):this.$el.html(this.tmpl_field({text:this.text})),this.$inputField=this.$el.find(".autosuggest-input-field"),this.$resultsContainer=this.$el.find(".autosuggest-results-container"),this.$resultsList=this.$el.find("ul.autosuggest-results-list"),this.$searchButton=this.$el.find(".autosuggest-search-btn"),this.$cancelButton=this.$el.find(".autosuggest-search-cancel"),this.$form=this.$el.find(".chg-search-form"),this.$loadingIndicatorContainer=this.$el.find(".loadingIndicator"),this.$contextualContentContainer=this.$el.find(".autosuggest-contextual-content"),this.$curLi=null,this.submitButtonWidth=this.$searchButton.outerWidth(),this.model.get("suppressMeta")&&this.$resultsList.addClass("suppress-result-meta"),1==e&&0==t){var n="";if(1==i){var n="5px",s="5px";this.$form.css("margin-right","0px"),this.$searchButton.css({background:"#EB7100",right:n,top:s,width:this.submitButtonWidth});var o=this.submitButtonWidth+5+"px";this.$cancelButton.css({right:o})}else{var n="-"+(this.submitButtonWidth+5)+"px";this.$form.css("margin-right",this.submitButtonWidth),this.$searchButton.css({right:n,width:this.submitButtonWidth})}}this.Eggshell.trigger("rendered")},processSuccessResponse:function(){if(!this.blockAllResponses){var t=this.model.get("lastResult"),e=this.model.get("results");if(e){var i="object"==typeof e?e:jQuery.parseJSON(e),n=new l;$.each(i,$.proxy(function(t,e){var i=new r(e);i.set("data-ii",parseInt(t)+1),n.add(i)},this));var s="";if(0<n.length){s=this.buildResultSet(n),this.renderResultSet(s);var o=this.$resultsContainer.height()+this.$contextualContentContainer.height();this.model.set("resultContainerHeight",o),1!=this.model.get("hideResultsOnReload")&&(this.showResults(),this.model.set("hideResultsOnReload",!1))}else{s=this.buildResultSet(""),this.renderResultSet(s);var o=this.$resultsContainer.height()+this.$contextualContentContainer.height();this.model.set("resultContainerHeight",o),t&&this.showResults()}}}},getInputValue:function(){var t,e;return function(t){return t.length?$.trim(t):""}(this.$inputField.val()||"").replace(/([.?*+^$[\]\\/()"{}<>|])/g,"")},processErrorResponse:function(){var t=this.model.get("lastResult"),e=c_common_result_none({query:this.getInputValue(),noresults:C.resource.fetch("C.common.autosuggest.noresultsfound"),didyoumean:C.resource.fetch("C.common.autosuggest.didyoumean")}),i=this.options.fullWidth?c_common_result_container_full({attributes:{"data-url":"#"},result:e}):c_common_result_container({attributes:{"data-url":"#"},result:e});if(this.renderResultSet(i),t){var n=this.buildLastResult(t);this.$resultsList.append(n)}var s=this.$resultsContainer.height()+this.$contextualContentContainer.height();this.model.set("resultContainerHeight",s),this.showResults()},buildResultSet:function(t){var e=this.model.get("firstResult"),i=this.model.get("lastResult"),n=this.model.get("contextualContent"),r=this.model.get("fullWidth");if(this.$resultsList.html(""),e&&this.$resultsList.prepend(e),0<t.length&&t.each($.proxy(function(t,e){var i=$('<li class="result"></li>'),n=this.getInputValue(),s=!!this.model.get("callback")&&this.model.get("callback"),o=this.model.get("suppressIcons");this.isItemDisabled(t.attributes)&&i.addClass("autosuggest-disabled-item"),resultHTML=new a({model:t,el:i,val:n,callback:s,fullWidth:r,eggshell:Eggshell.find(this),suppressIcon:o}),this.$resultsList.append(i)},this)),i){var s=this.buildLastResult(i);this.$resultsList.append(s)}n&&this.buildContextualContent()},buildLastResult:function(t){var e=$('<li class="result"></li>');this.isItemDisabled(t.attributes)&&e.addClass("autosuggest-disabled-item");var i=new r(t),n=!!this.model.get("callback")&&this.model.get("callback"),s=new a({model:i,el:e,eggshell:Eggshell.find(this),callback:n});return this.$resultsList.append(e),e},buildContextualContent:function(){this.$contextualContentContainer.html("");var t=Eggshell.create("C.common.autosuggestContextualContent",{el:this.$contextualContentContainer});Eggshell.trigger(t,"set contextual content",this.getInputValue()),Eggshell.trigger(t,"get contextual content"),this.Eggshell.trigger("rendered contextual content")},renderResultSet:function(t){this.$resultsList.html(t)},showResults:function(){if(this.model.get("maxResultsBlockHeight")&&!_.isNaN(parseInt(this.model.get("maxResultsBlockHeight")))&&this.$resultsContainer.css({"overflow-y":"scroll","max-height":this.model.get("maxResultsBlockHeight")}),0==this.model.get("fullWidth")||0==this.model.get("renderAsForm")){var t=this.$inputField.outerWidth();this.$resultsContainer.width(t)}0<this.$resultsContainer.height()&&(this.$resultsContainer.slideDown(300),Eggshell.find("C.common.overlay.tooltip").trigger("hide"));var e=this.getInputValue();0<parseInt(e.length)&&this.$cancelButton.show()},hideResults:function(){this.$resultsContainer.hide();var t=this.getInputValue(),e;0==parseInt(t.length)&&this.$cancelButton.hide(),$(this.$resultsList).find("li").removeClass("selected")},inlineSubmitButton:function(){this.$searchButton=this.$el.find(".autosuggest-search-btn"),this.$searchButton.css({right:"0px"})},onKeyDown:function(t){if(40==t.keyCode){this.doNextSelection(t);var e=$(this.$resultsList).find("li.selected");this.scroll("down",e),t.preventDefault()}else if(38==t.keyCode){this.doPrevSelection(t);var e=$(this.$resultsList).find("li.selected");this.scroll("up",e),t.preventDefault()}else if(27==t.keyCode)this.$inputField.val(""),this.$inputField.blur(),this.hideResults(),this.$curLi=null;else if(13==t.keyCode)this.doSessionLogging(t),this.onSubmit(t);else{var i;$(this.$resultsList).find("li").not($(this.$resultsList).find("li li")).removeClass("selected"),this.$curLi=null}},scroll:function(t,e){var i=this.$resultsContainer,n=e,s=$(i).height(),o=$(n).height(),r=n.position().top+o,a=r;switch(t){case"up":if(r<=0){var l=this.scrollCounter.dec();$(i).scrollTop(s*l)}else if(s<r){var c=$(this.$resultsList).find("li").not($(this.$resultsList).find("li li")).length;$(i).scrollTop(9999),this.scrollCounter.set(Math.round(o*c/s))}break;case"down":if(s<r){var l=this.scrollCounter.inc();$(i).scrollTop((a-o)*l)}else r<0&&($(i).scrollTop(0),this.scrollCounter.reset())}},scrollCounter:(i=0,{inc:function(){return i+=1},dec:function(){return i-=1},reset:function(){i=0},set:function(t){i=t}}),onKeyUp:function(t){if(13==t.keyCode)return this.hideResults(),this.$curLi=null,void this.setResponseBlocker();var e=this.getInputValue(),i;this.model.get("lastQuery")!=e&&this.evalQuery(e)},setResponseBlocker:function(){this.blockAllResponses=!0,setTimeout($.proxy(function(){this.blockAllResponses=!1},this),1e3)},evalQuery:function(t){var e=this.model.get("minChars"),i=this.model.get("lastQuery");if(""===t||t.length<e)return this.hideResults(),void(this.$curLi=null);if(t.length>=e&&t!=i){var n=this.buildUrl(t);this.model.preGetResults(n),this.$curLi=null}else t.length>=e&&(this.showResults(),this.$curLi=null);this.model.set("lastQuery",t)},buildUrl:function(t){var e=this.model.get("resultType"),i=this.model.get("maxMajors"),n=this.model.get("maxSchools"),s="";if(e&&"[object Array]"===Object.prototype.toString.call(e)){var o,r,e;for(s+="type=",o=0,r=e.length;o<r;o++)s+=e[o],o<r&&1!=r&&o+1!=r&&(s+="|");1<e.length?s+="&combine_results=items&":s+="&",null!=i&&"number"==typeof i&&(s+="majors_max="+i+"&"),null!=n&&"number"==typeof n&&(s+="schools_max="+n+"&")}else s="type=all&";return"?search_by="+encodeURIComponent(t)+"&"+s+"trackid="+this.trackId},resetSearch:function(t){t.preventDefault(),t.stopPropagation(),this.$inputField.val(""),this.$resultsList.html(""),this.hideResults(),this.$curLi=null},onTextboxFocus:function(){var t=this.getInputValue();this.model.set("lastQuery",t),this.evalQuery(t),Eggshell.find(this).trigger("search input focused")},onTextboxBlur:function(){this.mouseInDropdown||this.$inputField.is(":focus")||(this.hideResults(),this.$curLi=null),Eggshell.find(this).trigger("search input blurred")},onMouseEnter:function(){this.mouseInDropdown||(this.mouseInDropdown=!0)},onMouseLeave:function(){var t;$(this.$resultsList).find("li").not($(this.$resultsList).find("li li")).removeClass("selected"),this.$curLi=null},doNextSelection:function(t){var e=$(this.$resultsList).find("li").not($(this.$resultsList).find("li li")),i=e.index($(this.$resultsList).find("li.selected")),n;e.removeClass("selected"),(n=-1==i||i>=e.length-1?e.eq(0).addClass("selected"):e.eq(i+1).addClass("selected")).hasClass("autosuggest-disabled-item")?this.doNextSelection(t):this.changeSelection(n)},doPrevSelection:function(t){var e=$(this.$resultsList).find("li").not($(this.$resultsList).find("li li")),i=e.index($(this.$resultsList).find("li.selected")),n;e.removeClass("selected"),(n=-1==i||0===i?e.eq(e.length-1).addClass("selected"):e.eq(i-1).addClass("selected")).hasClass("autosuggest-disabled-item")?this.doPrevSelection(t):this.changeSelection(n)},onMouseOverSelection:function(t){var e=$(t.target).closest("li");if(0!=e.not($(this.$resultsList).find("li li")).length&&!e.hasClass("autosuggest-disabled-item")){var i=t.currentTarget;e.length&&(this.$resultsList.find("li").removeClass("selected"),e.addClass("selected")),this.changeSelection(e)}},changeSelection:function(t){this.$curLi=t;var e=this.$curLi.find(".result-header");e.length?this.model.set("selectedResult",e.text()):this.model.set("selectedResult",null)},evaluateSchoolData:function(t){return savedId=C.utility.getLocal("schoolId"),savedName=C.utility.getLocal("schoolName"),!!t&&(t&&savedId&&savedName&&t==savedId?(this.schoolInfo={schoolName:savedName,schoolId:savedId},!0):void this.getSchool(t))},clickSubmit:function(t){this.onSubmit(t),this.doSessionLogging(t)},onSubmit:function(t){t.preventDefault(),t.stopPropagation();var e=this.model.get("renderAsForm"),i=this.model.get("track"),n=this.model.get("selectedResult"),s=this.model.get("callback"),o=$(this.$resultsList).find("li.selected");if(this.Eggshell.trigger("autosuggest form submitted"),this.hideResults(),!s){if(!e||this.$curLi)return void this.navigateToNewPage(this.$curLi);if(i&&"string"==typeof i){var r=i.split("=");this.$form.append('<input type="hidden" name="'+r[0]+'" value="'+r[1]+'" />')}return C.utility.navigate(C.global.cheggSiteUrl+"search/"+encodeURIComponent(this.getInputValue())+"/books"),!0}e&&!this.$curLi?(this.Eggshell.trigger("callback fired",{inputValue:this.getInputValue()}),this.Eggshell.trigger("autosuggest clicked",{inputValue:this.getInputValue()})):o.mousedown()},navigateToNewPage:function(t){var e=this.model.get("track"),i=this.model.get("lastQuery");if(null!=this.$curLi){var n=this.$curLi.attr("data-url");n=_.unescape(n);var s=this.$curLi.attr("data-ii");if(this.updateInputVal(),null!=s)n=-1==n.indexOf("?")?n+"?ii="+s:n+"&ii="+s,e&&(n+="&"+e);else{if(null!=n)return C.utility.navigate(n),!0;n="/search/"+i+"/books"}return C.utility.navigate(n),!1}var n=this.$curLi.find("a").attr("href");return C.utility.navigate(n),!1},onSelectionClick:function(t){var e=this.model.get("callback");if(1===t.which){var i=$(t.target).closest("li");return i.hasClass("autosuggest-disabled-item")?(t.preventDefault(),void t.stopPropagation()):(this.$curLi=i,this.changeSelection(this.$curLi),this.hideResults(),e||this.navigateToNewPage(this.$curLi),this.doSessionLogging(t),this.Eggshell.trigger("clicked result"),!1)}},updateInputVal:function(){var t=this.model.get("selectedResult");if(t){this.$inputField.val(t),this.$inputField.blur(),this.$resultsList.html("");var e=this.buildUrl(t);this.model.set("hideResultsOnReload",!0),this.model.preGetResults(e),this.model.set("selectedResult",null)}},showLoadingIndicator:function(){if(!this.model.get("disableAjaxLoader")&&!this.model.get("loadingIndicatorVisible")){var t='<canvas class="loading" width="15" height="15"><img src="//c.cheggcdn.com/s/_global/images/ajax-loader.gif"></canvas>';if(this.model.get("renderAsForm")){this.$searchButton.html(t);var e=this.$searchButton.find("canvas.loading")}else{this.$loadingIndicatorContainer.html(t);var e=this.$loadingIndicatorContainer.find("canvas.loading")}if(this.model.get("fullWidth")&&this.model.get("renderAsForm"))var i="#ffffff";else var i="#555";var n=new C.widget.spinner({canvas:e,color:i});this.model.set("loadingIndicatorVisible",!0)}},hideLoadingIndicator:function(){this.model.get("disableAjaxLoader")||this.model.get("loadingIndicatorVisible")&&(this.$searchButton.html(this.submitButton),this.$loadingIndicatorContainer.html(""),this.model.set("loadingIndicatorVisible",!1))},generateTrackId:function(){var t;return("000000000"+Math.abs(4294967295*Math.random()<<0).toString(16)).slice(-8)},doSessionLogging:function(t){t.preventDefault();var e=this.model.get("selectedResult"),i;this.model.get("globalSessionTracking")&&($(t.currentTarget).hasClass("autosuggest-input-field")&&(null!=e?C.logger.doSessionLog({src:"header"}):C.logger.doSessionLog({src:"header",action:"enter"})),$(t.currentTarget).hasClass("autosuggest-search-btn")&&C.logger.doSessionLog({src:"header",action:"button"}),$(t.currentTarget).hasClass("result")&&C.logger.doSessionLog({src:"header"}))},getDisabledItems:function(){var t=this.model.get("disabledItems");return t&&"object"==typeof t?t:[]},setDisabledItems:function(t){return this.model.set("disabledItems",this.convertItemsToArray(t)),this},addDisabledItems:function(t){var e=_.union(this.getDisabledItems(),this.convertItemsToArray(t));return this.setDisabledItems(e)},removeDisabledItems:function(t){var e=_.difference(this.getDisabledItems(),this.convertItemsToArray(t));return this.setDisabledItems(e)},convertItemsToArray:function(t){return t?"object"!=typeof t?[t]:t:[]},isItemDisabled:function(t){var e=t&&t["data-url"]?t["data-url"]:null;return!(!e||"string"!=typeof e)&&-1<_.indexOf(this.getDisabledItems(),e)}})}());var c_common_result_container=_.template('<a href="<%= attributes["data-url"] %>"><%= result %></a>'),c_common_result_container_full=_.template('<a href="<%= attributes["data-url"] %>"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><%= result %></span></span></span></a>'),c_common_result_3_lines=_.template('<div class="result-data result-3-lines result-<%- itemType %> <% if(typeof(meta)!= "undefined"){ %> result-data-margin-right<% } %>"><span class="book-cover-container"></span><div class="result-info"><span class="result-header"><%= header %></span><span class="result-sub-header"><%= subHeader %></span><span class="result-detail"><%= detail %></span><% if(typeof(meta)!= "undefined" && _.size(meta) != 0){ %><div class="results-meta"><%= meta %></div><% } %></div></div>'),c_common_result_2_lines=_.template('<div class="result-data result-2-lines result-<%- itemType %> <% if(typeof(meta)!= "undefined"){ %> result-data-margin-right<% } %>"><span class="book-cover-container"></span><div class="result-info"><span class="result-header"><%= header %></span><span class="result-detail"><%= detail %></span><% if(typeof(meta)!= "undefined" && _.size(meta) != 0){ %><div class="results-meta"><%= meta %></div><% } %></div></div>'),c_common_result_course=_.template('<div class="result-data result-2-lines result-<%- itemType %> <% if(typeof(meta)!= "undefined"){ %> result-data-margin-right<% } %>"><span class="img-wrapper autosuggest-icon autosuggest-icon-course"> <% if(typeof(img) != "undefined" && typeof(img.url) != "undefined" && typeof(img.alt) != "undefined"){ %> <img src="<%- img.url %>" alt="<%- img.alt %>"> <% } %></span><div class="result-info"><div class="result-bookinfo"><span class="result-header"><%= header %><span class="light"> at <%= school %> </span></span><span class="result-sub-header"><%= subHeader %></span><% if(typeof(meta)!= "undefined" && _.size(meta) != 0){ %><div class="result-meta"><%= meta %></div><% } %></div></div></div>'),c_common_result_major=_.template('<div class="result-data result-1-lines result-<%- itemType %>"><span class="img-wrapper autosuggest-icon autosuggest-icon-major"><% if(typeof(img) != "undefined" && typeof(img.url) != "undefined" && typeof(img.alt) != "undefined"){ %> <img src="<%- img.url %>" alt="<%- img.alt %>"> <% } %></span><div class="result-info"><span class="result-header"><%= header %></span></div></div>'),c_common_result_careerInterest=_.template('<div class="result-data result-1-lines result-<%- itemType %>"><div class="result-info"><span class="result-header"><%= header %></span></div></div>'),c_common_result_academicInterest=_.template('<div class="result-data result-1-lines result-<%- itemType %>"><div class="result-info"><span class="result-header"><%= header %></span></div></div>'),c_common_result_school=_.template('<div class="result-data result-2-lines result-<%- itemType %>"><span class="img-wrapper autosuggest-icon autosuggest-icon-school"><% if(typeof(img) != "undefined" && typeof(img.url) != "undefined" && typeof(img.alt) != "undefined"){ %> <img src="<%- img.url %>" alt="<%- img.alt %>"> <% } %></span><div class="result-info"><div class="result-bookinfo"><span class="result-header"><%= header %></span></div></div></div>'),c_common_result_1_1_1=_.template('<div class="result-data result-<%- itemType %>"><span class="img-wrapper">  <% if(typeof(img) != "undefined" && typeof(img.url) != "undefined" && typeof(img.alt) != "undefined"){ %> <img src="<%- img.url %>" alt="<%- img.alt %>"> <% } %></span><div class="result-info"><div class="result-bookinfo"><span class="result-header"><%= header %> <% if(typeof(school) != "undefined" && typeof(school.schoolName) != "undefined"){ %><span class="light"> at <%= school.schoolName %></span> <% } %></span></div></div></div>'),c_common_result_last_link=_.template("<%= header %>"),c_common_result_none=_.template('<div class="result-data result-2-lines result-noresults"><div class="result-info"><div class="result-bookinfo"><span class="result-header"><%= noresults %> <span class="chg-suggest-term"><%= query %></span></span></div></div></div>');function resizeSystemMessage(){height=$(".chg-system-message").height(),height&&($("body").hasClass("mobile")?$(".system-message-enable .chgg-hdr").css("margin-top",height-32+"px"):$(".system-message-enable .chgg-hdr, .system-message-enable .chgg-hdr-overlay, .system-message-enable .chg-container").css("margin-top",height+"px"))}C("addbook"),C.addbook.bookView=C.View.extend({objName:"C.addbook.bookView",className:"book clearfix",tmpl:_.template('<div class="book-img-1"><img class="book-cover" src="<%=img.url%>"/></div><div class="mini-biblio"><p class="txt-body-bold book-title"><%=title%></p><p class="book-author"><%=author%></p><p>ISBN: <span class="txt-body"><%-isbn%></span>&nbsp;ISBN13: <span class="txt-body"><%-ean%></span></p></div>'),initialize:function(){this.model.on("destroy",this.destroy,this)},render:function(){return this.$el.append($(this.tmpl(this.model.toJSON()))),this},destroy:function(){this.remove()}}),C.addbook.course=C.Model.extend({objName:"C.addbook.course"}),C.addbook.courses=Backbone.Collection.extend({objName:"C.addbook.courses",model:C.addbook.course}),C.addbook.courseView=C.View.extend({objName:"C.addbook.courseView",className:"courseRow clearfix",tmpl:_.template('<div class="selector"><input type="radio" id="<%=schoolId%><%=subjectCode%><%=catalogNumber%>" name="header" <%if(checked){%>checked="checked"<%}%>/><label for="<%=schoolId%><%=subjectCode%><%=catalogNumber%>" class="form-radio">&nbsp;</label></div><div class="course"><div class="dept-icon"><img src="/s/_global/images/dept-icons/0.png" alt=""></div><div class="course-title"><span class="txt-body-bold subject"><%=title%></span><br/><span class="subtitle"><%=subtitle%></span></div></div>'),events:{"click input":"onClickRadio"},initialize:function(){this.model.on("destroy",this.destroy,this)},render:function(){return this.$el.append($(this.tmpl({schoolId:this.model.get("schoolId"),subjectCode:this.model.get("subjectCode"),catalogNumber:this.model.get("catalogNumber"),title:this.model.get("title"),subtitle:this.model.get("subtitle")||"",checked:!1}))),this},onClickRadio:function(){this.model.trigger("select",this.model)},destroy:function(){this.remove()}}),C.addbook.coursesView=C.View.extend({objName:"C.addbook.coursesView",className:"courses",tmpl:_.template('<h2 class="txt-hdr-sec">Which course is this book for?</h2><h3>(Get access to Q&A, Notes and more for your course)</h3><div class="courseRow courseInputRow"><div class="selector"><input type="radio" id="userCourse" name="header" checked="checked"><label for="userCourse" class="form-radio">&nbsp;</label></div><input type="text" name="courseName" class="courseInput chg-form-lg" placeholder="Enter course name."/></div>'),initialize:function(){this.collection.on("add",this.onAdd,this)},render:function(){return this.$el.append($(this.tmpl())),this},setupAutoComplete:function(){new C.widget.autoComplete({el:this.$("input.courseInput"),type:"courses",callback:_.bind(this.onSelectCourse,this)})},onSelectCourse:function(t,e){var i=e.data("itemDetail");this.$(".courseInputRow").hide(),this.collection.add({schoolId:i.attributes["data-schoolId"],subjectCode:i.attributes["data-subjectCode"],catalogNumber:i.attributes["data-catalogNumber"],title:i.title,subtitle:i.subtitle,checked:!0})},onAdd:function(t){var e;new C.addbook.courseView({model:t}).render().$el.insertBefore(this.$(".courseInputRow"))}}),C.addbook.model=C.Model.extend({objName:"C.addbook.model",initialize:function(){this.courses=new C.addbook.courses,this.courses.on("select",this.onSelectCourse,this),this.courses.on("add",this.onAddCourse,this)},destroy:function(){this.trigger("destroy")},onSelectCourse:function(t){this.selectedCourse=t},onAddCourse:function(t){t.get("checked")&&(this.selectedCourse=t)},fetchCourse:function(){var t="/_ajax/book/course",e={year:this.get("year"),term:this.get("term"),ean:this.get("ean")};$.ajax({context:this,type:"post",dataType:"json",url:t,data:e,success:function(t){this.trigger("fetchCourse:success"),this.courses.add(t.courses)}})},submit:function(){if(!this.selectedCourse)return!1;var t="/_ajax/course/combined/ratingbookownership/add",e={year:this.get("year"),term:this.get("term"),ean:this.get("ean"),subject:this.selectedCourse.get("subjectCode"),code:this.selectedCourse.get("catalogNumber"),owned:!0,token:C.global.csrfToken};$.ajax({context:this,type:"post",dataType:"json",url:t,data:e,success:function(t){this.trigger("submit:success")}})}}),C.addbook.view=C.View.extend({objName:"C.addbook.view",tmpl:_.template('<div id="addbook-container" class="dialog-4"><div class="dialog-hdr"><h2 class="dialog-title"><%- title%></h2><div class="dialog-close-wrapper"><button class="btn-secondary-sm chg-dialog-close"><span class="icn-cross">Close</span> </button></div></div><form class="find-books"><div class="dialog-content"><fieldset class="chg-util-autosuggest-form"><input type="text" class="chg-form-sm has-default" placeholder="Enter ISBN, Title or Author\'s Name" name="search_by" autocomplete="off" /></fieldset></div><div class="dialog-ftr"></div></form></div>'),events:{"click .chg-dialog-close":"onClickCancel"},initialize:function(t){this.options=t,this.model.on("destroy",this.destroy,this),this.model.on("fetchCourse:success",this.onFetchCourseSuccess,this),this.model.on("submit:success",this.options.onSubmitSuccess||this.onSubmitSuccess,this),this.model.on("error",this.onError,this)},destroy:function(){this.remove(),this.dialog&&this.dialog.destroy()},render:function(){return this.$el.html(this.tmpl({btnTxt:this.options.btnTxt||"Add",title:this.options.title||"Add book"})),this.showDialog(),this},showDialog:function(){this.log("showDialog"),this.dialog&&this.dialog.destroy(),this.dialog=new C.widget.dialog({content:this.$el}),this.autoComplete&&this.autoComplete.destroy(),this.autoComplete=new C.widget.autoComplete({el:".chg-util-autosuggest-form input",type:this.options.type||"books",onTextboxBlur:_.bind(this.onTextboxBlur,this),callback:_.bind(this.options.autoCompleteCallback||this.onSelectBook,this),overrideSolutionsImage:!0})},onTextboxBlur:function(t){},onSelectBook:function(t,e){this.$(".chg-util-autosuggest-form").hide();var i=e.data("itemDetail");this.model.set(i);var n=new C.addbook.bookView({model:this.model});this.$(".dialog-content").append(n.render().$el),this.model.selectedCourse||this.model.fetchCourse()},onClickCancel:function(t){t.preventDefault(),this.autoComplete&&this.autoComplete.destroy(),this.destroy()},onClickSubmit:function(t){t.preventDefault(),this.model.submit()},onFetchCourseSuccess:function(){var t=new C.addbook.coursesView({collection:this.model.courses});t.render().$el.appendTo(this.$(".dialog-content")),t.setupAutoComplete()},onSubmitSuccess:function(){this.destroy(),this.reloadPage()},reloadPage:function(){window.location.reload()},onError:function(t,e){}}),Eggshell.define("C.common.rating",{inputs:["set rating","set large version","enable interaction","set non-interactable star color"],outputs:["rated"]},Backbone.View.extend({initialize:function(){this.model=new Backbone.Model({stars:0}),this.render(),this.$el.addClass("interaction"),Eggshell.find(this).on("enable interaction",this.enableInteraction).on("set large version",this.setLargeSize).on("set non-interactable star color",this.setColor).on("set rating",this.setRating)},enableInteraction:function(t,e){e?this.$el.addClass("interaction"):this.$el.removeClass("interaction")},setLargeSize:function(){this.$(".star-rating-input").addClass("large")},setRating:function(t,e){if("number"!=typeof e||null===e)throw"Invalid payload. Payload needs to be a number";this.model.set("stars",Math.min(parseInt(e),5)),this.updateStarsDisplay(this.model.get("stars"))},setColor:function(t,e){if(this.$el.hasClass("interaction"))throw"Cannot set interactable star color. Please disable interaction first.";if("gray"!==e&&"yellow"!==e)throw"Invalid color. Only gray and yellow are allowed.";"gray"===e?this.$el.addClass("gray"):this.$el.removeClass("gray")},render:function(t){this.$el.html(this.template()),this.updateStarsDisplay(this.model.get("stars"))},template:_.template('<div class="rate-my-course-input-container"><ul class="star-rating-input"><li data-id="1"></li><li data-id="2"></li><li data-id="3"></li><li data-id="4"></li><li data-id="5"></li></ul></div>'),events:{"hover .interaction .star-rating-input li":"mouseOver","mouseout .interaction .star-rating-input":"mouseOut","click .interaction .star-rating-input li":"click"},mouseOver:function(t){var e=$(t.currentTarget).attr("data-id");this.updateStarsDisplay(e)},mouseOut:function(){this.updateStarsDisplay(this.model.get("stars"))},click:function(t){var e=$(t.currentTarget).attr("data-id");this.model.set("stars",parseInt(e)),this.updateStarsDisplay(e),Eggshell.find(this).trigger("rated",e)},updateStarsDisplay:function(i){var t=$(this.el).find(".star-rating-input"),e=$(t).find("li");$.each(e,function(t,e){$(e).removeClass("active"),t<=i-1&&$(e).addClass("active")})}})),Eggshell.define("C.common.advertisements",{inputs:["render","setup ads","clear adDivIds","setup custom targeting","display ads"],outputs:{"slot rendered":{payload:null},"has adBlock":{payload:null},"advertisement rendered":{}},singleton:!0},function(){window.googletag&&window.googletag.hasOwnProperty("destroySlots")?window.googletag.destroySlots():window.googletag=null;var d="/"+C.global.sbmDfpExp+"/",g="chg-bp-",e="//pubads.g.doubleclick.net/gampad/ad?iu=",t=!1,i=!1,n={},p=0,f=0,s=0,o=!1,r=!1,a=!1,m,v={},b=[],l=[],c=Eggshell.create("C.common.log"),u=!1,h;Eggshell.shell(this).on("render",function(t){this.initRender()}).on("destroy",function(t){this.destruct()}),this.render=function(){C.global.adsFree||(0<(n=$(".chg-display")).length&&(!0!==t&&(t=!0,this.initialize(),this._setListeners(),this.setUserData()),Eggshell.shell(this).trigger("setup custom targeting").trigger("setup ads",{obj:n}).trigger("display ads")),!1===i&&!1===o&&(i=!0,Eggshell.find(this).trigger("advertisement rendered")))},this.initRender=function(){!1===r&&!1===o&&!1===a?(this.detectFF42()&&this.detectIncognitoMode(),this.checkForAdBlocker()):!0===r&&!1===o&&!0===a&&this.render()},this._setListeners=function(){var i=this;Eggshell.shell(this).on("clear adDivIds",this.clearAdDivIds).on("setup ads",function(t,e){i.setupAdSlots(e.obj)}).on("setup custom targeting",this.setupCustomTargeting).on("display ads",this.displayAds)},this.clearAdDivIds=function(){b=[]},this.reset=function(){n={},b=[],l=[]},this.initialize=function(){var t=this;C.global.adsFree||(C.global.doubleClickActive||C.global.gptLoadsEarlier||C.utility.loadScript("//www.googletagservices.com/tag/js/gpt.js",$.proxy(function(){this.onScriptLoad()},this)),googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],googletag.cmd.push(function(){googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices(),googletag.pubads().addEventListener("slotRenderEnded",$.proxy(t.slotRendered,t)),C.global.adsDebugging&&googletag.pubads().addEventListener("slotOnload",function(){console.timeEnd("from slot rendered to slot load")})}))},this.countElement=function(){return $(".chg-display").length},this.setUserData=function(){if(!1===o&&0<this.countElement()){var i=this;$.ajax({url:"/_ajax/adTargeting",type:"POST",context:this,dataType:"json",async:!1,success:function(t,e){i.userData=JSON.parse(t)}})}},this.getUserData=function(){return this.userData},this.setupAdSlots=function(t){this.reset(),$.each(t,$.proxy(function(t,e){this.setupElement(e)},this))},this.setupElement=function(t){var i=this;p++;var n=$(t);if(void 0===n.attr("id")){var s=n.data("unit"),o=d+s,r=g+p,a=[],e;if(n.is("[data-size]")){var l=n.data("size").toLowerCase().split(",");l.forEach(function(t){var e=t.toLowerCase().split("x"),i=parseInt(e[0],10),n=parseInt(e[1],10);a.push([i,n])})}if(1==a.length&&(a=a[0]),n.attr("id",r),n.data("nojs"))this.addNonJSAd(n);else{if(b.push(r),f++,n.is("[data-autoresize]")){if(1==l.length){var c=a[0],u=a[1];n.addClass("autoresize").css({paddingBottom:Math.round(1e3*u/c)/10+"%"})}}else n.is("[data-fullwidth]")&&n.addClass("fullwidth");var h=n.data("onload");void 0!==h&&(v[r]=h),googletag.cmd.push(function(){var t=googletag.defineSlot(o,a,r).addService(googletag.pubads()).set("container-id",r);if("SignInPage2"==s&&n.data("resize-map")){var e=googletag.sizeMapping().addSize([1400,200],[1920,1200]).addSize([1280,200],[1440,1024]).addSize([200,200],[1280,1024]).build();t.defineSizeMapping(e)}"number"==typeof m&&i.isDataUnitInList(s)?t.setTargeting("EB",m+""):t.clearTargeting("EB")})}}else-1==b.indexOf(n.attr("id"))&&b.push(n.attr("id"))},this.isDataUnitInList=function(t){var e=!0;if("object"==typeof C.global.inclusiveAdsEB)for(var i in e=!1,C.global.inclusiveAdsEB)C.global.inclusiveAdsEB[i]==t&&(e=!0);return e},this.getLinkCustomTargeting=function(){var t=this.getCustomTargeting(),i=[];return null!=t&&void 0!==t?($.each(t,function(t,e){i.push(t+"="+e)}),"&t="+encodeURIComponent(i.join("&"))):""},this.getCustomTargeting=function(){null==this.userData&&this.setUserData();var t=null!=this.getUserData()?this.getUserData():{};return $.extend({},C.global.adTargeting,t)},this.setupCustomTargeting=function(){var t=this.getCustomTargeting();null!=t&&this.setupDFPTargeting(t)},this.setupDFPTargeting=function(t){null!=t&&$.each(t,function(t,e){"EB"==t?m=e:googletag.cmd.push(function(){googletag.pubads().setTargeting(t,e+"")})})},this.slotRendered=function(t){var e=t.slot.getAdUnitPath(),i=t.slot.getSlotElementId(),n=!0===t.isEmpty?"no":"yes";C.global.adsDebugging&&(console.timeEnd("from render ads to slot render"),console.time("from slot rendered to slot load")),s++,this._queueAdLogData(e,"js",n),!1===t.isEmpty&&v[i],f===s&&this._logAds(),Eggshell.find(this).trigger("slot rendered",{id:i,name:e,nonempty:!t.isEmpty,event:t})},this.displayAds=function(){var i=this;$.each(b,function(t,e){i.displayAdsAction(e),googletag.cmd.push(function(){googletag.display(e)})})},this.executeOnLoadAction=function(t){switch(t){case"tower-slider":u||(C.utility.showTower(),u=!0)}},this.displayAdsAction=function(t){void 0!==v[t]&&this.executeOnLoadAction(v[t])},this._queueAdLogData=function(t,e,i){l.push({ad_slot:t,ad_type:e,ad_displayed:i})},this._logAds=function(){var t={dfp_ads:JSON.stringify(l)};c.trigger("session log",t)},this.onScriptLoad=function(){},this.checkForAdBlocker=function(){if(!1===r){var t=document.createElement("script");t.async=!0,t.type="text/javascript",t.src="//c.cheggcdn.com/s/_common/advertisements/adsense.js",r=!0;var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e);var i=this;t.onerror=function(){i._hasBlocker()},t.onload=function(){},i.setAdBlockTest(!0),i.render()}},this.setAdBlockTest=function(t){a=t},this.addNonJSAd=function(t){var e=$(t);$(t).append(this._defaultAdTemplate({adImageSrc:this.getLinkAds()+this.getProvider()+e.data("unit"),size:e.data("size"),time:this.getUnixTimeStamp(),targeting:this.getLinkCustomTargeting()})),this._queueAdLogData(t.data("unit"),"html","unknown")},this.getProvider=function(){return d},this.getLinkAds=function(){var t;return("https:"===document.location.protocol?"https:":"http:")+e},this.getUnixTimeStamp=function(){return Math.round(+new Date/1e3)},this._defaultAdTemplate=function(t){return'<img src="'+t.adImageSrc+"&sz="+t.size+"&c="+t.time+t.targeting+'" />'},this._hasBlocker=function(){var t={ad_blocker_detected:o=!0};c.trigger("session log",t),Eggshell.find(this).trigger("has adBlock")},this.detectIncognitoMode=function(){var i,n=this;try{i=window.indexedDB.open("test")}catch(t){h=!0}void 0===h&&this.retry(function t(){return"done"===i.readyState},function t(e){e||(h=!i.result)}),this.retry(function t(){return void 0!==h},function t(e){h&&n._hasBlocker()})},this.retry=function(t,e){var i=0,n=50,s=10,o=!1,r=window.setInterval(function(){t()&&(window.clearInterval(r),e(o)),50<i++&&(window.clearInterval(r),e(o=!0))},10)},this.detectFF42=function(){var t=42;if(0<=navigator.userAgent.search("Firefox")){var e=navigator.userAgent.search("Firefox")+8,i=navigator.userAgent.substring(e);if(parseFloat(i)>=parseFloat(42))return!0}return!1},this.destruct=function(){window.googletag&&window.googletag.hasOwnProperty("destroySlots")&&window.googletag.destroySlots(),u&&(C.utility.hideTower(),u=!1),v={}}}),Eggshell.define("C.common.bookcover.centered",{inputs:["set book image","set book link","set book alt","turn on shadow","turn off shadow","add class"],outputs:["ready","error","clicked"]},Backbone.View.extend({initialize:function(){console.log("C.common.bookcover.centered is deprecated, use C.common.bookcover instead"),this.model=new Backbone.Model,this.enableShadow(),Eggshell.find(this).on("set book image",this.setBookImage).on("set book link",this.setBookLink).on("turn on shadow",this.enableShadow).on("turn off shadow",this.disableShadow).on("set book alt",this.setBookAlt).trigger("ready")},enableShadow:function(){this.$el.addClass("shadow-enabled")},disableShadow:function(){this.$el.removeClass("shadow-enabled")},setBookAlt:function(t,e){var i=this.$("img");$(i).attr("alt",e)},setBookImage:function(t,e){if(!e&&"string"!=typeof e)throw"Invalid book image url. Image url needs to be a non-empty string";this.model.set("image",e),this.render()},setBookLink:function(t,e){if(!e&&"string"!=typeof e)throw"Invalid book link url. Link needs to be a non-empty string";this.model.set("link",e),this.render()},render:function(){this.$el.empty();var t=this.$el;if(this.model.get("image")){this.model.get("link")&&(t=$("<a></a>").attr("href",this.model.get("link")).appendTo(this.$el)),t.addClass("img-wrapper");var e=$("<img/>").appendTo(t);e.on("error",$.proxy(function(){this.$el.addClass("error"),this.$("img").remove(),this.Eggshell.trigger("error")},this)),e.attr("src",this.model.get("image"))}},events:{"click a":"bookOnClick"},bookOnClick:function(t){Eggshell.find(this).trigger("clicked")}})),Eggshell.define("C.common.bookcover.enhance",{inputs:[],outputs:["ready","error","clicked"],newNode:!1},Backbone.View.extend({events:{"click a":"bookOnClick"},initialize:function(){},bookOnClick:function(t){this.Eggshell.trigger("clicked")}})),Eggshell.define("C.common.bookcover",{inputs:["show","hide","set book image","set book alt","set book link","set book cover size","set book cover type","set book data","get book data","turn on shadow","turn off shadow","add class"],outputs:["ready","error","clicked","returned book data"]},Backbone.View.extend({events:{"click a":"bookOnClick"},initialize:function(){this.model=new Backbone.Model,this.$el.addClass("centered shadow-enabled"),void 0!==C.utility.browser&&C.utility.browser&&C.utility.browser.msie&&C.utility.browser.version<=8&&this.$el.addClass("ie-old"),Eggshell.find(this).on("set book cover type",this.setBookCoverType).on("set book cover size",this.setBookCoverSize).on("set book image",this.setBookImage).on("set book alt",this.setBookAlt).on("set book link",this.setBookLink).on("add class",this.setBookClassName).on("turn on shadow",this.enableShadow).on("turn off shadow",this.disableShadow).on("set book data",this.setData).on("get book data",this.getData).trigger("ready")},setData:function(t,e){this.model.set("data",e)},getData:function(){Eggshell.find(this).trigger("returned book data",this.model.get("data"))},render:function(){this.$el.removeClass("img-wrapper"),this.$el.empty();var t=this.$el;if(this.model.get("image")){this.model.get("link")&&(t=$("<a></a>").attr("href",this.model.get("link")).appendTo(this.$el)),this.$el.hasClass("centered")&&t.addClass("img-wrapper");var e=$("<img/>").appendTo(t);e.on("error",$.proxy(function(){this.$el.addClass("error"),this.$("img").remove(),this.Eggshell.trigger("error")},this)),e.attr("src",this.model.get("image"))}},setBookCoverType:function(t,e){if(!e||"string"!=typeof e)throw"Invalid book cover type. Type needs to be a string value.";this.$el.removeClass("flexible centered shadow-enabled img-wrapper"),"flexible"===e?this.$el.addClass("flexible"):"centered"===e&&this.$el.addClass("centered shadow-enabled")},setBookCoverSize:function(t,e){if(!e||"string"!=typeof e)throw"Invalid book cover size. Size needs to be a string value.";this.$el.removeClass("large medium small"),"small"===e?this.$el.addClass("small"):"medium"===e?this.$el.addClass("medium"):"large"===e&&this.$el.addClass("large")},setBookImage:function(t,e){if(!e&&"string"!=typeof e)throw"Invalid book image url. Url needs to be a string value.";this.model.set("image",e),this.render()},setBookAlt:function(t,e){if(!e&&"string"!=typeof e)throw"Invalid book alt. Alt needs to be a string value.";this.$("img").attr("alt",e)},setBookLink:function(t,e){if(!e&&"string"!=typeof e)throw"Invalid link. Link needs to be a string value.";this.model.set("link",e),this.render()},setBookClassName:function(t,e){if(!e&&"string"!=typeof e)throw"Invalid class name";this.$("img").addClass(e)},enableShadow:function(){this.$el.addClass("shadow-enabled")},disableShadow:function(){this.$el.removeClass("shadow-enabled")},bookOnClick:function(t){this.Eggshell.trigger("clicked")}})),Eggshell.defineInterface("C.common.dialog.interface",{inputs:["set id","set headline","set sub headline","set icon","set icon size","set content html","set content component","get content area","destroy content","set control","get control area","show","hide","show headline","hide headline","show sub headline","hide sub headline","show icon","hide icon","enable default control","show control","set primary button","set secondary button","set link","show primary button","hide primary button","disable primary button","enable primary button","show secondary button","hide secondary button","disable secondary button","enable secondary button","show link","hide link","hide control","enable screen blocker click","disable screen blocker click","disable default padding","hide close button","configure dialog","configure controls","set content","show loading","hide loading"],outputs:["content component created","content area","control component created","control area","before show","shown","hidden","headline clicked","sub headline clicked","icon clicked","close button clicked","screen blocker clicked","primary button clicked","secondary button clicked","link clicked","content clicked"]}),Eggshell.define("C.common.dialog",{interface:"C.common.dialog.interface"},Backbone.View.extend({componentNS:null,controlNS:null,options:{icon:!1,iconSize:!1,headline:"",subHeadline:"",controls:{primaryText:"Ok",secondaryText:"Cancel",primaryCallback:$.noop,secondaryCallback:$.noop},screenBlockerClickEnabled:!0,screenBlockerScrollEnabled:!1,positionCentrally:!1,noPadding:!1,hideClose:!1,minHeight:"none",closeTitle:C.resource.fetch("C.Eggshell.dialog.close.title"),html:""},initialize:function(t){this.bindEvents(),this.bindV2Interface(),this.configureDialog(t),t&&t.control&&this.configureControls(t.control),t&&t.html&&this.setContent(t.html),this.render(),Eggshell.find(this).on("destroy",this.destroy)},render:function(){this.renderDialog(),this.$(".screenBlocker").css("z-index",C.utility.getMaxIndex()),this.$(".dialog").css("z-index",C.utility.getMaxIndex()+1)},renderDialog:function(){var t=this.templates.dialog(this.options);this.$el.html(t),this.renderHeader(),this.renderContent(),this.renderControls()},renderHeader:function(){var t=this.templates.header(this.options);this.$(".header").first().html(t)},renderContent:function(){this.$(".content").first().show().removeClass("disabled").html(this.options.html),this.options.html||this.$(".content").hide().addClass("disabled")},renderControls:function(){this.controlNS&&this.controlNS.destroy(),this.controlNS=Eggshell.create("C.Eggshell.dialog.control.standard",{el:$.extend({},this.$(".control"))}).trigger("set primary button",this.options.controls.primaryText).trigger("set secondary button",this.options.controls.secondaryText).on("primary button clicked",this.options.controls.primaryCallback,this).on("secondary button clicked",this.options.controls.secondaryCallback,this),this.loading||(this.loading=Eggshell.create("C.Eggshell.loading.inline",{el:$.extend({},this.$(".control"))})),this.loading.trigger("hide")},bindV2Interface:function(){Eggshell.find(this).on("configure dialog",function(t,e){this.configureDialog(e),this.render()},this).on("configure controls",function(t,e){this.configureControls(e),this.renderControls()},this).on("set content",function(t,e){this.setContent(e),this.renderContent()},this)},configureDialog:function(t){var e;for(e in t)t.hasOwnProperty(e)&&"controls"!==e&&(this.options[e]=t[e])},configureControls:function(t){var e;for(e in t)t.hasOwnProperty(e)&&(this.options.controls[e]=t[e])},setContent:function(t){t&&(this.options.html=t)},destroy:function(){this.hide(),this.destroyContent(),this.destroyControl()},bindEvents:function(){var t;Eggshell.find(this).on("set id",function(t,e){this.$(".dialog").attr("id",e)}).on("add class",function(t,e){this.$(".dialog").addClass(e)}).on("set headline",function(t,e){if("string"!=typeof e)throw"Invalid headline";this.configureDialog({headline:e}),this.renderHeader()}).on("set sub headline",function(t,e){if("string"!=typeof e)throw"Invalid sub headline";this.configureDialog({subHeadline:e}),this.renderHeader()}).on("set icon",function(t,e){if("boolean"!=typeof e&&"string"!=typeof e)throw"Invalid icon class name";this.configureDialog({icon:e}),this.renderHeader()}).on("set icon size",function(t,e){if("boolean"!=typeof e&&"string"!=typeof e)throw"Invalid icon class name";this.configureDialog({iconSize:e}),this.renderHeader()}).on("set content html",function(t,e){if("string"!=typeof e)throw"Invalid content html";this.destroyContent(),this.setContent(e),this.renderContent()}).on("disable screen blocker click",function(t,e){this.configureDialog({screenBlockerClickEnabled:!1})}).on("enable screen blocker click",function(t,e){this.configureDialog({screenBlockerClickEnabled:!0})}).on("enable screen blocker scroll",function(t,e){this.configureDialog({screenBlockerScrollEnabled:!0}),this.$(".screenBlocker").addClass("scrollable"),this.$(".content").css("max-height","none")}).on("disable screen blocker scroll",function(t,e){this.configureDialog({screenBlockerScrollEnabled:!1}),this.$(".screenBlocker").removeClass("scrollable"),this.resize()}).on("disable default padding",function(t,e){this.configureDialog({noPadding:!0}),this.render()}).on("hide close button",function(t,e){this.configureDialog({hideClose:!0}),this.renderHeader()}).on("enable default control",function(t,e){if(!e&&"boolean"!=typeof e)throw"Invalid control enable flag";this.$(".control").show().removeClass("disabled"),this.destroyControl(),this.controlNS=Eggshell.create("C.Eggshell.dialog.control.standard",{el:$.extend({},this.$(".control"))}),Eggshell.connect(Eggshell.find(this).getNamespace(),"set primary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"set secondary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"set link",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"show primary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"hide primary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"disable primary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"enable primary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"show secondary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"hide secondary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"disable secondary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"enable secondary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"set text below button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"show text below button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"hide text below button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"show link",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"hide link",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"enable screen blocker",this.controlNS),Eggshell.connect(this.controlNS,"primary button clicked",Eggshell.find(this).getNamespace()),Eggshell.connect(this.controlNS,"secondary button clicked",Eggshell.find(this).getNamespace()),Eggshell.connect(this.controlNS,"link clicked",Eggshell.find(this).getNamespace()),this.controlNS.trigger("show")}).on("set content component",function(t,e){if(!e&&"string"!=typeof e)throw"Invalid content component constructor";this.destroyContent(),this.componentNS=Eggshell.create(e,$.extend({},this.$(".content"))),Eggshell.find(this).trigger("content component created",this.componentNS)}).on("get content area",function(t,e){Eggshell.find(this).trigger("content area",$.extend({},this.$(".content")))}).on("destroy content",function(t,e){this.destroyContent()}).on("set control",function(t,e){if(!e||"string"!=typeof e)throw"Invalid control constructor";this.controlNS&&this.controlNS.destroy(),this.controlNS=Eggshell.create(e,{el:$.extend({},this.$(".control"))}),this.$(".control").show().removeClass("disabled"),Eggshell.find(this).trigger("control component created",this.controlNS)}).on("get control area",function(t,e){Eggshell.find(this).trigger("control area",$.extend({},this.$(".control")))}).on("show",function(){this.show()}).on("hide",function(){this.hide()}).on("show headline",function(t,e){this.$(".headline").show()}).on("hide headline",function(t,e){this.$(".headline").hide()}).on("show sub headline",function(t,e){this.$(".subHeadline").show()}).on("hide sub headline",function(t,e){this.$(".subHeadline").hide()}).on("show icon",function(t,e){this.$(".icon").show()}).on("hide icon",function(t,e){this.$(".icon").hide()}).on("show control",function(t,e){this.$(".control").show().removeClass("disabled")}).on("hide control",function(t,e){this.$(".control").hide().addClass("disabled")}).on("show loading",function(t,e){this.controlNS.trigger("hide"),this.loading.trigger("show")}).on("hide loading",function(t,e){this.loading.trigger("hide"),this.controlNS.trigger("show")}).on("scroll to top",function(){this.$(".content").offset().top<0&&$(".screenBlocker",this.$el).animate({scrollTop:0},100)}),Eggshell.create("C.Eggshell.window.resize.tracker").on("resize",$.proxy(this.resize,this))},destroyContent:function(){this.componentNS&&this.componentNS.destroy(),this.$(".content").html("")},destroyControl:function(){this.controlNS&&this.controlNS.destroy(),this.$(".control").html("")},show:function(){var t=!navigator.userAgent.match(/iPad/i);Eggshell.find("C.common.overlay.tooltip").trigger("acitvate tooltip"),this.resizable=!0,t&&this.lockViewport(),this.$el.show(),this.$(".dialog").show(),this.resize(),this.$(".dialog").hide(),this.$(".dialog").fadeIn(300,$.proxy(function(){Eggshell.find(this).trigger("shown"),this.resize()},this))},hide:function(){this.resizable=!1,this.$(".dialog").fadeOut(300,$.proxy(function(){this.unlockViewport(),this.$el.hide(),Eggshell.find(this).trigger("hidden")},this)),Eggshell.find("C.common.overlay.tooltip").trigger("deacitvate tooltip")},lockViewport:function(){$("html, body").css({overflow:"hidden"})},unlockViewport:function(){$("html, body").css({overflow:"visible"})},resize:function(){if(!this.options.screenBlockerScrollEnabled){var t=this.$(".dialog"),e=this.$(".control"),i=t.height(),n,s=$(window).height()-2*parseInt(t.css("top"),10),o=this.$(".header").height();o&&(s-=o),e.is(":visible")&&(s-=e.outerHeight(!0));var r=t.css("padding");r||(r=t.css("padding-top")),r&&(s-=2*parseInt(r.replace("px"))),s<=0&&(s=0),this.$(".content").css("max-height",s)}},events:{"click .close":"closeOnClick","click .screenBlocker":"screenBlockerOnClick","click .headline":"headlineOnClick","click .subHeadline":"subHeadlineOnClick","click .icon":"iconOnClick","click .content":"contentOnClick"},closeOnClick:function(t){t.preventDefault(),t.stopPropagation(),Eggshell.find(this).trigger("close button clicked"),this.hide()},screenBlockerOnClick:function(t){!1!==this.options.screenBlockerClickEnabled&&$(t.target).hasClass("screenBlocker")&&(Eggshell.find(this).trigger("screen blocker clicked"),this.hide())},headlineOnClick:function(){Eggshell.find(this).trigger("headline clicked")},subHeadlineOnClick:function(){Eggshell.find(this).trigger("sub headline clicked")},iconOnClick:function(){Eggshell.find(this).trigger("icon clicked")},contentOnClick:function(t){Eggshell.find(this).trigger("content clicked",t)},templates:{dialog:_.template('<div class="screenBlocker"><div style="min-height: <%= minHeight %>;" class="dialog<% if (noPadding) { %> no-padding<% } %> <% if (positionCentrally) { %> align-center<% } %>"><div class="header"></div><div class="content"></div><div class="control"></div></div></div>'),header:_.template('<div class="close<% if (hideClose) { %> hidden<% } %>" title="<%- closeTitle %>"></div><div class="icon<% if (icon) { %> <%= icon %><% } else { %> hidden<% } %><% if (iconSize) { %><%= iconSize %><% } %>"></div><h3 class="headline<% if (!headline) { %> hidden<% } %>"><%= headline %></h3><p class="subHeadline<% if (!subHeadline) { %> hidden<% } %>"><%= subHeadline %></p>')}})),C.resource.add("C.common.dialog.close.title","Close"),function(){var d={escapeCss:function(t){return t=t.replace(/[!\"#$%&'\(\)\*\+,\.\/:;<=>\?\@\[\\\]\^`\{\|\}~]/g,"-")},escapeHtml:function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return String(t).replace(/[&<>"']/g,function(t){return e[t]})},hasClass:function(t,e){return e&&new RegExp("\\b"+e+"\\b").test(t.className)},addClass:function(t,e){var i=e.split(/\s+/),n;for(n=0;n<i.length;n++)d.hasClass(t,i[n])||(t.className+=(t.className?" ":"")+i[n])},removeClass:function(t,e){for(var i=e.split(/\s+/),n=t.className.split(/\s+/),s=0;s<i.length;s++){var o=n.indexOf(i[s]);-1<o&&n.splice(o,1)}t.className=n.join(" ")},getElement:function(t){var e=null;return"string"==typeof t?e=document.getElementById(t):"object"==typeof t&&(e=t[0]||t),e},getClassElement:function(t){var e=null;return e=document.getElementsByClassName(t)},removeElement:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},scrollTop:function(){var t=document.body,e=document.documentElement;return window.pageYOffset||e.scrollTop||t.scrollTop},scrollLeft:function(){var t=document.body,e=document.documentElement;return window.pageXOffset||e.scrollLeft||t.scrollLeft}},t="getBoundingClientRect"in document.documentElement;d.getOffset=t?function(t,e){var i=t.getBoundingClientRect(),n=document.body,s=document.documentElement,o=e?0:d.scrollTop(),r=e?0:d.scrollLeft(),a=s.clientTop||n.clientTop||0,l=s.clientLeft||n.clientLeft||0;return{top:Math.round(i.top+o-a),left:Math.round(i.left+r-l)}}:function(t,e){for(var i=0,n=0;t;)i+=parseFloat(t.offsetTop),n+=parseFloat(t.offsetLeft),t=t.offsetParent;return e&&(i-=d.scrollTop(),n-=d.scrollLeft()),{top:i,left:n}},d.getWidth=t?function(t){var e;return t.getBoundingClientRect().width}:function(t){return t.offsetWidth},d.getHeight=t?function(t){var e;return t.getBoundingClientRect().height}:function(t){return t.offsetHeight},d.createQueryString=function(t){var e="";if("string"==typeof t)e=t;else if(t){var i=[];for(key in t)t.hasOwnProperty(key)&&i.push(encodeURIComponent(key)+"="+encodeURIComponent(t[key]));e=i.join("&")}return e},d.ajax=function(e){var i=new XMLHttpRequest,t=e.url,n=e.method&&e.method.toUpperCase()||"GET",s="",o=void 0===e.async||!!e.async;if("GET"==n){var r=d.createQueryString(e.data);r&&(t+=-1===t.indexOf("?")?"?":"",t+="?"!==t.substr(-1)?"&":"",t+=r)}return i.onreadystatechange=function(){if(i.readyState==XMLHttpRequest.DONE)if(200==i.status){var t=i.responseText;try{t=JSON.parse(t)}catch(t){}e.success&&e.success.call(e.context||null,t,i)}else e.error&&e.error.call(e.context||null,i)},i.open(n,t,o),"POST"==n&&(i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s=d.createQueryString(e.data)),i.send(s),i},d.isMobileDevice=function(){var t=navigator.userAgent.toLowerCase();return-1!==t.indexOf("android")&&-1!==t.indexOf("mobile")||/webos|iphone|ipod|blackberry|iemobile|windows phone|windows ce|opera mini/i.test(t)},d.isMobileExperience=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)<768},d.isMobile=function(){return this.isMobileDevice()&&this.isMobileExperience()};var e=function(h){if(h&&!this.initialized){this.initialized=!0;var t=function(t){if(this.el=t.el?t.el[0]||t.el:null,this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",d.escapeCss(h.find(this).getNamespace())),this.el.setAttribute("class",d.escapeCss(h.find(this).getConstructorNamespace()))),this.bound=function(t){if(!this.bound[t]){if(!this[t])return;this.bound[t]=this[t].bind(this)}return this.bound[t]},this.bind)for(var e=0,i;i=this.bind[e];e++)this.bound(i);h.find(this).on("initialize",this.initialize)},e,i,n,s,o,r;h.define("C.common.crosspromo",{inputs:{render:{payload:"object"}},outputs:{},strict:!1},((e=function(){t.apply(this,arguments)}).prototype={initialize:function(){h.find(this).on("render",this.render).on("destroy",this.destroy)},render:function(t,e){this.interrupt&&this.interrupt.trigger("destroy"),this.interrupt=h.create(e.type,{el:this.el}).trigger("render",e)},destroy:function(){this.interrupt&&this.interrupt.trigger("destroy")}},e)),h.define("C.common.crosspromo.modal",{inputs:{render:{payload:{overlay:"object",tooltip:"object"}},hide:{payload:null}},outputs:{"action clicked":{payload:null},"cancel clicked":{payload:null},"outside clicked":{payload:null}},singleton:!0,immuneToDestroyAll:!0},((i=function(){t.apply(this,arguments)}).prototype={initialize:function(){h.find(this).on("destroy",this.destroy).on("render",this.render).on("hide",this.hide),this.overlay=h.create("C.common.crosspromo.overlay"),this.tooltip=h.create("C.common.crosspromo.tooltip")},render:function(t,e){this.overlay.trigger("render",e.overlay),this.tooltip.trigger("render",e.tooltip),this.doConnects()},doConnects:function(){this.overlay.on("clicked",this.overlayClicked,this),this.tooltip.on("action clicked",this.actionClicked,this),this.tooltip.on("cancel clicked",this.cancelClicked,this)},doDisconnects:function(){this.overlay.off("clicked",this.overlayClicked,this),this.tooltip.off("action clicked",this.actionClicked,this),this.tooltip.off("cancel clicked",this.cancelClicked,this)},overlayClicked:function(){this.hide(),h.find(this).trigger("outside clicked")},actionClicked:function(){this.hide(),h.find(this).trigger("action clicked")},cancelClicked:function(){this.hide(),h.find(this).trigger("cancel clicked")},hide:function(){this.overlay.trigger("hide"),this.tooltip.trigger("hide"),this.doDisconnects()},destroy:function(){this.hide()}},i)),h.define("C.common.crosspromo.overlay",{inputs:{render:{payload:{opacity:"float",zIndex:"integer",gap:{el:"HTMLElement",top:"number",left:"number",width:"number",height:"number"},parentEl:"HTMLElement",blockScroll:"bool"}},hide:{payload:null}},outputs:{clicked:{payload:null}},singleton:!0,immuneToDestroyAll:!0},((n=function(){t.apply(this,arguments)}).prototype={bind:["onClick","locateGapOverTarget"],zIndexDefault:1500,gapShadowWidth:10,template:'<div class="content"><div class="gap"></div></div>',initialize:function(){this.bodyOverflow=null,this.gapTarget=null,this.gapElement=null,h.find(this).on("destroy",this.destroy).on("render",this.render).on("hide",this.hide)},render:function(t,e){this.needScrollBlock=void 0===e.blockScroll||!!e.blockScroll,this.blockScroll(),this.el.innerHTML=this.template,this.el.style.zIndex=void 0!==e.zIndex?e.zIndex:this.zIndexDefault,void 0!==e.opacity&&(this.el.getElementsByClassName("content")[0].style.opacity=e.opacity),e.gap?this.setupGap(e.gap):this.setupNoGap(),(d.getElement(e.parentEl)||document.body).appendChild(this.el),this.el.addEventListener("click",this.bound.onClick)},setupNoGap:function(){d.removeElement(this.gapElement),this.gapElement=null},setupGap:function(t){this.gapElement=this.el.getElementsByClassName("gap")[0],this.gapElement.style.width=(parseFloat(t.width)||0+2*this.gapShadowWidth)+"px",this.gapElement.style.height=(parseFloat(t.height)||0+2*this.gapShadowWidth)+"px",t.el?(this.gapTarget=d.getElement(t.el)?d.getElement(t.el):d.getClassElement(t.el)[0],this.gapTarget?(this.addWindowEvents(),this.locateGapOverTarget()):this.setupNoGap()):this.setGapPos(parseFloat(t.left),parseFloat(t.top))},locateGapOverTarget:function(){var t=d.getOffset(this.gapTarget,!0),e=t.left,i=t.top;e+=d.getWidth(this.gapTarget)/2,i+=d.getHeight(this.gapTarget)/2,this.setGapPos(e,i)},setGapPos:function(t,e){this.gapElement.style.left=t+"px",this.gapElement.style.top=e+"px"},addWindowEvents:function(){window.addEventListener("resize",this.bound.locateGapOverTarget),window.addEventListener("scroll",this.bound.locateGapOverTarget)},removeWindowEvents:function(){window.removeEventListener("resize",this.bound.locateGapOverTarget),window.removeEventListener("scroll",this.bound.locateGapOverTarget)},hide:function(){this.removeWindowEvents(),this.unblockScroll(),d.removeElement(this.el)},blockScroll:function(){this.needScrollBlock&&null===this.bodyOverflow&&(this.bodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden")},unblockScroll:function(){this.needScrollBlock&&null!==this.bodyOverflow&&(document.body.style.overflow=this.bodyOverflow||"visible",this.bodyOverflow=null)},onClick:function(){h.find(this).trigger("clicked")},destroy:function(){this.hide()}},n)),h.define("C.common.crosspromo.fullPageInterrupt",{inputs:{render:{payload:{statusMessage:"string",icon:"string",bodyBg:"string",bodyPlain:"bool",title:"string",subTitle:"string",body:"string",image:"string",action:"string",actionText:"string",actionType:"string",legaleseText:"string",cancelText:"string",parentEl:"string",bodyImg:"string",titleInverse:"bool",bodyInverse:"bool",actionColor:"bool",inline:"bool"}}},outputs:{"action clicked":{payload:null},"cancel clicked":{payload:null}},singleton:!0,immuneToDestroyAll:!0},((s=function(){t.apply(this,arguments)}).prototype={bind:["onOK","onCancel"],classnames:"",template:'<div class="fullPage"><div class="tempHeader"><div class="chg-hdr-content-temp"><a class="chg-logo-temp" href="/">Chegg</a></div></div><div class="fullContent"><div class="statusOverall"><div class="icon"><img src=""></div><div class="status"> </div></div><div class = "promo"><div class="imageContainer"><div class="image"><img src=""></div></div><div class="textPassage"><div class="title"></div><div class="sub-title"></div><div class="content"></div><div class="buttons"><div class="cancel"><a href="#">No, thanks</a></div><div class="CTA"><div class="action"><button>Show me</button></div><div class="sub-text"></div></div></div></div></div></div></div>',templateWeb:'<div class="fullPage"><div class="tempHeader"><div class="chg-hdr-content-temp"><a class="chg-logo-temp" href="/">Chegg</a></div></div><div class="fullContent"><div class="statusOverall"><div class="icon"><img src=""></div><div class="status"> </div></div><div class="promo"><div class="title"></div><div class="image"><img src=""></div><div class="sub-title"></div><div class="content"></div><div class="action"><button>Show me</button></div><div class="sub-text"></div><div class="cancel"><a href="#">No, thanks</a></div></div></div></div>',initialize:function(){h.find(this).on("render",this.render).on("destroy",this.destroy).on("hide",this.hide)},render:function(t,e){var i;if((void 0!==e.mobile?e.mobile:d.isMobile())?(this.el.innerHTML=this.templateWeb,this.classnames+="mobile"):this.el.innerHTML=this.template,e.inline&&(this.classnames+="inline"),this.classnames&&d.addClass(this.el,this.classnames),this.el.style.zIndex=1501,e.bodyBg||e.bodyImg){var n=this.el.getElementsByClassName("promo")[0];e.bodyImg?(n.style.backgroundImage="url('"+e.bodyImg+"')",n.style.backgroundRepeat="no-repeat"):n.style.backgroundColor=e.bodyBg,this.el.getElementsByClassName("promo")[0]=n}e.statusMessage&&(this.el.getElementsByClassName("status")[0].innerHTML=d.escapeHtml(e.statusMessage)),e.icon&&("check"==e.icon?this.el.getElementsByClassName("icon")[0].getElementsByTagName("img")[0].src=C.global.assetUrl+"icons/success-large.png":this.el.getElementsByClassName("icon")[0].getElementsByTagName("img")[0].src=C.global.assetUrl+"icons/info-large.png"),(e.statusMessage||e.icon)&&(this.el.getElementsByClassName("statusOverall")[0].className="statusOverallFilled",this.el.getElementsByClassName("status")[0].className="statusFilled",this.el.getElementsByClassName("icon")[0].className="iconFilled");var s=this.el.getElementsByClassName("title")[0];s.innerHTML=d.escapeHtml(e.title);var o=this.el.getElementsByClassName("sub-title")[0];o.innerHTML=d.escapeHtml(e.subTitle);var r=this.el.getElementsByClassName("content")[0],a=e.body||"";e.bodyPlain&&(a=d.escapeHtml(a)),r.innerHTML=a,this.el.getElementsByClassName("image")[0].getElementsByTagName("img")[0].src=e.image,this.actionURL=e.action,this.actionType=e.actionType;var l=this.el.getElementsByClassName("action")[0].getElementsByTagName("button")[0];e.actionText&&(l.innerHTML=d.escapeHtml(e.actionText)),l.addEventListener("click",this.bound.onOK);var c=this.el.getElementsByClassName("cancel")[0].getElementsByTagName("a")[0];e.cancelText&&(c.innerHTML=d.escapeHtml(e.cancelText)),c.addEventListener("click",this.bound.onCancel);var u=this.el.getElementsByClassName("sub-text")[0];u.innerHTML=e.legaleseText,e.titleInverse&&(d.addClass(s,"inverse"),d.addClass(o,"inverse"),d.addClass(u,"inverse")),e.bodyInverse&&d.addClass(r,"inverse"),e.actionColor||(d.addClass(c,"inverse"),d.addClass(l,"inverseButton")),(d.getElement(e.parentEl)||document.body).appendChild(this.el)},onOK:function(t){var e;if(this.actionURL)switch(("string"==typeof this.actionType&&this.actionType||"").toLowerCase()){case"ajax":d.ajax({url:this.actionURL});break;default:window.location=this.actionURL}h.find(this).trigger("action clicked")},onCancel:function(t){t.preventDefault(),this.hide(),h.find(this).trigger("cancel clicked")},hide:function(){this.classnames&&(d.removeClass(this.el,this.classnames),this.classnames=""),d.removeElement(this.el)},destroy:function(){this.hide()}},s)),h.define("C.common.crosspromo.tooltip",{inputs:{render:{payload:{title:"string",subTitle:"string",action:"string",image:"string",actionText:"string",actionType:"string",cancelText:"string",zIndex:"integer",position:{top:"number",left:"number"},caret:"string",parentEl:"HTMLElement",tutorsBypass:"bool"}},hide:{payload:null}},outputs:{"action clicked":{payload:null},"cancel clicked":{payload:null}},singleton:!0,immuneToDestroyAll:!0},((o=function(){t.apply(this,arguments)}).prototype={bind:["onOK","onCancel"],zIndexDefault:1501,defaultWidth:540,defaultHeight:540,template:'<div class="content"><div class="title"></div><div class="sub-title"></div><div class="image"><img src=""></div><div class="action"><button>Show me</button></div><div class="cancel"><a href="#">No, thanks</a></div><div class="caret"></div></div>',initialize:function(){h.find(this).on("destroy",this.destroy).on("render",this.render).on("hide",this.hide)},render:function(t,e){if(this.gapTarget=d.getClassElement("gap")[0],this.parentEl=d.getElement(e.parentEl)?d.getElement(e.parentEl):d.getClassElement(e.parentEl)[0],e.tutorsBypass){var i=d.getOffset(this.gapTarget,!0);window.scrollBy(0,i.top-300)}this.el.innerHTML=this.template,this.el.style.zIndex=void 0!==e.zIndex?e.zIndex:this.zIndexDefault;var n=this.el.getElementsByClassName("content")[0];"fit_to_content"!==e.contentSizeType&&(e.contentSizeType.width&&(n.style.width=e.contentSizeType.width),e.contentSizeType.height&&(n.style.height=e.contentSizeType.height));var s=d.getOffset(this.parentEl,!0),o=s.left,r=s.top;e.position={left:o,top:r},e.position=this.positionTooltip(this.parentEl,e.position,n,this.gapTarget,e.tutorsBypass),e.position?(n.style.left=(parseFloat(e.position.left)||0)+"px",n.style.top=(parseFloat(e.position.top)||0)+"px"):d.addClass(n,"center"),e.caret&&d.addClass(n,"caret-"+e.caret),this.el.getElementsByClassName("title")[0].innerHTML=d.escapeHtml(e.title||""),this.el.getElementsByClassName("sub-title")[0].innerHTML=d.escapeHtml(e.subTitle||""),e.image&&(this.el.getElementsByClassName("image")[0].getElementsByTagName("img")[0].src=e.image.replace(/^https?:/i,"")),this.actionURL=e.action,this.actionType=e.actionType;var a=this.el.getElementsByClassName("action")[0].getElementsByTagName("button")[0];e.actionText&&(a.innerHTML=d.escapeHtml(e.actionText)),a.addEventListener("click",this.bound.onOK);var l=this.el.getElementsByClassName("cancel")[0].getElementsByTagName("a")[0];e.cancelText&&(l.innerHTML=d.escapeHtml(e.cancelText)),l.addEventListener("click",this.bound.onCancel),(d.getElement(e.parentEl)||document.body).appendChild(this.el)},positionTooltip:function(t,e,i,n,s){var o=e.left,r=e.top,a;if(s)return e.left=o-d.getWidth(i),e.top=r-d.getHeight(i)/2,d.addClass(i,"caret-right"),(a=d.getClassElement("caret")[0]).style.postion="absolute",a.style.top="65px",e;if(this.defaultHeight<=r)e.top=r-this.defaultHeight,d.addClass(i,"caret-bottom");else if(this.defaultWidth<document.documentElement.clientWidth-(o+d.getWidth(t))){var a;e.left=o+d.getWidth(t),d.addClass(i,"caret-left"),(a=d.getClassElement("caret")[0]).style.postion="absolute",a.style.top=d.getHeight(i)/-2+d.getHeight(n)/2+"px"}else if(this.defaultHeight<document.documentElement.clientHeight-(r+d.getHeight(t)))e.top=r+d.getHeight(t),d.addClass(i,"caret-top");else if(this.defaultWidth<=o){var a;e.left=o-this.defaultWidth,d.addClass(i,"caret-right"),(a=d.getClassElement("caret")[0]).style.postion="absolute",a.style.top=d.getHeight(i)/-2+d.getHeight(n)/2+"px"}return e},hide:function(){d.removeElement(this.el)},onOK:function(t){var e;if(this.actionURL)switch(("string"==typeof this.actionType&&this.actionType||"").toLowerCase()){case"ajax":d.ajax({url:this.actionURL});break;default:window.location=this.actionURL}h.find(this).trigger("action clicked")},onCancel:function(t){t.preventDefault(),h.find(this).trigger("cancel clicked")},destroy:function(){this.hide()}},o)),h.define("C.common.crosspromo.popup",{inputs:{render:{payload:{title:"string",subTitle:"string",body:"string",action:"string",image:"string",titleInverse:"bool",titleBg:"string",subTitleInverse:"bool",bodyPlain:"bool",bodyInverse:"bool",bodyBg:"string",bodyImg:"string",actionText:"string",actionType:"string",actionColor:"string",cancelText:"string",cancelColor:"string",legaleseText:"string",zIndex:"integer",inline:"bool",customClassname:"string",parentEl:"HTMLElement",overlay:"object"}},hide:{payload:null}},outputs:{"action clicked":{payload:null},"cancel clicked":{payload:null},"close clicked":{payload:null},"overlay clicked":{payload:null}},singleton:!0,immuneToDestroyAll:!0},((r=function(){t.apply(this,arguments)}).prototype={zIndexDefault:1501,classnames:"",template:'<div class="content"><div class="body"><div class="title"></div><div class="sub-title"></div><div class="image"><img src=""></div><div class="text"></div></div><div class="footer"><div class="cancel"><span>Cancel</span></div><div class="button"><button>Continue</button><div class="legalese"></div></div></div><div class="close"></div></div>',initialize:function(){h.find(this).on("destroy",this.destroy).on("render",this.render).on("hide",this.hide)},render:function(t,e){var i=void 0!==e.mobile?!!e.mobile:d.isMobile();void 0===e.overlay&&(e.overlay={}),e.inline&&(e.overlay=!1),e.overlay&&(this.overlay=h.create("C.common.crosspromo.overlay").trigger("render","object"==typeof e.overlay?e.overlay:{}),this.overlayAutohide=void 0===e.overlay.autoHide||!!e.overlay.autoHide),i&&(this.classnames+=" mobile"),e.inline&&(this.classnames+=" inline"),e.customClassname&&(this.classnames+=" "+e.customClassname),this.classnames&&d.addClass(this.el,this.classnames),this.el.innerHTML=this.template,this.el.style.zIndex=void 0!==e.zIndex?e.zIndex:e.inline?"auto":this.zIndexDefault;var n=this.el.getElementsByClassName("title")[0];n.innerHTML=e.title,e.titleInverse&&d.addClass(n,"inverse"),e.titleBg&&(n.style.background=e.titleBg,d.addClass(n,"bg"));var s=this.el.getElementsByClassName("sub-title")[0];s.innerHTML=e.subTitle,e.subTitleInverse&&d.addClass(s,"inverse");var o=this.el.getElementsByClassName("text")[0],r=e.body||"";e.bodyPlain&&(r=d.escapeHtml(r)),o.innerHTML=r,e.bodyInverse&&d.addClass(o,"inverse");var a=this.el.getElementsByClassName("body")[0];e.bodyImg?a.style.backgroundImage="url("+e.bodyImg.replace(/^https?:/i,"")+")":e.bodyBg&&(a.style.background=e.bodyBg);var l=this.el.getElementsByClassName("image")[0].getElementsByTagName("img")[0];e.image?l.src=e.image.replace(/^https?:/i,""):d.removeElement(l),this.actionURL=e.action,this.actionType=e.actionType;var c=this.el.getElementsByClassName("button")[0].getElementsByTagName("button")[0];e.actionText&&(c.innerHTML=d.escapeHtml(e.actionText)),e.actionColor&&(c.style.backgroundColor=e.actionColor),c.addEventListener("click",this.bound("onOK"));var u=this.el.getElementsByClassName("cancel")[0].getElementsByTagName("span")[0];e.cancelText&&(u.innerHTML=d.escapeHtml(e.cancelText)),e.cancelColor&&(u.style.color=e.cancelColor),u.addEventListener("click",this.bound("onCancel")),e.legaleseText&&(legalese.innerHTML=e.legaleseText),this.el.getElementsByClassName("close")[0].addEventListener("click",this.bound("onClose")),(d.getElement(e.parentEl)||document.body).appendChild(this.el),this.doConnects()},doConnects:function(){this.overlay&&this.overlay.on("clicked",this.overlayClicked,this)},doDisconnects:function(){this.overlay&&(this.overlay.off("clicked",this.overlayClicked,this),this.overlay=null)},overlayClicked:function(){this.overlayAutohide&&this.hide(),h.find(this).trigger("overlay clicked")},hide:function(){this.classnames&&d.removeClass(this.el,this.classnames),this.classnames="",d.removeElement(this.el),this.overlay&&this.overlay.trigger("hide"),this.doDisconnects()},onOK:function(t){var e;if(this.actionURL)switch(("string"==typeof this.actionType&&this.actionType||"").toLowerCase()){case"ajax":d.ajax({url:this.actionURL});break;default:window.location=this.actionURL}h.find(this).trigger("action clicked")},onCancel:function(t){this.hide(),h.find(this).trigger("cancel clicked"),t.preventDefault(),t.stopPropagation()},onClose:function(t){this.hide(),h.find(this).trigger("close clicked")},destroy:function(){this.hide()}},r))}};e(window.Eggshell),window.requirejs&&window.define&&define(function(){return e})}(),$(function(){var c=Eggshell.create("C.report.GA"),r=function(t,e,i,n){if(c.trigger("report custom event",{page:t,section:e,link:i}),n){var s=$(n.currentTarget).attr("href");if(s&&(n.stopImmediatePropagation(),Eggshell.find("C.global.header.rightsection.usermenu").trigger("hide menu"),Eggshell.find("C.global.header.searchbox").trigger("collapse search box")),s&&(0===s.indexOf("mailto:")||0===s.indexOf("//")||0===s.indexOf("#")||-1!==s.indexOf("/#"))){if(0===s.indexOf("#")&&0<$(s).length){var o,r=$(s).offset().top-60;window.location.replace(s),window.scrollTo(0,r),n.preventDefault()}return}!s||n.ctrlKey||n.metaKey||(n.preventDefault(),setTimeout((a=$(n.currentTarget),l=s,function(){if($(n.target).hasClass("chg-global-nav-home")||$(n.target).hasClass("chg-global-nav-list-section-home")?C.utility.openGlobalNav(animate=!0):$(n.target).hasClass("chg-logo")?$(n.target).next()&&$(n.target).next().hasClass("chg-menu")&&C.utility.openGlobalNav(animate=!0):C.utility.closeGlobalNav(animate=!0),null!=a.attr("data-noajax")){if(null!=a.attr("data-noredirect"))return;self.location=l}else C.utility.navigate(l)}),200))}var a,l};$(".chg-global-nav .track-nav-profile").on("click",function(t){r("SIHP","Menu","Profile",t)}),$(".chg-global-nav .track-nav-courses").on("click",function(t){r("SIHP","Menu","Courses",t)}),$(".chg-global-nav .track-nav-qna").on("click",function(t){r("SIHP","Menu","Q&A",t)}),$(".chg-global-nav .track-nav-solutions").on("click",function(t){r("SIHP","Menu","Solutions",t)}),$(".chg-global-nav .track-nav-books").on("click",function(t){r("SIHP","Menu","Books",t)}),$(".chg-global-nav .track-nav-scholarships").on("click",function(t){r("SIHP","Menu","Scholarships",t)}),$(".chg-global-nav .track-nav-internship").on("click",function(t){r("SIHP","Menu","Internships",t)}),$(".chg-global-nav .track-career-center").on("click",function(t){r("SIHP","Menu","Career Center",t)}),$(".chg-global-nav .track-nav-freshmen").on("click",function(t){r("SIHP","Menu","Freshmen",t)}),$(".chg-global-nav .track-nav-live-tutors").on("click",function(t){r("SIHP","Menu","Live Tutors",t)}),$(".chg-global-nav .track-nav-admission").on("click",function(t){r("SIHP","Menu","Admissions",t)}),$(".chg-global-nav .track-nav-deal-center").on("click",function(t){r("SIHP","Menu","Deal Center",t)}),$(".chg-global-nav .track-nav-online-courses").on("click",function(t){r("SIHP","Menu","Online Courses",t)}),$(".chg-global-nav .track-nav-home").on("click",function(t){r("SIHP","Menu","Home",t)}),$(".chg-global-nav .track-nav-home-icon").on("click",function(t){r("SIHP","Menu","Home Icon",t)}),C.dom.$content.observe("click",".apple-store-btn",function(t){r("SIHP","App Promo","iOS",t)},this),C.dom.$content.observe("click",".google-play-btn",function(t){r("SIHP","App Promo","Android",t)},this),C.dom.$content.observe("click",".recent-books .sellbook",function(t){r("SIHP","Books & Solutions","Buyback",t)},this),C.dom.$content.observe("click",".recent-books li.track-instant",function(t){r("SIHP","Books & Solutions","Instant Access",t)},this),C.dom.$content.observe("click",".recent-books li.track-ebook",function(t){r("SIHP","Books & Solutions","eTextbook",t)},this),C.dom.$content.observe("click","li.solution",function(t){r("SIHP","Books & Solutions","TBS",t)},this),C.dom.$content.observe("click","li.potentialSolution",function(t){r("SIHP","Books & Solutions","Potential TBS",t)},this),C.dom.$content.observe("click","li.track-book",function(t){r("SIHP","Books & Solutions","Physical Book",t)},this),C.dom.$content.observe("click","a.track-see-all-books",function(t){r("SIHP","Books & Solutions","See All Books",t)},this),C.dom.$content.observe("click","div#courses .course.view",function(t){r("SIHP","Courses","Course",t)},this),C.dom.$content.observe("click","div#courses .course.add",function(t){r("SIHP","Courses","Add Course",t)},this),C.dom.$content.observe("click","a.see-all-courses",function(t){r("SIHP","Courses","See All Courses",t)},this),C.dom.$content.observe("click","#whats-next .track-view-order",function(t){r("SIHP","What's Next","View Order",t)},this),C.dom.$content.observe("click","#whats-next .track-early-return",function(t){r("SIHP","What's Next","Early Return",t)},this),C.dom.$content.observe("click","#whats-next .track-enter-school",function(t){r("SIHP","What's Next","Enter School",t)},this),C.dom.$content.observe("click","#whats-next .track-add-courses",function(t){r("SIHP","What's Next","Enter Courses",t)},this),C.dom.$content.observe("click","#whats-next .track-review-course",function(t){r("SIHP","What's Next","Review Course",t)},this),C.dom.$content.observe("click","#whats-next .track-scholarships",function(t){r("SIHP","What's Next","Scholarships",t)},this),C.dom.$content.observe("click","#whats-next .track-return-books",function(t){r("SIHP","What's Next","Return Books",t)},this),C.dom.$content.observe("click","a.track-find-tbs",function(t){r("SIHP","TBS and Q&A","Find Solutions",t)},this),C.dom.$content.observe("click",".tbs-row",function(t){r("SIHP","TBS and Q&A","TBS",t)},this),C.dom.$content.observe("click",".tbs-show-more",function(t){r("SIHP","TBS and Q&A","TBS Show More",t)},this),C.dom.$content.observe("click","a.track-ask",function(t){r("SIHP","TBS and Q&A","Ask a Question",t)},this),C.dom.$content.observe("click","a.track-answer",function(t){r("SIHP","TBS and Q&A","Answer Questions",t)},this),C.dom.$content.observe("click","a.track-my-questions",function(t){r("SIHP","TBS and Q&A","My Questions",t)},this),C.dom.$content.observe("click","a.track-my-answers",function(t){r("SIHP","TBS and Q&A","My Answers",t)},this),C.dom.$content.observe("click",".my-scholarships .scholarship",function(t){r("SIHP","Scholarships","Scholarship",t)},this),C.dom.$content.observe("click",".my-scholarships .more",function(t){r("SIHP","Scholarships","More Matches",t)},this),C.dom.$content.observe("click",".my-scholarships .see-all-scholarships",function(t){r("SIHP","Scholarships","See All Scholarships",t)},this);var t=C.global.userId;t&&""!=t?($("a.chg-global-nav-home").on("click",function(t){r("Header","House","Signed In",t)}),$("a.chg-logo").on("click",function(t){r("Header","Chegg Logo","Signed In",t)}),$("a.track-homework-help-signedin").on("click",function(t){r("Header","Homework Help","Signed In",t)}),$("a.chg-cart-area.chg-menu-item.track-cart").on("click",function(t){r("Header","Cart","Signed In",t)}),$("div.track-coupon").on("click",function(t){r("Header","Coupon","Signed In",t)}),C.dom.$header.observe("click",".chg-header-username",function(t){var e=t.currentTarget;$(e).hasClass("pop-active")||r("Header","Dropdown","Open Dropdown",t)},this),C.dom.$header.observe("click",".hdr-nav .track-my-account",function(t){r("Header","Dropdown","My Account",t)},this),C.dom.$header.observe("click",".hdr-nav .track-my-profile",function(t){r("Header","Dropdown","My Profile",t)},this),C.dom.$header.observe("click",".hdr-nav .track-user-avatar",function(t){console.log("coming here"),r("Header","Dropdown","User Avatar",t)},this),C.dom.$header.observe("click",".hdr-nav .track-track-books",function(t){r("Header","Dropdown","Track Books",t)},this),C.dom.$header.observe("click",".hdr-nav a.track-return-books",function(t){r("Header","Dropdown","Return Books",t)},this),C.dom.$header.observe("click",".hdr-nav a.track-extend",function(t){r("Header","Dropdown","Extend/Purchase",t)},this),C.dom.$header.observe("click",".hdr-nav a.track-sell-books",function(t){r("Header","Dropdown","Sell Books",t)},this),C.dom.$header.observe("click",".hdr-nav a.track-view-orders",function(t){r("Header","Dropdown","View Orders",t)},this),C.dom.$header.observe("click",".hdr-nav a.track-help",function(t){r("Header","Dropdown","Help",t)},this),C.dom.$header.observe("click",".hdr-nav a.track-signout",function(t){r("Header","Dropdown","Sign Out",t)},this)):($("a.chg-global-nav-home").on("click",function(t){r("Header","House","Signed Out",t)}),$("a.chg-logo").on("click",function(t){r("Header","Chegg Logo","Signed Out",t)}),$("a.track-homework-help-signedout").on("click",function(t){r("Header","Homework Help","Signed Out",t)}),$("a.chg-cart-area.chg-menu-item.track-cart").on("click",function(t){r("Header","Cart","Signed Out",t)}),$("div.track-coupon").on("click",function(t){r("Header","Coupon","Signed Out",t)}),$("a.track-signin").on("click",function(t){r("Header","Signed In","",t)}),C.dom.$header.observe("click",".chg-menu-item.chg-header-more",function(t){var e=t.currentTarget;$(e).hasClass("pop-active")||r("Header","More","Open Dropdown",t)},this),C.dom.$header.observe("click",".hdr-list .track-signup",function(t){r("Header","More","Sign Up",t)},this),C.dom.$header.observe("click",".hdr-list .track-selltextbooks",function(t){r("Header","More","Sell your books",t)},this),C.dom.$header.observe("click",".hdr-list .track-help",function(t){r("Header","More","Help",t)},this),C.dom.$header.observe("click",".hdr-list .track-returnbooks",function(t){r("Header","More","Return your books",t)},this)),$(".chg-footer .sell-textbooks").on("click",function(t){r("Footer","Help","Sell Textbooks",t)}),C.dom.$content.observe("click",".courseCollector .continue-btn-container .btn-continue",function(e){var t=$(e.currentTarget).closest(".courseCollector"),i=$(t).find("form.courses"),n;$(i).find("input[type=radio]").each(function(t){$(this).attr("checked")&&r("Post-Checkout","Course Collection","Added Courses",e)});var s=$(t).find("ul#otherCourseContainer"),o;1<=$(s).find("li").length&&r("Post-Checkout","Course Collection","Other Courses",e)},this)}),C("global"),C.global.cachedJS=[],C.global.pageObject={},C.global.instanceCounter=C.global.instanceCounter||0,C.global.pageCounter=C.global.pageCounter||0,C.global.adTargeting=C.global.adTargeting||{},$(function(){var t=function(){var t=Eggshell.find("C.common.advertisements");null==t.getId()&&(t=Eggshell.create("C.common.advertisements")),Eggshell.trigger(t,"render"),C.global.adsDebugging&&console.time("from render ads to slot render")};if(C.global.adsDebugging&&console.log("C.global.adsRenderEarlier",C.global.adsRenderEarlier),C.global.adsRenderEarlier&&t(),""!==C.global.userUuid){var e=Eggshell.create("C.global.tutors.embed").trigger("render");Eggshell.immuneToDestroyAll(e)}var i=Eggshell.create("C.common.crosspromo");Eggshell.immuneToDestroyAll(i),Eggshell.enableErrorHandling(!C.global.disableErrorhandling),setInterval(C.utility.updateCsrfToken,18e5);var b=[],y=0,w={},x=!1,k=!1,E=[],S=[],n,s=C.utility.showSpinner=function(){o(),C.dom.$content.stop().css({visibility:"hidden",opacity:0}),n=setTimeout(function(){$(".chg-global-content").append('<div class="chg-page-loading" style="display: none"><div class="chg-load"></div></div>'),$(".chg-page-loading").fadeIn()},0)},o=C.utility.hideSpinner=function(){clearTimeout(n),$(".chg-page-loading").remove(),C.dom.$content.stop().css("visibility","visible").animate({opacity:1})},r=function(t){var e=t.currentTarget.getAttribute("href");if(!e||0!==e.indexOf("mailto:")&&0!==e.indexOf("//")&&0!==e.indexOf("#")&&-1===e.indexOf("/#"))t.ctrlKey||t.metaKey||($(t.target).hasClass("chg-global-nav-home")||$(t.target).hasClass("chg-global-nav-list-section-home")?C.utility.openGlobalNav(animate=!0):$(t.target).hasClass("chg-logo")?$(t.target).next()&&$(t.target).next().hasClass("chg-menu")&&C.utility.openGlobalNav(animate=!0):C.utility.closeGlobalNav(animate=!0),t.preventDefault(),C.utility.navigate(e));else if(0===e.indexOf("#")&&0<$(e).length){var i,n=$(e).offset().top-60;window.location.replace(e),window.scrollTo(0,n),t.preventDefault()}},a=C.utility._handleRequest=function(t){C.dom.$html.find("*").off(".chg-page-widget"),History.getStateByIndex(-2)?C.logger.referrer_url=History.getStateByIndex(-2).url:C.logger.referrer_url=location.href,setTimeout(s,0),window.scrollTo(0,0),C.dom.$html.css("cursor","progress"),b.push($.ajax({type:"post",url:t,data:{orig_referrer:C.logger.referrer_url},dataType:"json",success:c,error:function(){C.log("Failed to load page: "+t),location.replace(t)}})),C.global.adTargeting={},C.utility.hideTower(),C.utility.profiler.reset(),C.global.navigationStart=(new Date).getTime(),"function"==typeof C.global.pageObject.destroy&&C.global.pageObject.destroy(),Eggshell.destroyAll();var e=Eggshell.create("C.eggshell.component.ajax.client");Eggshell.trigger(e,"flush all"),C.dom.$window.trigger("pageunload")},l=function(t){var e,i;void 0===C.global.adobe&&C("global.adobe"),C.global.adobe=t.adobeDataObject||{},C.global.adobe.pageType=t.pageType,(e=C.utility.access("adobe_track.pre",t))&&C.adobeAnalytics.track(e),t&&t.digitalData&&C.adobeAnalytics.setData(t.digitalData),(i=C.utility.access("adobe_track.post",t))&&C.adobeAnalytics.track(i),C.adobeAnalytics.track("pageView")},c=function(t,e,i){t.clusterPrefix?C.global.clusterPrefix=t.clusterPrefix:C.global.clusterPrefix="",C.support.touch||($(window).off("scroll"),$(window).scroll(function(){$(".chg-header, .chgg-hdr").css({left:-$(this).scrollLeft()})})),Eggshell.find("C.search.trackid").trigger("page refreshed"),C.global.headerAutosuggest&&!C.global.webConstellation?Eggshell.find(C.global.headerAutosuggest).trigger("disable all overrides").trigger("render",{ajaxEndpoint:"/_ajax/search/globallist",target:$(".chg-header .autosuggest-input-field"),filters:{type:"group"}}):Eggshell.find(C.global.headerAutosuggest).trigger("disable all overrides").trigger("render",{ajaxEndpoint:"/_ajax/search/globallist",target:$(".chgg-hdr .autosuggest-input-field"),filters:{type:"group"}});var n=Eggshell.find("C.global.coupon");n&&n.trigger("ajax page loaded");var s=window.location.pathname;if(-1!==s.indexOf("/test-prep")&&t.headerMarkup&&!C.global.webConstellation){$(".chg-hdr-v3").remove(),$(".chg-body").prepend(t.headerMarkup);var o=Eggshell.create("C.global.header").trigger("render");Eggshell.immuneToDestroyAll(o)}if(C.global.webConstellation){var r=!1,a=!1,l=!1,c=!1,u=!1,h=!1,d="home";"/"===s&&(r=c=l=!0),-1===s.indexOf("/books")&&-1===s.indexOf("/sell-textbooks")||(d="books",r=c=l=!0),-1===s.indexOf("/sell-textbooks/payment")&&-1===s.indexOf("/sell-textbooks/return")||(r=!1),-1===s.indexOf("/bookstore")&&-1===s.indexOf("/occp")&&-1===s.indexOf("/etextbooks")&&-1===s.indexOf("/shoppingcart")&&-1===s.indexOf("/used-textbooks")&&-1===s.indexOf("/cheap-textbooks")&&-1===s.indexOf("/college-textbooks")||(r=c=l=!(d="books")),-1!==s.indexOf("/search")&&-1===s.indexOf("/sell-textbooks/search")&&(c=l=!(h=!(r=!(d="home")))),-1!==s.indexOf("/textbooks")&&(c=l=!(d="books")),"/study"!==s&&-1===s.indexOf("/study/")||(d="study",r=c=l=!0),-1!==s.indexOf("/study/qa/post")&&(r=!1),-1===s.indexOf("/csorderconfirm")&&-1===s.indexOf("/my/expertqa")&&-1===s.indexOf("/homework-help")||(d="study"),-1!==s.indexOf("/tutoringpolicy")&&(d="tutors"),-1!==s.indexOf("/test-prep")&&(d="testprep",u=l=r=!0),-1===s.indexOf("/test-prep/pricing/")&&-1===s.indexOf("/test-prep/orderconfirmation")||(r=!1),-1===s.indexOf("/app/internships")&&-1===s.indexOf("/career-center")||(d="internships",r=u=l=!0),(-1!==s.indexOf("/career-center/explore/")&&"/career-center/explore/"!==s||-1!==s.indexOf("/career-center/advice/")&&"/career-center/advice/"!==s)&&(r=!1),-1===s.indexOf("/schools")&&-1===s.indexOf("/admissions")&&-1===s.indexOf("/scholarships")&&-1===s.indexOf("/majors")||(d="colleges",r=!(u=l=!0)),(-1!==s.indexOf("/auth")&&-1===s.indexOf("/author")||-1!==s.indexOf("/checkout")||-1!==s.indexOf("/guidedsolutions"))&&(r=!(a=!0)),a?window.globalChggHeader.trigger("hide user distractions"):window.globalChggHeader.trigger("show user distractions"),window.globalChggHeader.trigger("page refreshed"),window.globalChggHeader.trigger("update type",d),l?window.globalChggHeader.trigger("hide search box"):window.globalChggHeader.trigger("show search box"),window.globalChggHeader.trigger("set no search",u),window.globalChggHeader.trigger("set search on scroll",c),r?window.globalChggHeader.trigger("enable translucent background"):window.globalChggHeader.trigger("disable translucent background"),h?window.globalChggHeader.trigger("expand search"):window.globalChggHeader.trigger("collapse search")}else{var g;Eggshell.find("C.global.header").trigger("show user distractions").trigger("enable auto collapse of searchbox").trigger("collapse search box").trigger("page refreshed")}Eggshell.find("C.global.tutors.chat").trigger("page refreshed");var p=0;for(p=0;p<b.length&&b[p]!==i;p++);if(y<=p)if(y=p,(w=t).redirect||(!0===w.hasHiddenSearchBox?(C.global.webConstellation?Eggshell.find("C.global.cheggheader").trigger("hide search box"):Eggshell.find("C.global.header").trigger("hide search box"),C.global.hasHiddenSearchBox=!0):(C.global.webConstellation?Eggshell.find("C.global.cheggheader").trigger("show search box"):Eggshell.find("C.global.header").trigger("show search box"),C.global.hasHiddenSearchBox=!1)),C.global.domLoading=(new Date).getTime(),E[y]=0,S[y]=0,k=x=!1,void 0!==w.cssName&&$(".chg-content").attr("class","").addClass("chg-content "+w.cssName),C.logger.loadTime=w.loadTime,C.logger.pageTrackId=w.pageTrackId,C("global.cs"),w.redirect)C.utility.replace(w.redirect);else{for(var f in C.dom.$content.empty(),$('link[data-scope="content"]').each(function(){this.disabled=!0}),$("title").html(w.title),w.fixedWidth?C.dom.$container.addClass("no-resize"):C.dom.$container.removeClass("no-resize"),w.hiddenGlobalNav?$(".chg-body").addClass("no-nav"):$(".chg-body").removeClass("no-nav"),!w.nav||jQuery.isEmptyObject(w.nav)?$(".chg-body").addClass("no-subnav"):$(".chg-body").removeClass("no-subnav"),w.showViewMobileSiteButton&&L(),T(w.nav),E[y]+=w.css.length,S[y]+=w.js.length,_(),w.css){f=w.css[f];var m=y;N(f,function(){I("css",m)})}for(var v in w.js)!function(e,i){C.dom.$window.queue("chg-js-"+i,function(t){j(e,function(){I("js",i)})})}(v=w.js[v],y);$(function(){timer=setTimeout(function(){Eggshell.find("C.global.coupon").trigger("show coupon tooltip")},1e3)}),C.dom.$window.dequeue("chg-js-"+y)}},T=function(t){if(t&&!jQuery.isEmptyObject(t)){var e="",i="main";t.main.selected&&(i="main selected");var n=t.main.label,s;if(n&&20<n.length&&(n=n.substr(0,17)+"..."),n=C.utility.escapeHtml(n),e+='<a href="'+C.utility.escapeHtml(t.main.url)+'" class="'+i+'"><span class="nav-label">'+n+"</span></a> ",t.list)for(var o in t.list){var r,a,l;i="",(o=t.list[o]).selected&&(i="selected"),e+='<a href="'+C.utility.escapeHtml(o.url)+'" class="'+C.utility.escapeHtml(o.img)+" "+i+'"><span class="nav-label">'+C.utility.escapeHtml(o.label)+"</span></a> "}e='<div class="row"><div class="col-12 col-first col-last">'+e+"</div></div>",C.dom.$nav.html(e)}else C.dom.$nav.html("")},I=function(t,e){"css"==t?E[e]--:"js"==t&&(C.dom.$window.dequeue("chg-js-"+e),S[e]--),_()},_=function(){0==E[y]&&h(),0==S[y]&&0==E[y]&&d()},u={},N=function(t,e){var i,n,s;u[t]?(u[t][0].disabled=!1,e()):(s=$('<link id="css_'+t+'" rel="stylesheet" type="text/css" href="'+t+'" media="all" data-scope="content" />').appendTo(document.head),u[t]=s,n=setTimeout(function(){n=null,e()},1e3),(i=new Image).src=t,i.onerror=function(){n&&(clearTimeout(n),setTimeout(function(){e()},250))})},j=function(t,e){C.global.cachedJS[t]?e():C.utility.loadScript(t,function(){C.global.cachedJS[t]=!0,e()})},h=function(){x||(x=!0,C.dom.$content.html(w.html),setTimeout(o,0))},d=function(){k||(k=!0,C.utility.closeGlobalNav(animate=!1),C.global.domInteractive=(new Date).getTime(),w.init?($.globalEval("C.global.pageObject = "+w.init),"function"==typeof C.global.pageObject.postConstruct&&C.global.pageObject.postConstruct()):C.global.pageObject={},C.global.pageOnload(),C.dom.$html.css("cursor","auto"),window.navigateEvent||(window.navigateEvent=document.createEvent("Event"),window.navigateEvent.initEvent("navigatePage",!0,!0)),window.dispatchEvent(window.navigateEvent),l(w))};try{C.global.navigationStart=performance.timing.navigationStart,C.global.domLoading=performance.timing.domLoading,C.global.domInteractive=performance.timing.domInteractive,C.dom.$window.on("load",function(){setTimeout(function(){C.global.domComplete=performance.timing.domComplete},0)})}catch(t){C.global.navigationStart=0,C.global.domLoading=0,C.global.domInteractive=0,C.global.domComplete=0}C.global.pageOnload=function(){C.utility.reflowSubNav(),C.support.touch&&C.dom.$nav.css("position","absolute"),this.coupon=Eggshell.create("C.global.coupon",{el:$(".chg-hdr-coupon-area",this.$el)}),Eggshell.immuneToDestroyAll(this.coupon),C.utility.showCouponDialog=$.proxy(function(t,e,i){var n={title:t,disclaimer:e,code:i};this.trigger("open coupon dialog",n)},this.coupon),C.global.domComplete=(new Date).getTime(),C.utility.profiler.show(),C.utility.checkPollution(),C.global.adsRenderEarlier||t()},History.enabled&&C.global.ajaxPageLoading&&(C.dom.$body.observe("click.cheggNavigation","a:not([data-noajax]):not([href^=javascript]):not([target=_blank])",r,C.dom.$window),C.dom.$window.on("statechange",function(){a(History.getState().url)}),setTimeout(function(){C.dom.$body.unobserve("click.cheggNavigation",C.dom.$window)},18e5)),C.logger.referrer_url=document.referrer,C.dom.$window.observe("resize",C.utility.reflowSubNav,C.dom.$window),C.dom.$nav.observe("click","a",function(t){C.dom.$nav.find(".selected").removeClass("selected"),$(t.currentTarget).addClass("selected"),History.enabled||s()},C.dom.$window),$(".chg-banner").observe("click",function(){new C.widget.dialog({type:"ajax",content:"/_ajax/dialog/browserupgrade"})},C.dom.$window),C.support.touch?$(".chg-header, .chgg-hdr:not(.non-sticky)").addClass("chg-pos-absolute"):$(window).scroll(function(){$(".chg-header, .chgg-hdr").css({left:-$(this).scrollLeft()})}),C.dom.$body.observe("click",".chg-dialog-link",function(t){return t.preventDefault(),new C.widget.dialog({type:"ajax",content:t.currentTarget.href,fixed:!1}),!1},this);var L=function(){$(".C-eggshell-viewfullsite-button").length<1&&(this.viewFullSiteButtonNS=Eggshell.create("C.eggshell.viewfullsite.button",{el:$(".chg-container-content")}).getNs(),Eggshell.output(this.viewFullSiteButtonNS,"show"))};C.global.showViewMobileSiteButton&&L()}),$(function(){if(this.parseUrl=function(t){for(var e=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],i,n=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),s={},o=14,r=!1;o--;)n[o]&&(s[e[o]]=n[o]);if(s.path){var a=s.path.split("/");"_ajax"===(s.splits=a)[1]&&(r=!0)}return s.isAjax=r,s},$.ajaxPrefilter($.proxy(function(t){if("jsonp"!==t.dataType){var e=this.parseUrl(t.url),i=C.global.clusterPrefix;if(e.isAjax&&i&&""!==i){var n="";e.scheme&&e.host&&(n=e.scheme+"://"+e.host),n+="/"+i+e.path,e.query&&(n+="?"+e.query),t.url=n}}},this)),$("document").ready(function(){$.each($("[data-img-src]"),function(t,e){var e,i=(e=$(e)).attr("data-img-src");e.attr("src",i),e.removeAttr("data-img-src")})}),!C.utility.getCookie("OptanonAlertBoxClosed")){var i=Date.now(),n=C.dom&&C.dom.$body||$("body");!function t(){var e=window.Optanon&&n.children(".optanon-alert-box-wrapper");e&&e.length?(e.is(":visible")&&C.logger.doSessionLog({cookieconsent_banner_shown:1}),$(".optanon-alert-box-close",e).on("click",function(){C.logger.doSessionLog({cookieconsent_banner_close:1})}),$(".cookie-settings-button",e).on("click",function(){C.logger.doSessionLog({cookieconsent_banner_setting:1})}),$('.optanon-alert-box-body a[href*="cookienotice"]',e).on("click",function(t){t.preventDefault();var e=event.currentTarget.getAttribute("href");C.logger.doSessionLog({cookieconsent_banner_notice:1},function(){C.utility.navigate(e)},null,300)})):Date.now()-i<6e4&&setTimeout(t,300)}()}}),Eggshell.define("C.global.tutors.embed",{inputs:["render"],output:["rendered"]},function(t){function e(t,e){var i="1",n,m,v,s,o,l;return e&&(e+=(/\?/.test(e)?"&":"?")+"lv=1"),c[t]||(n=window,m=document,v=t,s=m.location.protocol,o="load",l=0,function(){function t(){p.P(o),p.w=1,c[v]("_load")}c[v]=function(){function r(){return r.id=a,c[v].apply(r,arguments)}var t=arguments,e=this,a=++l,i=e&&e!=n&&e.id||0;return(p.s=p.s||[]).push([a,i,t]),r.then=function(t,e,i){var n=p.fh[a]=p.fh[a]||[],s=p.eh[a]=p.eh[a]||[],o=p.ph[a]=p.ph[a]||[];return t&&n.push(t),e&&s.push(e),i&&o.push(i),r},r};var p=c[v]._={};p.fh={},p.eh={},p.ph={},p.l=e?e.replace(/^\/\//,("https:"==s?s:"http:")+"//"):e,p.p={0:+new Date},p.P=function(t){p.p[t]=new Date-p.p[0]},p.w&&t(),n.addEventListener?n.addEventListener(o,t,!1):n.attachEvent("onload",t);var f=function(){function e(){return["<head></head><",t,' onload="var d=',u,";d.getElementsByTagName('head')[0].",s,"(d.",o,"('script')).",r,"='",p.l,"'\"></",t,">"].join("")}var t="body",i=m[t];if(!i)return setTimeout(f,100);p.P(1);var n,s="appendChild",o="createElement",r="src",a=m[o]("div"),l=a[s](m[o]("div")),c=m[o]("iframe"),u="document",h="domain",d="contentWindow";a.style.visibility="hidden",a.style.height="0px",i.insertBefore(a,i.firstChild).id=b+"-"+v,c.frameBorder="0",c.id=b+"-frame-"+v,/MSIE[ ]+6/.test(navigator.userAgent)&&(c[r]="javascript:false"),c.allowTransparency="true",l[s](c);try{c[d][u].open()}catch(t){p[h]=m[h],n="javascript:var d="+u+".open();d.domain='"+m.domain+"';",c[r]=n+"void(0);"}try{var g=c[d][u];g.write(e()),g.close()}catch(t){c[r]=n+'d.write("'+e().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}p.P(2)};p.l&&f()}()),c[t].lv="1",c[t]}var c,b,i;window.lightningjs||(c={},b="lightningjs",(i=window[b]=e(b)).require=e,i.modules=c);var n=C.global.tutorsCdnUrl||"/tutors/",s=window.lightningjs.require("embed",n+"publish/static/js/embed.js");this.render=function(){s("config",{uid:C.global.userUuid,CHEGG_UUID_CHECKSUM:C.global.uuidChecksum,CSS_URL:n+"publish/static/css/embed-chegg.css"}),s("on",{redirect:function(t){window.location.href=t}});var t=Eggshell.create("C.global.tutors.chat").trigger("render");Eggshell.immuneToDestroyAll(t)},this.setListeners=function(){Eggshell.find(this).on("render",this.render)},this.initialize=function(){C.global.instaEdu&&this.setListeners()},this.initialize()}),Eggshell.define("C.global.tutors.chat",{inputs:["render","page refreshed","toggle chat list","auth loaded"],output:["rendered"]},function(t){var e=$("<div class='embed-js' id='chat-component'></div>");$("body").append(e);var i=window.lightningjs.require("chat"),n=new RegExp(["^[/]login","^[/]auth"].join("|")),s=!1,o=function(){if(!s){var t=Eggshell.find("C.common.auth");t.getId()&&(t.trigger("disable redirect",!0).on("authentication successful",l),s=!0)}},r=function(){return!!n.test(window.location.pathname)&&(i("hasDeferred",function(t){t&&o()}),i("minimizeWindows"),!0)},a=function(){"/signout"===window.location.pathname&&(C.utility.setCookie("sessionid","",-1),i("signOut"))},l=function(){i("deferFinish",function(){Eggshell.find("C.common.auth").trigger("do redirect")})},c=function(t,e){i("deferSave",t,e,function(){C.utility.navigate("/auth")})};this.authLoaded=function(){r()},this.start=function(){a(),r(),i("onChegg",{"sign-up":function(t){c("queueMessage",t)},"sign-up:meet-now":function(t){c("saveMeetNow",t)}}),i("start")},this.render=function(){i("render",e[0],{OMNIBAR_MINIMIZE:!0}),this.start()},this.pageRefreshed=function(){a(),r()||C.global.userUuid||i("deferSave",null),i("hideOmnibar")},this.toggleChatList=function(t,e){i("toggleOmnibar",!!e)},this.setListeners=function(){Eggshell.find(this).on("render",this.render).on("toggle chat list",this.toggleChatList).on("page refreshed",this.pageRefreshed).on("auth loaded",this.authLoaded)},this.initialize=function(){C.global.instaEdu&&this.setListeners()},this.initialize()}),function(t){var e;chggClickFocusTracked=!0;var i=function(t){e="mousedown"===t.type},n=function(t){e&&t.target.classList.add("focus--mouse")},s=function(t){t.target.classList.remove("focus--mouse")},o;(function(){t.addEventListener("keydown",i),t.addEventListener("mousedown",i),t.addEventListener("focusin",n),t.addEventListener("focusout",s)})()}(document.body),Eggshell.define("C.common.message",{inputs:["set type","set size","set header","set body","set call to action link","enable close button","scrollOnShow"],outputs:["call to action link clicked","close button clicked"]},C.View.extend({initialize:function(){this.model=new C.Model({type:"information",size:"lg",header:"",body:"",linkText:"",linkUrl:"",closeButton:!1,scrollOnShow:!1,dismissAnimation:"slideUp"}),this.model.on("change",this.render,this),Eggshell.find(this).on("set type",this.setType).on("set size",this.setSize).on("set header",this.setHeader).on("set body",this.setBody).on("set call to action link",this.setLink).on("enable close button",this.enableCloseButton).on("scrollOnShow",this.setScrollOnShow).on("set dismiss animation",this.setDismissAnimation).on("destroy dom on dismiss",this.destroyDomOnDismiss).on("auto dismiss duration",this.enableAutoDismiss).on("add css classes",this.addCssClasses)},setType:function(t,e){if("information"!=e&&"error"!=e&&"success"!=e&&"important"!=e&&"custom"!=e)throw"Invalid message type.";e="information"==e?"info":e,this.model.set("type",e)},setSize:function(t,e){if("large"!=e&&"small"!=e)throw"Invalid message size.";this.model.set("size","large"==e?"lg":"sm")},setHeader:function(t,e){if(!e||"string"!=typeof e)throw"Invalid message header.";this.model.set("header",e)},setBody:function(t,e){if(!e||"string"!=typeof e)throw"Invalid message body.";this.model.set("body",e)},setLink:function(t,e){if(!e||!e.text||"string"!=typeof e.text)throw"Invalid link text.";if(!e||!e.url||"string"!=typeof e.url)throw"Invalid link URL.";this.model.set("linkText",e.text),this.model.set("linkUrl",e.url)},enableCloseButton:function(t,e){if("boolean"!=typeof e)throw"Invalid close button flag.";this.model.set("closeButton",e)},setScrollOnShow:function(t,e){if("boolean"!=typeof e)throw"Invalid close button flag.";this.model.set("scrollOnShow",e),this.model.get("scrollOnShow")?Eggshell.find(this).on("show",function(){this.$el.show(),C.utility.isIE()?window.scroll(0,0):$("body").animate({scrollTop:"0px"},300)}):Eggshell.find(this).on("show",function(){this.$el.show()})},setDismissAnimation:function(t,e){if("string"!=typeof e)throw"payload is not string.";this.model.set("dismissAnimation",e)},destroyDomOnDismiss:function(){Eggshell.find(this).on("element disappeared",function(){this.$el.remove()}.bind(this))},enableAutoDismiss:function(t,e){var i=this;if("number"!=typeof e)throw"payload is not a number";void 0===e&&(e=5e3),window.setTimeout(function(){i.setUpAnimationOnDismiss()},e)},addCssClasses:function(t,e){if("string"!=typeof e)throw"Payload needs to be string";this.$el.addClass(e)},render:function(){var t=this.model.get("body")||this.model.get("linkUrl")?"":"msg-header-only";return this.$el.empty().html(this.template($.extend(this.model.toJSON(),{headerClass:t}))),this.model.get("linkUrl")||this.$("a.message-call-to-action").remove(),this.model.get("header")&&"sm"!=this.model.get("size")||this.$(".msg-header").remove(),this.model.get("closeButton")||this.$(".msg-close").remove(),this},template:_.template('<div class="msg-<%- type %>-<%- size %>">\t<div class="msg-icon">\t\t<div class="msg-header <%- headerClass %>"><%= header %></div>\t\t<div class="msg-text"><%= body %>\t\t\t<a class="message-call-to-action" href="<%- linkUrl %>"><%= linkText %></a> \t\t\t<span class="msg-close"></span>\t\t</div>\t</div></div>'),events:{"click a.message-call-to-action":"handleLinkOnClicked","click .msg-close":"closeMessage"},handleLinkOnClicked:function(t){Eggshell.find(this).trigger("call to action link clicked")},closeMessage:function(t){this.setUpAnimationOnDismiss(),Eggshell.find(this).trigger("close button clicked")},setUpAnimationOnDismiss:function(){var t=this,e;switch(this.model.get("dismissAnimation")){case"slideUp":this.$el.slideUp("fast",function(){Eggshell.find(t).trigger("element disappeared")});break;case"fadeOut":t.$el.addClass("msg-fade-out").on("transitionend",function(){Eggshell.find(t).trigger("element disappeared")})}}})),Eggshell.define("C.global.coupon",{inputs:{render:{payload:null},"open coupon dialog":{payload:null},"apply coupon":{payload:null},"apply coupon and open coupon dialog":{payload:"string"},"show coupon tooltip":{payload:null},"refresh coupon":{payload:null},"apply headline button clicked":{payload:null},"apply coupon headline on checkout":{payload:null},"apply coupon on headline click":{payload:null},"get coupon status":{payload:null},"ajax page loaded":{payload:null},"fire data is loaded":{payload:null}},outputs:{"active coupon":{payload:null},"applied coupon successfully":{cpnCode:null},"failed to apply coupon":{payload:null},"data is loaded":{couponNode:null}},newNode:!1,singleton:!0,strict:!0},function(){var t=Backbone.Model.extend({initialize:function(){},fetchCoupon:function(t){$.ajax({url:"/_ajax/global/coupon/get",type:"post",dataType:"json",context:this,success:$.proxy(function(t){t.id&&(this.set("couponNode",t),this.trigger("loaded"))},this),error:function(t){}})},addCoupon:function(i,n){$.ajax({url:"/_ajax/global/coupon/apply",type:"get",data:{cp:i,token:C.global.csrfToken},context:this,success:function(t){if(t.id&&null!=t.id){var e=digitalData.page.category.subCategory2||"core";if(digitalData={},C.adobeAnalytics.setData("page",{pageInfo:{pageType:"promotion",pageName:"coupon modal",pageNameDetailed:i},category:{primaryCategory:"Chegg",subCategory1:"Web",subCategory2:e}}),C.adobeAnalytics.track("pageView"),n)return this.set("couponNode",t),this.trigger("couponApplied"),void this.trigger("coupon",t);this.set("couponNode",t),this.trigger("couponApplied")}},error:function(t){}})}}),e;return Backbone.View.extend({initialize:function(){var e=this;this.sessionLogger=Eggshell.create("C.common.log"),Eggshell.immuneToDestroyAll(this.sessionLogger),this.model=new t,this.model.on("loaded",this.render,this),this.model.on("couponApplied",this.handleCouponApplied,this),this.model.fetchCoupon(),this.openAppliedCouponInDialog=!1,Eggshell.find(this).on("refresh coupon",function(t,e){this.model.fetchCoupon()}).on("show coupon tooltip",this.createCpnHeadline).on("open coupon dialog",this.openCouponDialogBox).on("get coupon status",this.checkStatus).on("apply coupon",this.applyCoupon).on("apply coupon and open coupon dialog",function(t,e){this.openAppliedCouponInDialog=!0,this.model.addCoupon(e)}).on("apply coupon on headline click",function(t,e){this.model.set("applyOnHeadlineClick",!1!==e)}).on("ajax page loaded",function(){this.dialog&&(this.dialog.destroy(),this.dialog=null)}).on("fire data is loaded",function(){var t=e.model.get("couponNode");t&&Eggshell.find(e).trigger("data is loaded",{couponNode:t})})},handleCouponApplied:function(){this.openAppliedCouponInDialog&&this.couponDialogBox(this.model.get("couponNode")),Eggshell.find(this).trigger("applied coupon successfully",{cpnCode:this.model.get("couponNode").code})},render:function(){this.createCpnHeadline();var t=this.model.get("couponNode");Eggshell.find(this).trigger("data is loaded",{couponNode:t})},createCpnHeadline:function(){this.checkURLcoupon();var e=this.model.get("couponNode");this.headlineCpn=Eggshell.create("C.global.coupon.headline",{el:$(".chg-content")}).on("coupon headline displayed",function(){if(!1===e.applied){var t={couponCode:e.code,action:"Coupon Displayed"};this.sessionLogger.trigger("session log",t)}},this).trigger("render",e).on("apply headline button clicked",this.applyCoupon,this),Eggshell.connect(Eggshell.find(this).getNamespace(),"apply coupon on headline click",this.headlineCpn,"apply coupon on headline click"),this.model.get("applyOnHeadlineClick")&&this.headlineCpn.trigger("apply coupon on headline click")},checkStatus:function(){var t;!0===this.model.get("couponNode").applied&&Eggshell.find(this).trigger("active coupon")},reportApplyEvent:function(){var t,e={couponCode:this.model.get("couponNode").code,action:"Coupon Applied"};this.sessionLogger.trigger("session log",e)},openCouponDialogBox:function(t,e){var i=e.title,n=e.disclaimer,s=e.code,o;void 0===C.utility.getParams().noApply&&this.model.addCoupon(e.code,!0),this.model.on("coupon",$.proxy(function(t,e){this.couponDialogBox(this.model.get("couponNode"),i,n),t.stopPropagation()},this))},applyCoupon:function(t,e){Eggshell.find(this).trigger("active coupon");var i=this.model.get("couponNode");this.appliedByKeyboard=e&&!!e.appliedByKeyboard,void 0!==i?(this.couponDialogBox(this.model.get("couponNode")),this.headlineCpn.trigger("show applied msg")):this.model.on("couponApplied",$.proxy(function(){this.couponDialogBox(this.model.get("couponNode")),this.headlineCpn.trigger("show applied msg")},this)),this.model.addCoupon(i.code),this.reportApplyEvent()},checkURLcoupon:function(){var t=this.getQueryVariable("cp");"noCp"!=t&&(""==t?C.utility.setCookie("HeadlineNoShow","true",1):(this.model.addCoupon(t,!0),this.model.on("coupon",this.couponDialogBox,this)))},getQueryVariable:function(t){for(var e,i=window.location.search.substring(1).split("&"),n=0;n<i.length;n++){var s=i[n].split("=");if(s[0]==t)return s[1]}return"noCp"},couponDialogBox:function(t,e,i){if(e&&i)var n=e,s=i;else var n=t.title,s=t.disclaimer;var o='<div id="couponTitle" class="coupon-added-msg" aria-label="Coupon."><span class="coupon-icon icon-chegg-Deal"></span>Coupon</div>',r='<div class="auto-apply-coupon-dialog"><div class="coupon-message" aria-label="'+n+'.">'+n+'</div><div class="coupon-expiration">'+s+'</div><div class="msg-success-sm"><div class="msg-icon"><div class="msg-text">Coupon will be applied at checkout</div></div></div></div>';if(this.dialog)Eggshell.trigger(this.dialog,"show");else{this.dialog=Eggshell.create("C.Eggshell.dialog").trigger("set id","couponDialog").trigger("set headline",o).trigger("disable default padding").trigger("hide sub headline").trigger("hide icon").trigger("set content html",r).trigger("show").on("close button clicked",$.proxy(function(){this.closingByKeyboard&&($(".C-global-coupon-headline .apply-coupon h1").focus(),this.closingByKeyboard=!1),$.ajax({url:"/_ajax/global/coupon/shown"})},this));var a=$("#couponDialog");a.attr("role","dialog").attr("aria-labelledby","couponTitle").attr("aria-modal","true");var l=a.find(".close").attr("aria-label","Close").attr("role","button").attr("tabindex","0").removeAttr("title").keydown($.proxy(function(t){13===t.keyCode||32===t.keyCode||27===t.keyCode?(t.stopPropagation(),t.preventDefault(),this.closingByKeyboard=!0,$(t.currentTarget).click()):9===t.keyCode&&(t.stopPropagation(),t.preventDefault(),$(t.currentTarget).focus())},this));this.dialog.on("shown",$.proxy(function(){this.appliedByKeyboard&&(l.focus(),this.appliedByKeyboard=!1)},this)).trigger("show")}$(".auto-apply-coupon-dialog button").on("click",$.proxy(function(){var t=window.location.pathname.split("/");"checkout"!==t[1]||"sp"!==t[2]&&"spc"!==t[2]?"checkout"!==t[1]||"confirm"!==t[2]&&"review"!==t[2]?Eggshell.trigger(this.dialog,"hide"):(Eggshell.trigger(this.dialog,"hide"),C.utility.refresh()):Eggshell.trigger(this.dialog,"hide")},this))}})}()),Eggshell.define("C.global.promo",{inputs:{render:{payload:null},"open dialog":{payload:null}},outputs:{},newNode:!1,singleton:!0,strict:!0},function(){var t=Backbone.Model.extend({initialize:function(){},fetchPromo:function(){var e=C.utility.getParams();e.mep?$.ajax({url:"/_ajax/global/promo/get",type:"POST",dataType:"json",data:{promoCode:e.mep},context:this,success:$.proxy(function(t){null!=t&&(this.set("promoInfo",t),this.set("promoCode",e.mep),this.trigger("loaded"))},this),error:function(t){}}):this.set("promoInfo",null)}}),e;return Backbone.View.extend({initialize:function(){this.model=new t,this.model.on("loaded",this.render,this),this.model.fetchPromo(),Eggshell.find(this).on("open dialog",this.openDialog).on("render",this.render)},render:function(){this.openDialog()},openDialog:function(t,e){var i=this.model.get("promoInfo");i.title&&i.body&&i.btnText&&this.promoDialogBox(i)},promoDialogBox:function(t){var e='<div class="auto-apply-coupon-dialog"><div class="coupon-message">'+t.title+'</div><div class="coupon-expiration">'+t.body+'</div><button class="btn-primary-sm">'+t.btnText+'</button><div class="coupon-disclaimer">'+t.disclaimer+"</div></div>";this.dialog?Eggshell.trigger(this.dialog,"show"):(this.dialog=Eggshell.create("C.common.dialog").trigger("disable default padding").trigger("hide sub headline").trigger("hide icon").trigger("hide control").trigger("set content html",e).trigger("show"),this.dialogShown(this.model.get("promoCode"))),$(".auto-apply-coupon-dialog button").on("click",$.proxy(function(){Eggshell.trigger(this.dialog,"hide")},this))},dialogShown:function(t){$.ajax({url:"/_ajax/global/promo/shown",type:"POST",dataType:"json",data:{promoCode:t},context:this})}})}()),Eggshell.define("C.global.coupon.headline",{inputs:{render:{payload:{id:"string",code:"string",title:"string",disclaimer:"string",applied:"boolean",path:"string"}},"show headline coupon":{payload:null},"show applied msg":{payload:null},"apply coupon on headline click":{payload:null}},outputs:{"apply headline button clicked":{payload:null},"coupon headline displayed":{payload:null}}},Backbone.View.extend({initialize:function(){Eggshell.find(this).on("render",this.render).on("show headline coupon",this.showCpnHeadline).on("show applied msg",this.showAppliedMsg).on("apply coupon on headline click",this.applyCouponOnHeadlineClick);var t=window.location.pathname.split("/");this.applyOnHeadlineClick=""==t[1]||"books"==t[1]},render:function(t,e){this.showCpnHeadline(e),this.delegateEvents()},tmplCouponHeadline:_.template('<div class="C-global-coupon-headline"><div class="headline-wrapper"><div class="apply-coupon"><div class="coupon-icon icon-chegg-Deal"></div><h1 role="button" aria-label="<%- coupon.title %>, Open Coupon Dialog."><strong><%- coupon.title %></strong><a href="javascript:void(0)" class="show-disclaimer">See details...</a></h1></div><div class="coupon-code"><div class="coupon-code-wrapper"><% if (coupon.applied) { %><h2><span class="icon-chegg-Check"></span><%- appliedMsg %></h2><% }else{ %><h2>Code: <strong><%- coupon.code %></strong></h2><button class="btn-secondary btn-sm coupon-btn">Apply coupon</button><% } %></div></div><div class="disclaimer"><h3><%- coupon.disclaimer %></h3></div></div></div>'),showCpnHeadline:function(t){var e=C.utility.getCookie("HeadlineNoShow"),i;if(!(C.global.forcedHideCoupon||!1)&&"true"!=e&&this.isCorrectPath(t.path)){var n=$(".C-global-coupon-headline");n.length&&n.remove(),this.$el=$(this.tmplCouponHeadline({coupon:{title:t.title,code:t.code,disclaimer:t.disclaimer,expireDate:t.expireDate,id:t.id,applied:t.applied},appliedMsg:this.getAppliedMsg()}));var s=$(".chg-content > .sohp > .sohp-header");if(0===s.length&&(s=$(".rent-buy-autosuggest").parent().parent()),0<s.length?s.append(this.$el):$(".chg-content").prepend(this.$el),this.handleApplyCouponFocuseability(),this.registerHealineListerner(t),Eggshell.find(this).trigger("coupon headline displayed"),C.global.stickyCoupon&&(this.$(".show-disclaimer").hide(),!t.applied&&"/"!=window.location.pathname&&!$(".C-common-heroimg").length)){var o=this.$el,r=o.parent(),a=parseInt(r.css("padding-top"),10);$(window).scroll(function(t){var e=$(window).scrollTop();!o.hasClass("fix-coupon")&&30<e?(o.addClass("fix-coupon"),r.css("padding-top",a+o.outerHeight(!0)+"px"),o.slideDown("fast")):o.hasClass("fix-coupon")&&e<30&&(r.css("padding-top",a+"px"),o.removeClass("fix-coupon"),o.show())})}}},isCorrectPath:function(t){if(t)for(var e=window.location.pathname,i=t.split(" "),n=0,s=i.length;n<s;n++){if(i[n]==e)return!0;var o="^"+C.utility.escapeRegEx(i[n]).replace("\\*",".*")+"$",r=new RegExp(o);if(r.test(e)||"/"!=e.substr(-1)&&r.test(e+"/"))return!0}return!1},showAppliedMsg:function(){var t=this.getAppliedMsg();this.$(".coupon-code h2").html("<span class='icon-chegg-Check'></span>"+t),this.$(".coupon-code button").hide()},getAppliedMsg:function(){var t="Coupon will be applied at checkout",e;return 0===window.location.pathname.indexOf("/checkout/sp")&&(t="Coupon applied at checkout"),t},applyCouponOnHeadlineClick:function(t,e){this.applyOnHeadlineClick=!1!==e,this.handleApplyCouponFocuseability()},handleApplyCouponFocuseability:function(){var t=this.$(".apply-coupon h1");this.applyOnHeadlineClick?t.attr("tabindex","0"):t.removeAttr("tabindex")},registerHealineListerner:function(t){C.global.stickyCoupon?(this.$el.css("cursor","pointer"),this.$el.click($.proxy(function(t){t.stopPropagation(),this.checkHowApply()},this))):this.$(".apply-coupon").click($.proxy(function(t){t.stopPropagation(),this.headlineClick(t)},this)).find("h1").click(function(t){$(t.currentTarget).blur()}).keydown($.proxy(function(t){13!==t.keyCode&&32!==t.keyCode||(this.appliedByKeyboard=!0,this.headlineClick(t),t.preventDefault())},this)),this.$("button").click($.proxy(function(t){t.originalEvent&&0===t.originalEvent.detail&&(this.appliedByKeyboard=!0),t.stopPropagation(),this.checkHowApply()},this)),this.$(".show-disclaimer").click($.proxy(function(){this.showDisclaimer()},this))},headlineClick:function(t){this.applyOnHeadlineClick&&this.checkHowApply()},showDisclaimer:function(t){this.$(".disclaimer").css("display","block"),this.$(".show-disclaimer").css("display","none"),this.$(".apply-coupon").css("padding-bottom","0px"),this.$(".headline-wrapper").css("height","90px")},checkHowApply:function(){Eggshell.find(this).trigger("apply headline button clicked",{appliedByKeyboard:!!this.appliedByKeyboard}),this.appliedByKeyboard=!1}})),Eggshell.define("C.common.overlay.tooltip",{inputs:{"set target":{payload:"jquery"},"set tooltip size":{payload:"string"},"position caret on top right":{payload:"object"},"add custom css class":{payload:null},"position caret center":{payload:null},"set tooltip border color":{payload:"string"},"get tooltip content node":{payload:null},show:{payload:null},hide:{payload:null},toggle:{payload:null},"enable tooltip on hover":{payload:null},"disable tooltip on hover":{payload:null},"set tooltip below target":{payload:null},"set tooltip above target":{payload:null},"set tooltip on the left of target":{payload:null},"set tooltip on the right of target":{payload:null},"set text":{payload:"string"},"hide tooltip when user click anywhere else":{payload:null},"acitvate tooltip":{payload:null},"deacitvate tooltip":{payload:null},"enable tooltip slide with screen resize":{payload:null},"position tooltip relative to target":{payload:null},"set tooltip the width":{payload:"number"},"set tooltip color":{payload:"string"},"set title text":{payload:"string"},"enable close button":{payload:null},disable_max_z_index:{payload:null},"set animation":{payload:"string"},fix_position:{payload:null},"open on tab":{payload:null}},outputs:{"return tooltip content node":{payload:"jquery"},shown:{payload:null},"after hide":{payload:null}}},Backbone.View.extend({position:"bottom",tooltipWidthDefault:200,events:{"click .close-btn":"hide"},initialize:function(){this.tooltipWidth=this.tooltipWidthDefault,Eggshell.find(this).on("destroy",this.destroy).on("set target",this.setTarget).on("set tooltip size",this.setSize).on("get tooltip content node",this.getContentNode).on("enable tooltip on hover",this.enableHover).on("disable tooltip on hover",this.disableHover).on("show",this.show).on("hide",this.hide).on("toggle",this.toggle).on("set text",this.setText).on("set tooltip color",this.setBackgroundColor).on("position caret on top right",this.positionCaretRight).on("position caret center",this.positionCaretCenter).on("set tooltip border color",this.setBorderColor).on("set title text",this.setTitle).on("enable close button",this.setCloseBtn).on("disable_max_z_index",this.disableMaxZIndex).on("add custom css class",this.addCustomCssClass).on("open on tab",this.openOnTab).on("enable tooltip slide with screen resize",function(){this.moveWithScreen=!0}).on("set tooltip zindex",function(t,e){this.zindex=e}).on("position tooltip relative to target",function(){this.positionRelative=!0}).on("acitvate tooltip",function(){this.dialogOpen=!0}).on("deacitvate tooltip",function(){this.dialogOpen=!1}).on("hide tooltip when user click anywhere else",function(){this.clickWindow=!0}).on("set tooltip below target",function(){this.setPosition(null,"bottom")}).on("set tooltip above target",function(){this.setPosition(null,"top")}).on("set tooltip on the left of target",function(){this.setPosition(null,"left")}).on("set tooltip on the right of target",function(){this.setPosition(null,"right")}).on("set tooltip the width",function(t,e){this.tooltipWidth=e}).on("set animation",function(t,e){this.tooltipAnimationClass=e}).on("fix_position",function(){this.fixedPosition=!0,this.fixTooltipPosition()}),this.render()},destroy:function(){this.hide()},stopParentEvent:function(t){t.stopPropagation()},render:function(){return this.$el.html(this.template()),this.$el.on("mouseover",$.proxy(this.stopWait,this)),this.$el.on("mouseleave",$.proxy(this.waitAndHide,this)),this.hide(),this.addResizeAbility(),this.addScrollDetection(),this},addAccessibility:function(){var t;this.$el.id=this.$el.id||"ttid-"+Math.random(),this.$el.attr("role","tooltip"),this.$target.attr("aria-label")||this.$target.attr("aria-label","more information"),this.$target.attr("tabindex","0"),this.$target.attr("aria-describedby",this.$el.id)},openOnTab:function(){if(!this.$target)throw"Please set the target element first";this.disableHover(),this.$target.on("mouseover",$.proxy(this.handleTargetMouseOverEvent,this)),this.$target.on("focus",$.proxy(this.handleTargetMouseOverEvent,this)),this.$target.on("mouseleave",$.proxy(this.waitAndHide,this)),this.$target.on("blur",$.proxy(this.waitAndHide,this)),this.$el.on("mouseover",$.proxy(this.stopWait,this)),this.$el.on("mouseleave",$.proxy(this.waitAndHide,this))},positionCaretRight:function(t,e){void 0===e?this.$(".tooltip-arrow-top").css("margin-left","240px"):(this.$(".tooltip-arrow-top").css("margin-left",e.caretMarginLeft),this.caretRightMinusLeft=e.caretRightMinusLeft),this.caretRight=!0},positionCaretCenter:function(){this.$(".tooltip-arrow-top, .tooltip-arrow-bottom").css("margin","auto"),this.caretCenter=!0},fixTooltipPosition:function(){this.$el.addClass("fixed")},setSize:function(t,e){if("small"!==e&&"large"!==e)throw"Invalid tooltip size. Only large and small are supported";this.$el.removeClass("large small").addClass(e),this.shown&&(this.hide(),this.show())},setBorderColor:function(t,e){if("orange"!==e&&"teal"!==e)throw"Invalid tooltip border color. Only orange or teal is supported";this.$(".tooltip-content").removeClass("orange-border grey-border").addClass(e+"-border"),"bottom"===this.position?this.$(".tooltip-arrow-top").removeClass("tooltip-arrow-top-grey").addClass("tooltip-arrow-top-"+e):"top"!==this.position&&"right"!==this.position&&"left"!==this.position||this.$(".tooltip-arrow-bottom").removeClass("tooltip-arrow-bottom-grey").addClass("tooltip-arrow-bottom-"+e)},addResizeAbility:function(){$(window).resize($.proxy(function(){this.shown&&(this.hide(),this.show())},this))},addScrollDetection:function(){$(window).scroll($.proxy(function(){this.shown&&!this.fixedPosition&&(this.hide(),this.show())},this))},template:_.template('<div class="tooltip">   <div class="tooltip-arrow-top tooltip-arrow-top-grey"></div>   <div class="tooltip-content grey-border"></div>   <div class="tooltip-left-shadow"></div><div class="tooltip-arrow-bottom tooltip-arrow-bottom-grey"></div><div class="tooltip-right-shadow"></div></div>'),setTarget:function(t,e){if(this.$target)throw"Target can only be set once";if(e&&e.jquery)this.$target=e;else{if(!e||"string"==typeof e)throw"Invalid target node";this.$target=$(e)}this.$target=$.extend({},this.$target),this.addAccessibility(),this.enableHover()},setPosition:function(t,e){if("top"!=e&&"bottom"!=e&&"left"!=e&&"right"!=e)throw"Invalid position. Position value has to be either top, bottom, left, or right.";this.position=e},enableHover:function(){if(!this.$target)throw"Please set the target element first";this.disableHover(),this.$target.on("mouseover",$.proxy(this.handleTargetMouseOverEvent,this)),this.$target.on("mouseleave",$.proxy(this.waitAndHide,this)),this.$el.on("mouseover",$.proxy(this.stopWait,this)),this.$el.on("mouseleave",$.proxy(this.waitAndHide,this))},disableHover:function(){if(!this.$target)throw"Please set the target element first";this.$target.off("mouseover"),this.$target.off("mouseleave"),this.$el.off("mouseover"),this.$el.off("mouseleave")},getContentNode:function(){Eggshell.find(this).trigger("return tooltip content node",$.extend({},this.$(".tooltip-content")))},setText:function(t,e){0<e.length&&this.$(".tooltip-content").html(e)},setTitle:function(t,e){var i;$('<div class="tooltip-title"></div>').html(e).insertBefore(this.$(".tooltip-content")),this.$el.addClass("header-enabled")},setCloseBtn:function(){this.$(".tooltip").append('<span class="close-btn" title="Close tooltip"></span>')},disableMaxZIndex:function(){this.disableMaxZIndexFlag=!0},addCustomCssClass:function(t,e){e&&0<this.$(e.cssSelector).length&&this.$el.addClass(e.cssClass)},fadeIn:function(){this.$el.show().css("opacity",1)},fadeOut:function(){this.$el.show().css("opacity",0)},hide:function(){this.shown=!1,this.$el.css({visibility:"hidden",opacity:0}),this.clickWindow&&Eggshell.find(this).trigger("after hide")},show:function(){if(1!=this.dialogOpen&&"none"!==this.$target.css("display")&&"hidden"!==this.$target.css("visibility")&&(0!==this.$target.offset().top||0!==this.$target.offset().left)){var t;if(this.shown=!0,this.tooltipWidth!==this.tooltipWidthDefault&&(this.$el.addClass("custom-width"),this.$(".tooltip").css({width:this.tooltipWidth+"px"})),this.$(".tooltip-arrow-bottom").css({"margin-top":"0px"}),this.$el.show().removeClass("tooltip-top tooltip-bottom tooltip-left tooltip-right"),1==this.positionRelative)var e=this.$target.position();else var e=this.$target.offset();if(this.disableMaxZIndexFlag||this.$el.css({"z-index":this.zindex||C.utility.getMaxIndex()+1}),"bottom"===this.position){this.$el.addClass("tooltip-bottom");var i=e.left-Math.floor(this.$el.outerWidth()/2)+Math.floor(this.$target.outerWidth()/2)+4,n=e.top+this.$target.outerHeight();i+this.$el.width()>$(window).width()&&1==this.moveWithScreen&&(i=$(window).width()<700?700-this.$el.width():$(window).width()-this.$el.width()),this.caretRight?i-=void 0===this.caretRightMinusLeft?100:this.caretRightMinusLeft:this.caretCenter&&this.$el.addClass("center-caret"),this.tooltipAnimationClass&&this.$el.addClass(this.tooltipAnimationClass),this.$el.css({top:n+"px",left:i+"px",visibility:"visible",opacity:1}),this.$(".tooltip-arrow-bottom").css({"margin-top":"0px"})}else if("top"===this.position){this.$el.addClass("tooltip-top");var i=e.left-Math.floor(this.$el.outerWidth()/2)+Math.floor(this.$target.outerWidth()/2)+4,n=e.top-this.$el.outerHeight()+1;i+this.$el.width()>$(window).width()&&1==this.moveWithScreen&&(i=$(window).width()<700?700-this.$el.width():$(window).width()-this.$el.width()),this.$el.css({top:n+"px",left:i+"px",visibility:"visible",opacity:1}),this.$(".tooltip-arrow-bottom").css({"margin-top":"0px"}),this.caretCenter&&this.$el.addClass("center-caret")}else if("left"===this.position){this.$el.addClass("tooltip-left");var i=e.left-this.tooltipWidth-15+1,n=Math.floor(e.top+this.$target.outerHeight()/2-(this.$el.outerHeight()-20)/2);this.$el.css({top:n+"px",left:i+"px",visibility:"visible",opacity:1}),this.$(".tooltip-arrow-bottom").css({"margin-top":-1*Math.floor(this.$el.outerHeight()/2)+"px"})}else if("right"===this.position){this.$el.addClass("tooltip-right");var i=e.left+this.$target.outerWidth()+14,n=Math.floor(e.top+this.$target.outerHeight()/2-(this.$el.outerHeight()-20)/2);this.$el.css({top:n+"px",left:i+"px",visibility:"visible",opacity:1}),this.$(".tooltip-arrow-bottom").css({"margin-top":-1*Math.floor(this.$el.outerHeight()/2)+"px"})}1==this.clickWindow&&this.windowClickHide(),Eggshell.find(this).trigger("shown")}},windowClickHide:function(){this.$el.off("click").on("click",this.stopParentEvent),$("*").on("click."+this.$el.attr("id"),$.proxy(function(){var t=$(".tooltip").filter(function(){return $(this).is(":hover")}),e=this.$target.filter(function(){return $(this).is(":hover")});0==t.length&&0==e.length&&this.hide()},this))},toggle:function(){"hidden"===this.$el.css("visibility")?this.show():this.hide()},waitAndHide:function(){this.timer=setTimeout($.proxy(function(){this.hide()},this),100)},stopWait:function(){clearTimeout(this.timer)},handleTargetMouseOverEvent:function(){Eggshell.find("C.common.overlay.tooltip").trigger("hide"),this.show(),this.stopWait()},setBackgroundColor:function(t,e){this.$el.addClass(e)}})),function(){var n=0,t=100,s=[],o="",r;function a(){var t=s.shift();t&&e(t)}function l(){n=+new Date}function c(){r=setTimeout(function(){a(),s.length?c():r=null},t)}function i(t){var e,i=+new Date-n;l(),s.push(t),r||(100<i?a():c())}function e(t){var i=new XMLHttpRequest,e=[];function n(t){var e;if(l(),t){try{e=JSON.parse(i.responseText)}catch(t){e={}}t(e)}}if(i.open("POST",o+"/_ajax/odinconcat"),i.withCredentials=!0,i.setRequestHeader("Content-Type","application/json"),i.onload=n.bind(this,t.success),i.onerror=n.bind(this,t.error),t.requests){if(10<t.requests.length)throw"can only use up to 10 requests at a time";t.requests.forEach(function(t){e.push({url:t.url,method:t.method||"get",payload:t.payload||null,action:t.action,child_request:t.child_request||null,use_board:!!t.use_board,headers:t.headers||{},timeout:t.timeout||null})}),i.send(JSON.stringify({requests:e,headers:t.headers}))}}Eggshell.define("C.odin.concat",{inputs:["fetch","set base url"]},function(){this.Eggshell.listen("fetch",function(t,e){i(e)}),this.Eggshell.listen("set base url",function(t,e){o=e.url})})}(),Eggshell.define("C.common.guarantee.badge",{inputs:["render"],outputs:[]},function(){var t;return C.View.extend({tmpl:_.template('<div class="badge"><span class="badge-icon"></span></div>'),tooltipTmpl:_.template('<div class="guarantee-tooltip"><span class="badge-icon"></span><h1 class="title">Rental Price Guarantee</h1><span class="description">Find a lower price, we\'ll match it. <span class="show-modal">See details</span></span></div>'),initialize:function(){this.render()},render:function(){this.$el.html(this.tmpl()),this.renderTooltip(),this.renderGuaranteeModel()},renderTooltip:function(){this.badgeTooltip=Eggshell.create("C.common.overlay.tooltip").trigger("set target",this.$(".badge")).trigger("set tooltip the width",300).trigger("set tooltip above target").trigger("enable tooltip on hover").trigger("set tooltip color","green").on("return tooltip content node",function(t,e){var i;e.html(this.tooltipTmpl())},this).trigger("get tooltip content node")},renderGuaranteeModel:function(){this.pricematchmodal=Eggshell.create("C.common.pricematchmodal").trigger("render");var t=this.badgeTooltip.getId();t=t.replace(".","-"),$("#"+t+" .guarantee-tooltip .show-modal").click($.proxy(function(t){this.showModal()},this))},showModal:function(){this.pricematchmodal.trigger("show")}})}()),document.addEventListener("DOMContentLoaded",function(){$(".chg-system-message").length&&(resizeSystemMessage(),window.addEventListener("resize",resizeSystemMessage))});